(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[7],{"3xUx":function(e,t,a){"use strict";a.r(t);var r=a("cVrL"),i=a("ZXlt"),n=a.n(i),o=a("q1tI"),c=a.n(o),l=a("pVnL"),s=a.n(l),u=a("DZdY"),d=a("dPxz");const m=Object(u.a)("div",{target:"e1d3muyo1"})({name:"1st9kbp",styles:"height:100%;position:relative"}),v=Object(u.a)("div",{target:"e1d3muyo0"})({name:"gth0vq",styles:"height:inherit"});var w=({image:e,isLoading:t,loader:a})=>c.a.createElement(m,{"data-tpl":"interior-360"},c.a.createElement(v,e),t&&c.a.createElement(d.a,s()({},a,{overlay:!0}))),p=a("pz1y"),g=a("M6hU"),h=a("iybU");t.default=()=>{var e;const{appData:t}=Object(g.a)(),{selectedStage:a}=Object(p.b)(),[i,l]=Object(o.useState)(0),[s,u]=Object(o.useState)(!0),d=Object(o.useRef)(null),m=Object(o.useRef)(),v=i>3,y=null==t?void 0:t.carousel.labels.spinner360SwipeToRotate,O=null==t||null===(e=t.carousel.data.interior360Gallery)||void 0===e?void 0:e.baseUrl.replace("/{imageIndex}",""),_=Object(h.a)(O);return Object(o.useEffect)(()=>{if("interior360"===a&&s&&setTimeout(()=>{u(!1)},3e3),i<3&&O&&O!==_)try{var e,t;const a=new n.a.Viewer(d.current,{controls:{mouseViewMode:"drag",dragMode:"multipinch"}}),r=b(O+"?auto=format,compress",null===(e=m.current)||void 0===e?void 0:e.view().yaw(),null===(t=m.current)||void 0===t?void 0:t.view().pitch()),i=a.createScene(r),o=new Image;o.crossOrigin="anonymous",o.src=O+"?auto=format,compress",o.onload=()=>{i.switchTo({transitionDuration:500}),m.current=a},l(0)}catch(e){l(i+1)}},[i,s,m,O,_,a]),O&&!v?c.a.createElement(w,{image:{key:"pano",ref:d},isLoading:"interior360"===a&&s,loader:{title:y||" ",hideSpinner:!0}}):c.a.createElement(r.a,null)};const b=(e,t,a)=>{const r=n.a.ImageUrlSource.fromString(e),i=new n.a.EquirectGeometry([{width:4e3}]),o=n.a.RectilinearView.limit.traditional(1024,100*Math.PI/180);return{geometry:i,pinFirstLevel:!0,source:r,view:new n.a.RectilinearView({yaw:t,pitch:a},o)}}}}]);