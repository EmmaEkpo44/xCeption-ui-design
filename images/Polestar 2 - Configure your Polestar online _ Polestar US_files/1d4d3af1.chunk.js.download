(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[21],{"+3xs":function(t,e,n){"use strict";var r=n("IOcx").mat4,i=n("IOcx").vec3,o=n("77Rc"),s=n("4Hdd"),a=s.createConstantBuffers,h=s.destroyConstantBuffers,u=s.createShaderProgram,c=s.destroyShaderProgram,l=s.enableAttributes,f=s.disableAttributes,p=s.setViewport,d=s.setupPixelEffectUniforms,v=s.setDepth,m=s.setTexture,_=n("Pw8D"),y=n("J2ab"),g=[0,1,2,0,2,3],w=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],M=[0,0,1,0,1,1,0,1],x=["aVertexPosition","aTextureCoord"],b=["uDepth","uOpacity","uSampler","uProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix"];function E(t){this.gl=t,this.projMatrix=r.create(),this.viewportMatrix=r.create(),this.translateVector=i.create(),this.scaleVector=i.create(),this.constantBuffers=a(t,g,w,M),this.shaderProgram=u(t,_,y,x,b)}E.prototype.destroy=function(){h(this.gl,this.constantBuffers),c(this.gl,this.shaderProgram),o(this)},E.prototype.startLayer=function(t,e){var n=this.gl,r=this.shaderProgram,i=this.constantBuffers,o=this.viewportMatrix;n.useProgram(r),l(n,r),p(n,t,e,o),n.uniformMatrix4fv(r.uViewportMatrix,!1,o),n.bindBuffer(n.ARRAY_BUFFER,i.vertexPositions),n.vertexAttribPointer(r.aVertexPosition,3,n.FLOAT,n.FALSE,0,0),n.bindBuffer(n.ARRAY_BUFFER,i.textureCoords),n.vertexAttribPointer(r.aTextureCoord,2,n.FLOAT,n.FALSE,0,0),d(n,t.effects(),{opacity:r.uOpacity,colorOffset:r.uColorOffset,colorMatrix:r.uColorMatrix})},E.prototype.endLayer=function(t,e){var n=this.gl,r=this.shaderProgram;f(n,r)},E.prototype.renderTile=function(t,e,n,i){var o=this.gl,s=this.shaderProgram,a=this.constantBuffers,h=this.projMatrix,u=this.translateVector,c=this.scaleVector;u[0]=t.centerX(),u[1]=t.centerY(),u[2]=-.5,c[0]=t.scaleX(),c[1]=t.scaleY(),c[2]=1,r.copy(h,n.view().projection()),r.rotateX(h,h,t.rotX()),r.rotateY(h,h,t.rotY()),r.translate(h,h,u),r.scale(h,h,c),o.uniformMatrix4fv(s.uProjMatrix,!1,h),v(o,s,i,t.z),m(o,s,e),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,a.vertexIndices),o.drawElements(o.TRIANGLES,g.length,o.UNSIGNED_SHORT,0)},t.exports=E},"/IDO":function(t,e,n){"use strict";t.exports=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(null,arguments)),e}}},"/zJR":function(t,e,n){"use strict";(function(e){var n="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==e?e:null;t.exports=n}).call(this,n("yLpj"))},"33aB":function(t,e,n){"use strict";var r=n("l8c5"),i=n("aGdX"),o=n("Vq8G"),s={duration:1/0};function a(t){t=i(t||{},s),this._duration=t.duration,this._startTime=null,this._handle=null,this._check=this._check.bind(this)}r(a),a.prototype.start=function(){this._startTime=o(),null==this._handle&&this._duration<1/0&&this._setup(this._duration)},a.prototype.started=function(){return null!=this._startTime},a.prototype.stop=function(){this._startTime=null,null!=this._handle&&(clearTimeout(this._handle),this._handle=null)},a.prototype._setup=function(t){this._handle=setTimeout(this._check,t)},a.prototype._teardown=function(){clearTimeout(this._handle),this._handle=null},a.prototype._check=function(){var t=o()-this._startTime,e=this._duration-t;this._teardown(),e<=0?(this.emit("timeout"),this._startTime=null):e<1/0&&this._setup(e)},a.prototype.duration=function(){return this._duration},a.prototype.setDuration=function(t){this._duration=t,null!=this._startTime&&this._check()},t.exports=a},"43FX":function(t,e,n){"use strict";t.exports=function(t){return"number"==typeof t&&isFinite(t)}},"4Hdd":function(t,e,n){"use strict";var r=n("CSCW"),i=n("IOcx").vec4,o=n("IOcx").vec3,s=n("IOcx").mat4;function a(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r}function h(t,e,n,r){var i=t.createBuffer();return t.bindBuffer(e,i),t.bufferData(e,r,n),i}var u=i.create(),c=s.create();s.identity(c);var l=o.create(),f=o.create();t.exports={createShaderProgram:function(t,e,n,r,i){var o=a(t,t.VERTEX_SHADER,e),s=a(t,t.FRAGMENT_SHADER,n),h=t.createProgram();if(t.attachShader(h,o),t.attachShader(h,s),t.linkProgram(h),!t.getProgramParameter(h,t.LINK_STATUS))throw t.getProgramInfoLog(h);for(var u=0;u<r.length;u++){var c=r[u];if(h[c]=t.getAttribLocation(h,c),-1===h[c])throw new Error("Shader program has no "+c+" attribute")}for(var l=0;l<i.length;l++){var f=i[l];if(h[f]=t.getUniformLocation(h,f),-1===h[f])throw new Error("Shader program has no "+f+" uniform")}return h},destroyShaderProgram:function(t,e){for(var n=t.getAttachedShaders(e),r=0;r<n.length;r++){var i=n[r];t.detachShader(e,i),t.deleteShader(i)}t.deleteProgram(e)},createConstantBuffers:function(t,e,n,r){return{vertexIndices:h(t,t.ELEMENT_ARRAY_BUFFER,t.STATIC_DRAW,new Uint16Array(e)),vertexPositions:h(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(n)),textureCoords:h(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(r))}},destroyConstantBuffers:function(t,e){t.deleteBuffer(e.vertexIndices),t.deleteBuffer(e.vertexPositions),t.deleteBuffer(e.textureCoords)},enableAttributes:function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<n;r++)t.enableVertexAttribArray(r)},disableAttributes:function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<n;r++)t.disableVertexAttribArray(r)},setTexture:function(t,e,n){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n._texture),t.uniform1i(e.uSampler,0)},setDepth:function(t,e,n,r){var i=(256*(n+1)-r)/65536;t.uniform1f(e.uDepth,i)},setViewport:function(t,e,n,i){if(0===n.x&&1===n.width&&0===n.y&&1===n.height)return t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),void s.identity(i);var a=n.x,h=r(a,0,1),u=h-a,c=1-h,p=r(n.width-u,0,c),d=n.width-p,v=1-n.height-n.y,m=r(v,0,1),_=m-v,y=1-m,g=r(n.height-_,0,y),w=n.height-g;o.set(f,n.width/p,n.height/g,1),o.set(l,(d-u)/p,(w-_)/g,0),s.identity(i),s.translate(i,i,l),s.scale(i,i,f),t.viewport(t.drawingBufferWidth*h,t.drawingBufferHeight*m,t.drawingBufferWidth*p,t.drawingBufferHeight*g)},setupPixelEffectUniforms:function(t,e,n){var r=1;e&&null!=e.opacity&&(r=e.opacity),t.uniform1f(n.opacity,r);var i=u;e&&e.colorOffset&&(i=e.colorOffset),t.uniform4fv(n.colorOffset,i);var o=c;e&&e.colorMatrix&&(o=e.colorMatrix),t.uniformMatrix4fv(n.colorMatrix,!1,o)}}},"4sOk":function(t,e,n){"use strict";var r=n("R8wE"),i=n("hwQt"),o=n("icZL"),s=n("IrFz"),a=n("p2RX"),h=n("fpI6").makeLevelList,u=n("fpI6").makeSelectableLevelList,c=n("CSCW"),l=n("ItFr"),f=n("GjHf"),p=n("w5Vv"),d=n("IOcx").vec2,v=n("IOcx").vec4,m=[[0,1],[1,0],[0,-1],[-1,0]];function _(t,e,n,r){this.x=t,this.y=e,this.z=n,this._geometry=r,this._level=r.levelList[n]}function y(t){this.constructor.super_.call(this,t),this._width=t.width,this._height=t.height,this._tileWidth=t.tileWidth,this._tileHeight=t.tileHeight}function g(t){if("array"!==p(t))throw new Error("Level list must be an array");this.levelList=h(t,y),this.selectableLevelList=u(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new o(this),this._neighborsCache=new s(64),this._vec=v.create(),this._viewSize={}}_.prototype.rotX=function(){return 0},_.prototype.rotY=function(){return 0},_.prototype.centerX=function(){var t=this._level.width(),e=this._level.tileWidth();return(this.x*e+.5*this.width())/t-.5},_.prototype.centerY=function(){var t=this._level.height(),e=this._level.tileHeight();return.5-(this.y*e+.5*this.height())/t},_.prototype.scaleX=function(){var t=this._level.width();return this.width()/t},_.prototype.scaleY=function(){var t=this._level.height();return this.height()/t},_.prototype.width=function(){var t=this._level.width(),e=this._level.tileWidth();return this.x===this._level.numHorizontalTiles()-1&&l(t,e)||e},_.prototype.height=function(){var t=this._level.height(),e=this._level.tileHeight();return this.y===this._level.numVerticalTiles()-1&&l(t,e)||e},_.prototype.levelWidth=function(){return this._level.width()},_.prototype.levelHeight=function(){return this._level.height()},_.prototype.vertices=function(t){t||(t=[d.create(),d.create(),d.create(),d.create()]);var e=this.centerX()-this.scaleX()/2,n=this.centerX()+this.scaleX()/2,r=this.centerY()-this.scaleY()/2,i=this.centerY()+this.scaleY()/2;return d.set(t[0],e,i),d.set(t[1],n,i),d.set(t[2],n,r),d.set(t[3],e,r),t},_.prototype.parent=function(){if(0===this.z)return null;var t=this._geometry,e=this.z-1;return new _(Math.floor(this.x/2),Math.floor(this.y/2),e,t)},_.prototype.children=function(t){if(this.z===this._geometry.levelList.length-1)return null;var e=this._geometry,n=this.z+1;return(t=t||[]).push(new _(2*this.x,2*this.y,n,e)),t.push(new _(2*this.x,2*this.y+1,n,e)),t.push(new _(2*this.x+1,2*this.y,n,e)),t.push(new _(2*this.x+1,2*this.y+1,n,e)),t},_.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,n=e.get(this);if(n)return n;for(var r=this.x,i=this.y,o=this.z,s=this._level,a=s.numHorizontalTiles()-1,h=s.numVerticalTiles()-1,u=[],c=0;c<m.length;c++){var l=r+m[c][0],f=i+m[c][1],p=o;0<=l&&l<=a&&0<=f&&f<=h&&u.push(new _(l,f,p,t))}return e.set(this,u),u},_.prototype.hash=function(){return i(this.z,this.y,this.x)},_.prototype.equals=function(t){return this._geometry===t._geometry&&this.z===t.z&&this.y===t.y&&this.x===t.x},_.prototype.cmp=function(t){return f(this.z,t.z)||f(this.y,t.y)||f(this.x,t.x)},_.prototype.str=function(){return"FlatTile("+tile.x+", "+tile.y+", "+tile.z+")"},r(y,a),y.prototype.width=function(){return this._width},y.prototype.height=function(){return this._height},y.prototype.tileWidth=function(){return this._tileWidth},y.prototype.tileHeight=function(){return this._tileHeight},y.prototype._validateWithParentLevel=function(t){var e=this.width(),n=this.height(),r=this.tileWidth(),i=this.tileHeight(),o=t.width(),s=t.height(),a=t.tileWidth(),h=t.tileHeight();return e%o!=0?new Error("Level width must be multiple of parent level: "+e+" vs. "+o):n%s!=0?new Error("Level height must be multiple of parent level: "+n+" vs. "+s):r%a!=0?new Error("Level tile width must be multiple of parent level: "+r+" vs. "+a):i%h!=0?new Error("Level tile height must be multiple of parent level: "+i+" vs. "+h):void 0},g.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var n=this.levelList[e];t=Math.max(t,n.tileWidth,n.tileHeight)}return t},g.prototype.levelTiles=function(t,e){var n=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,i=t.numVerticalTiles()-1;e||(e=[]);for(var o=0;o<=r;o++)for(var s=0;s<=i;s++)e.push(new _(o,s,n,this));return e},g.prototype._closestTile=function(t,e){var n=this._vec;v.set(n,0,0,1,1),v.transformMat4(n,n,t.inverseProjection());var r=.5+n[0],i=.5-n[1],o=this.levelList.indexOf(e),s=e.width(),a=e.height(),h=e.tileWidth(),u=e.tileHeight(),l=e.numHorizontalTiles(),f=e.numVerticalTiles();return new _(c(Math.floor(r*s/h),0,l-1),c(Math.floor(i*a/u),0,f-1),o,this)},g.prototype.visibleTiles=function(t,e,n){var r=this._viewSize,i=this._tileSearcher;if(n=n||[],t.size(r),0===r.width||0===r.height)return n;var o=this._closestTile(t,e);if(!i.search(t,o,n))throw new Error("Starting tile is not visible");return n},g.Tile=g.prototype.Tile=_,g.type=g.prototype.type="flat",_.type=_.prototype.type="flat",t.exports=g},"5K+I":function(t,e,n){"use strict";function r(t){this.constructor.super_.apply(this,arguments),this.message=t}n("R8wE")(r,Error),t.exports=r},"77Rc":function(t,e,n){"use strict";t.exports=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=void 0)}},8674:function(t,e,n){"use strict";function r(t,e,n){return 2*Math.atan(n*Math.tan(t/2)/e)}t.exports={convert:r,htov:function(t,e,n){return r(t,e,n)},htod:function(t,e,n){return r(t,e,Math.sqrt(e*e+n*n))},vtoh:function(t,e,n){return r(t,n,e)},vtod:function(t,e,n){return r(t,n,Math.sqrt(e*e+n*n))},dtoh:function(t,e,n){return r(t,Math.sqrt(e*e+n*n),e)},dtov:function(t,e,n){return r(t,Math.sqrt(e*e+n*n),n)}}},"8HNk":function(t,e,n){"use strict";var r=n("l8c5"),i=n("8lgy"),o=n("77Rc"),s="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function a(t){t=t||{},this._methods={},this._methodGroups={},this._composer=new i,this._enabled=!t||!t.enabled||!!t.enabled,this._activeCount=0,this.updatedViews_=[],this._attachedRenderLoop=null}r(a),a.prototype.destroy=function(){this.detach(),this._composer.destroy(),o(this)},a.prototype.methods=function(){var t={};for(var e in this._methods)t[e]=this._methods[e];return t},a.prototype.method=function(t){return this._methods[t]},a.prototype.registerMethod=function(t,e,n){if(this._methods[t])throw new Error("Control method already registered with id "+t);this._methods[t]={instance:e,enabled:!1,active:!1,activeHandler:this._handleActive.bind(this,t),inactiveHandler:this._handleInactive.bind(this,t)},n&&this.enableMethod(t,e)},a.prototype.unregisterMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&this.disableMethod(t),delete this._methods[t]},a.prototype.enableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled||(e.enabled=!0,e.active&&this._incrementActiveCount(),this._listen(t),this._updateComposer(),this.emit("methodEnabled",t))},a.prototype.disableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&(e.enabled=!1,e.active&&this._decrementActiveCount(),this._unlisten(t),this._updateComposer(),this.emit("methodDisabled",t))},a.prototype.addMethodGroup=function(t,e){this._methodGroups[t]=e},a.prototype.removeMethodGroup=function(t){delete this._methodGroups[t]},a.prototype.methodGroups=function(){var t={};for(var e in this._methodGroups)t[e]=this._methodGroups[e];return t},a.prototype.enableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach((function(t){e.enableMethod(t)}))},a.prototype.disableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach((function(t){e.disableMethod(t)}))},a.prototype.enabled=function(){return this._enabled},a.prototype.enable=function(){this._enabled||(this._enabled=!0,this._activeCount>0&&this.emit("active"),this.emit("enabled"),this._updateComposer())},a.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._activeCount>0&&this.emit("inactive"),this.emit("disabled"),this._updateComposer())},a.prototype.attach=function(t){this._attachedRenderLoop&&this.detach(),this._attachedRenderLoop=t,this._beforeRenderHandler=this._updateViewsWithControls.bind(this),this._changeHandler=t.renderOnNextFrame.bind(t),this._attachedRenderLoop.addEventListener("beforeRender",this._beforeRenderHandler),this._composer.addEventListener("change",this._changeHandler)},a.prototype.detach=function(){this._attachedRenderLoop&&(this._attachedRenderLoop.removeEventListener("beforeRender",this._beforeRenderHandler),this._composer.removeEventListener("change",this._changeHandler),this._beforeRenderHandler=null,this._changeHandler=null,this._attachedRenderLoop=null)},a.prototype.attached=function(){return null!=this._attachedRenderLoop},a.prototype._listen=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.addEventListener("active",e.activeHandler),e.instance.addEventListener("inactive",e.inactiveHandler)},a.prototype._unlisten=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.removeEventListener("active",e.activeHandler),e.instance.removeEventListener("inactive",e.inactiveHandler)},a.prototype._handleActive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active||(e.active=!0,this._incrementActiveCount())},a.prototype._handleInactive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active&&(e.active=!1,this._decrementActiveCount())},a.prototype._incrementActiveCount=function(){this._activeCount++,s&&this._checkActiveCount(),this._enabled&&1===this._activeCount&&this.emit("active")},a.prototype._decrementActiveCount=function(){this._activeCount--,s&&this._checkActiveCount(),this._enabled&&0===this._activeCount&&this.emit("inactive")},a.prototype._checkActiveCount=function(){var t=0;for(var e in this._methods){var n=this._methods[e];n.enabled&&n.active&&t++}if(t!=this._activeCount)throw new Error("Bad control state")},a.prototype._updateComposer=function(){var t=this._composer;for(var e in this._methods){var n=this._methods[e],r=this._enabled&&n.enabled;r&&!t.has(n.instance)&&t.add(n.instance),!r&&t.has(n.instance)&&t.remove(n.instance)}},a.prototype._updateViewsWithControls=function(){var t=this._composer.offsets();t.changing&&this._attachedRenderLoop.renderOnNextFrame(),this.updatedViews_.length=0;for(var e=this._attachedRenderLoop.stage().listLayers(),n=0;n<e.length;n++){var r=e[n].view();this.updatedViews_.indexOf(r)<0&&(e[n].view().updateWithControlParameters(t.offsets),this.updatedViews_.push(r))}},t.exports=a},"8lgy":function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("Vq8G"),s=n("77Rc");function a(t){t=t||{},this._methods=[],this._parameters=["x","y","axisScaledX","axisScaledY","zoom","yaw","pitch","roll"],this._now=t.nowForTesting||o,this._composedOffsets={},this._composeReturn={offsets:this._composedOffsets,changing:null}}r(a),a.prototype.add=function(t){if(!this.has(t)){var e={};this._parameters.forEach((function(t){e[t]={dynamics:new i,time:null}}));var n=this._updateDynamics.bind(this,e),r={instance:t,dynamics:e,parameterDynamicsHandler:n};t.addEventListener("parameterDynamics",n),this._methods.push(r)}},a.prototype.remove=function(t){var e=this._indexOfInstance(t);if(e>=0){var n=this._methods.splice(e,1)[0];n.instance.removeEventListener("parameterDynamics",n.parameterDynamicsHandler)}},a.prototype.has=function(t){return this._indexOfInstance(t)>=0},a.prototype._indexOfInstance=function(t){for(var e=0;e<this._methods.length;e++)if(this._methods[e].instance===t)return e;return-1},a.prototype.list=function(){for(var t=[],e=0;e<this._methods.length;e++)t.push(this._methods[e].instance);return t},a.prototype._updateDynamics=function(t,e,n){var r=t[e];if(!r)throw new Error("Unknown control parameter "+e);var i=this._now();r.dynamics.update(n,(i-r.time)/1e3),r.time=i,this.emit("change")},a.prototype._resetComposedOffsets=function(){for(var t=0;t<this._parameters.length;t++)this._composedOffsets[this._parameters[t]]=0},a.prototype.offsets=function(){var t,e=!1,n=this._now();this._resetComposedOffsets();for(var r=0;r<this._methods.length;r++)for(var i=this._methods[r].dynamics,o=0;o<this._parameters.length;o++){var s=i[t=this._parameters[o]],a=s.dynamics;null!=a.offset&&(this._composedOffsets[t]+=a.offset,a.offset=null);var h=(n-s.time)/1e3,u=a.offsetFromVelocity(h);u&&(this._composedOffsets[t]+=u);var c=a.velocityAfter(h);a.velocity=c,c&&(e=!0),s.time=n}return this._composeReturn.changing=e,this._composeReturn},a.prototype.destroy=function(){for(var t=this.list(),e=0;e<t.length;e++)this.remove(t[e]);s(this)},t.exports=a},"9MkR":function(t,e,n){"use strict";var r=n("l8c5"),i=n("77Rc");function o(t){var e=this;this._stage=t,this._running=!1,this._rendering=!1,this._requestHandle=null,this._boundLoop=this._loop.bind(this),this._renderInvalidHandler=function(){e._rendering||e.renderOnNextFrame()},this._stage.addEventListener("renderInvalid",this._renderInvalidHandler)}r(o),o.prototype.destroy=function(){this.stop(),this._stage.removeEventListener("renderInvalid",this._renderInvalidHandler),i(this)},o.prototype.stage=function(){return this._stage},o.prototype.start=function(){this._running=!0,this.renderOnNextFrame()},o.prototype.stop=function(){this._requestHandle&&(window.cancelAnimationFrame(this._requestHandle),this._requestHandle=null),this._running=!1},o.prototype.renderOnNextFrame=function(){this._running&&!this._requestHandle&&(this._requestHandle=window.requestAnimationFrame(this._boundLoop))},o.prototype._loop=function(){if(!this._running)throw new Error("Render loop running while in stopped state");this._requestHandle=null,this._rendering=!0,this.emit("beforeRender"),this._rendering=!1,this._stage.render(),this.emit("afterRender")},t.exports=o},A7Kq:function(t,e,n){"use strict";var r=n("l8c5"),i=n("IOcx").mat4,o=n("IOcx").vec4,s=n("wIDX"),a=n("8674"),h=n("ItFr"),u=n("43FX"),c=n("CSCW"),l=n("G7g9"),f=n("T2LU"),p=n("77Rc"),d=Math.PI/4;function v(t,e){this._yaw=t&&null!=t.yaw?t.yaw:0,this._pitch=t&&null!=t.pitch?t.pitch:0,this._roll=t&&null!=t.roll?t.roll:0,this._fov=t&&null!=t.fov?t.fov:d,this._width=t&&null!=t.width?t.width:0,this._height=t&&null!=t.height?t.height:0,this._projectionCenterX=t&&null!=t.projectionCenterX?t.projectionCenterX:0,this._projectionCenterY=t&&null!=t.projectionCenterY?t.projectionCenterY:0,this._limiter=e||null,this._projMatrix=i.create(),this._invProjMatrix=i.create(),this._frustum=[o.create(),o.create(),o.create(),o.create(),o.create()],this._projectionChanged=!0,this._params={},this._fovs={},this._tmpVec=o.create(),this._update()}r(v),v.prototype.destroy=function(){p(this)},v.prototype.yaw=function(){return this._yaw},v.prototype.pitch=function(){return this._pitch},v.prototype.roll=function(){return this._roll},v.prototype.projectionCenterX=function(){return this._projectionCenterX},v.prototype.projectionCenterY=function(){return this._projectionCenterY},v.prototype.fov=function(){return this._fov},v.prototype.width=function(){return this._width},v.prototype.height=function(){return this._height},v.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},v.prototype.parameters=function(t){return(t=t||{}).yaw=this._yaw,t.pitch=this._pitch,t.roll=this._roll,t.fov=this._fov,t},v.prototype.limiter=function(){return this._limiter},v.prototype.setYaw=function(t){this._resetParams(),this._params.yaw=t,this._update(this._params)},v.prototype.setPitch=function(t){this._resetParams(),this._params.pitch=t,this._update(this._params)},v.prototype.setRoll=function(t){this._resetParams(),this._params.roll=t,this._update(this._params)},v.prototype.setFov=function(t){this._resetParams(),this._params.fov=t,this._update(this._params)},v.prototype.setProjectionCenterX=function(t){this._resetParams(),this._params.projectionCenterX=t,this._update(this._params)},v.prototype.setProjectionCenterY=function(t){this._resetParams(),this._params.projectionCenterY=t,this._update(this._params)},v.prototype.offsetYaw=function(t){this.setYaw(this._yaw+t)},v.prototype.offsetPitch=function(t){this.setPitch(this._pitch+t)},v.prototype.offsetRoll=function(t){this.setRoll(this._roll+t)},v.prototype.offsetFov=function(t){this.setFov(this._fov+t)},v.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},v.prototype.setParameters=function(t){this._resetParams(),this._params.yaw=t.yaw,this._params.pitch=t.pitch,this._params.roll=t.roll,this._params.fov=t.fov,this._params.projectionCenterX=t.projectionCenterX,this._params.projectionCenterY=t.projectionCenterY,this._update(this._params)},v.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},v.prototype._resetParams=function(){var t=this._params;t.yaw=null,t.pitch=null,t.roll=null,t.fov=null,t.width=null,t.height=null},v.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._yaw,n=this._pitch,r=this._roll,i=this._fov,o=this._projectionCenterX,s=this._projectionCenterY,a=this._width,h=this._height;if(t.yaw=null!=t.yaw?t.yaw:e,t.pitch=null!=t.pitch?t.pitch:n,t.roll=null!=t.roll?t.roll:r,t.fov=null!=t.fov?t.fov:i,t.width=null!=t.width?t.width:a,t.height=null!=t.height?t.height:h,t.projectionCenterX=null!=t.projectionCenterX?t.projectionCenterX:o,t.projectionCenterY=null!=t.projectionCenterY?t.projectionCenterY:s,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var c=(t=this._normalize(t)).yaw,l=t.pitch,f=t.roll,p=t.fov,d=t.width,v=t.height,m=t.projectionCenterX,_=t.projectionCenterY;if(!(u(c)&&u(l)&&u(f)&&u(p)&&u(d)&&u(v)&&u(m)&&u(_)))throw new Error("Bad view - suspect a broken limiter");this._yaw=c,this._pitch=l,this._roll=f,this._fov=p,this._width=d,this._height=v,this._projectionCenterX=m,this._projectionCenterY=_,c===e&&l===n&&f===r&&p===i&&d===a&&v===h&&m===o&&_===s||(this._projectionChanged=!0,this.emit("change")),d===a&&v===h||this.emit("resize")},v.prototype._normalize=function(t){this._normalizeCoordinates(t);var e=a.htov(Math.PI,t.width,t.height),n=isNaN(e)?Math.PI:Math.min(Math.PI,e);return t.fov=c(t.fov,1e-6,n-1e-6),t},v.prototype._normalizeCoordinates=function(t){return"yaw"in t&&(t.yaw=h(t.yaw-Math.PI,-2*Math.PI)+Math.PI),"pitch"in t&&(t.pitch=h(t.pitch-Math.PI,-2*Math.PI)+Math.PI),"roll"in t&&(t.roll=h(t.roll-Math.PI,-2*Math.PI)+Math.PI),t},v.prototype.normalizeToClosest=function(t,e){var n=this._yaw,r=this._pitch,i=t.yaw,o=t.pitch,s=i-2*Math.PI,a=i+2*Math.PI;Math.abs(s-n)<Math.abs(i-n)?i=s:Math.abs(a-n)<Math.abs(i-n)&&(i=a);var h=o-2*Math.PI,u=o+2*Math.PI;return Math.abs(h-r)<Math.abs(o-r)?o=h:Math.abs(h-r)<Math.abs(o-r)&&(o=u),(e=e||{}).yaw=i,e.pitch=o,e},v.prototype.updateWithControlParameters=function(t){var e=this._fov,n=a.vtoh(e,this._width,this._height);isNaN(n)&&(n=e),this.offsetYaw(t.axisScaledX*n+2*t.x*n+t.yaw),this.offsetPitch(t.axisScaledY*e+2*t.y*n+t.pitch),this.offsetRoll(-t.roll),this.offsetFov(t.zoom*e)},v.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,n=this._frustum;if(this._projectionChanged){var r=this._width,o=this._height,s=this._fov,h=a.vtoh(s,r,o),u=r/o,c=this._projectionCenterX,l=this._projectionCenterY;if(0!==c||0!==l){var f=Math.atan(2*c*Math.tan(h/2)),p=Math.atan(2*l*Math.tan(s/2)),d=this._fovs;d.leftDegrees=180*(h/2+f)/Math.PI,d.rightDegrees=180*(h/2-f)/Math.PI,d.upDegrees=180*(s/2+p)/Math.PI,d.downDegrees=180*(s/2-p)/Math.PI,i.perspectiveFromFieldOfView(t,d,-1,1)}else i.perspective(t,s,u,-1,1);i.rotateZ(t,t,this._roll),i.rotateX(t,t,this._pitch),i.rotateY(t,t,this._yaw),i.invert(e,t),this._matrixToFrustum(t,n),this._projectionChanged=!1}},v.prototype._matrixToFrustum=function(t,e){o.set(e[0],t[3]+t[0],t[7]+t[4],t[11]+t[8],0),o.set(e[1],t[3]-t[0],t[7]-t[4],t[11]-t[8],0),o.set(e[2],t[3]+t[1],t[7]+t[5],t[11]+t[9],0),o.set(e[3],t[3]-t[1],t[7]-t[5],t[11]-t[9],0),o.set(e[4],t[3]+t[2],t[7]+t[6],t[11]+t[10],0)},v.prototype.projection=function(){return this._updateProjection(),this._projMatrix},v.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},v.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,n=this._tmpVec,r=0;r<e.length;r++){for(var i=e[r],s=!1,a=0;a<t.length;a++){var h=t[a];o.set(n,h[0],h[1],h[2],0),o.dot(i,n)>=0&&(s=!0)}if(!s)return!1}return!0},v.prototype.selectLevel=function(t){for(var e=s()*this._height,n=Math.tan(.5*this._fov),r=0;r<t.length;r++){var i=t[r];if(n*i.height()>=e)return i}return t[t.length-1]},v.prototype.coordinatesToScreen=function(t,e){var n=this._tmpVec;e||(e={});var r=this._width,i=this._height;if(r<=0||i<=0)return e.x=null,e.y=null,null;var s=t.yaw,a=t.pitch,h=Math.sin(s)*Math.cos(a),u=-Math.sin(a),c=-Math.cos(s)*Math.cos(a);return o.set(n,h,u,c,1),o.transformMat4(n,n,this.projection()),n[3]>=0?(e.x=r*(n[0]/n[3]+1)/2,e.y=i*(1-n[1]/n[3])/2,e):(e.x=null,e.y=null,null)},v.prototype.screenToCoordinates=function(t,e){var n=this._tmpVec;e||(e={});var r=this._width,i=this._height,s=2*t.x/r-1,a=1-2*t.y/i;o.set(n,s,a,1,1),o.transformMat4(n,n,this.inverseProjection());var h=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);return e.yaw=Math.atan2(n[0],-n[2]),e.pitch=Math.acos(n[1]/h)-Math.PI/2,this._normalizeCoordinates(e),e},v.prototype.coordinatesToPerspectiveTransform=function(t,e,n){n=n||"";var r=this._height,i=this._width,o=this._fov,s=.5*r/Math.tan(o/2),a="";return a+="translateX("+l(i/2)+"px) ",a+="translateY("+l(r/2)+"px) ",a+="translateX(-50%) translateY(-50%) ",a+="perspective("+l(s)+"px) ",a+="translateZ("+l(s)+"px) ",a+="rotateZ("+l(-this._roll)+"rad) ",a+="rotateX("+l(-this._pitch)+"rad) ",a+="rotateY("+l(this._yaw)+"rad) ",a+="rotateY("+l(-t.yaw)+"rad) ",a+="rotateX("+l(t.pitch)+"rad) ",a+="translateZ("+l(-e)+"px) ",a+=n+" "},v.limit={yaw:function(t,e){return function(n){return n.yaw=c(n.yaw,t,e),n}},pitch:function(t,e){return function(n){return n.pitch=c(n.pitch,t,e),n}},roll:function(t,e){return function(n){return n.roll=c(n.roll,t,e),n}},hfov:function(t,e){return function(n){var r=n.width,i=n.height;if(r>0&&i>0){var o=a.htov(t,r,i),s=a.htov(e,r,i);n.fov=c(n.fov,o,s)}return n}},vfov:function(t,e){return function(n){return n.fov=c(n.fov,t,e),n}},resolution:function(t){return function(e){var n=e.height;if(n){var r=s()*n,i=2*Math.atan(r/t);e.fov=c(e.fov,i,1/0)}return e}},traditional:function(t,e,n){return n=null!=n?n:e,f(v.limit.resolution(t),v.limit.vfov(0,e),v.limit.hfov(0,n),v.limit.pitch(-Math.PI/2,Math.PI/2))}},v.type=v.prototype.type="rectilinear",t.exports=v},Aui5:function(t,e,n){"use strict";function r(t){for(var e=document.documentElement.style,n=["Moz","Webkit","Khtml","O","ms"],r=0;r<n.length;r++){var i=n[r]+(t[0].toUpperCase()+t.slice(1));if(i in e)return i}return t}function i(t){var e=r(t);return function(t,n){return t.style[e]=n}}var o=i("transform"),s=i("transformOrigin");t.exports={prefixProperty:r,getWithVendorPrefix:function(t){var e=r(t);return function(t){return t.style[e]}},setWithVendorPrefix:i,setTransform:o,setTransformOrigin:s,setNullTransform:function(t){o(t,"translateZ(0)")},setNullTransformOrigin:function(t){s(t,"0 0 0")},setAbsolute:function(t){t.style.position="absolute"},setPixelPosition:function(t,e,n){t.style.left=e+"px",t.style.top=n+"px"},setPixelSize:function(t,e,n){t.style.width=e+"px",t.style.height=n+"px"},setNullSize:function(t){t.style.width=t.style.height=0},setFullSize:function(t){t.style.width=t.style.height="100%"},setOverflowHidden:function(t){t.style.overflow="hidden"},setOverflowVisible:function(t){t.style.overflow="visible"},setNoPointerEvents:function(t){t.style.pointerEvents="none"}}},B9Yq:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},BfH8:function(t,e,n){"use strict";t.exports=function(t,e){setTimeout((function(){e&&e.length>0?t.apply(null,e):t()}),0)}},C8HN:function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("JZIl"),s=n("aGdX"),a=n("tuss").maxFriction,h=n("77Rc"),u={speed:8,friction:6,maxFrictionTime:.3};function c(t,e,n){this._element=t,this._opts=s(n||{},u),this._active=!1,this._hammer=o.get(t,e),this._dynamics={x:new i,y:new i},this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleRelease.bind(this)),this._hammer.on("pancancel",this._handleRelease.bind(this))}r(c),c.prototype.destroy=function(){this._hammer.release(),h(this)},c.prototype._handleStart=function(t){t.preventDefault(),this._active||(this._active=!0,this.emit("active"))},c.prototype._handleMove=function(t){t.preventDefault(),this._updateDynamics(t,!1)},c.prototype._handleRelease=function(t){t.preventDefault(),this._updateDynamics(t,!0),this._active&&(this._active=!1,this.emit("inactive"))};var l=[null,null];c.prototype._updateDynamics=function(t,e){var n=this._element.getBoundingClientRect(),r=n.right-n.left,i=n.bottom-n.top,o=Math.max(r,i),s=t.deltaX/o*this._opts.speed,h=t.deltaY/o*this._opts.speed;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=s,this._dynamics.y.velocity=h,e&&(a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,l),this._dynamics.x.friction=l[0],this._dynamics.y.friction=l[1]),this.emit("parameterDynamics","x",this._dynamics.x),this.emit("parameterDynamics","y",this._dynamics.y)},t.exports=c},CSCW:function(t,e,n){"use strict";t.exports=function(t,e,n){return Math.min(Math.max(t,e),n)}},DZQB:function(t,e,n){"use strict";var r=n("/zJR"),i=n("l8c5"),o=n("77Rc"),s={HTMLImageElement:["naturalWidth","naturalHeight"],HTMLCanvasElement:["width","height"],ImageBitmap:["width","height"]};function a(t){var e=!1;for(var n in s)if(r[n]&&t instanceof r[n]){e=!0,this._widthProp=s[n][0],this._heightProp=s[n][1];break}if(!e)throw new Error("Unsupported pixel source");this._element=t}i(a),a.prototype.destroy=function(){o(this)},a.prototype.element=function(){return this._element},a.prototype.width=function(){return this._element[this._widthProp]},a.prototype.height=function(){return this._element[this._heightProp]},a.prototype.timestamp=function(){return 0},a.prototype.isDynamic=function(){return!1},t.exports=a},Duax:function(t,e,n){"use strict";function r(t){this._asset=t}r.prototype.asset=function(){return this._asset},r.prototype.loadAsset=function(t,e,n){var r=this,i=setTimeout((function(){n(null,e,r._asset)}),0);return function(){clearTimeout(i),n.apply(null,arguments)}},t.exports=r},Eh9X:function(t,e,n){"use strict";t.exports=function(t){return 180*t/Math.PI}},G7g9:function(t,e,n){"use strict";t.exports=function(t){return t.toPrecision(15)}},GaDe:function(t,e,n){"use strict";t.exports=function(){}},GjHf:function(t,e,n){"use strict";t.exports=function(t,e){return t<e?-1:t>e?1:0}},GpiB:function(t,e,n){"use strict";var r=n("l8c5"),i=n("lI7A"),o=n("mfb3"),s=n("yblz"),a=n("hw3A"),h=n("77Rc"),u=n("quiO");function c(t,e){return t.cmp(e)}function l(t,e){return-t.cmp(e)}function f(t){this._progressive=!(!t||!t.progressive),this._layers=[],this._renderers=[],this._tilesToLoad=[],this._tilesToRender=[],this._tmpVisible=[],this._tmpChildren=[],this._width=0,this._height=0,this._tmpRect={},this._tmpSize={},this._createTextureWorkQueue=new i,this._emitRenderInvalid=this._emitRenderInvalid.bind(this),this._rendererRegistry=new u}r(f),f.prototype.destroy=function(){this.removeAllLayers(),h(this)},f.prototype.registerRenderer=function(t,e,n){return this._rendererRegistry.set(t,e,n)},f.prototype.domElement=function(){throw new Error("Stage implementation must override domElement")},f.prototype.width=function(){return this._width},f.prototype.height=function(){return this._height},f.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},f.prototype.setSize=function(t){this._width=t.width,this._height=t.height,this.setSizeForType(),this.emit("resize"),this._emitRenderInvalid()},f.prototype.setSizeForType=function(t){throw new Error("Stage implementation must override setSizeForType")},f.prototype.loadImage=function(){throw new Error("Stage implementation must override loadImage")},f.prototype._emitRenderInvalid=function(){this.emit("renderInvalid")},f.prototype.validateLayer=function(t){throw new Error("Stage implementation must override validateLayer")},f.prototype.listLayers=function(){return[].concat(this._layers)},f.prototype.hasLayer=function(t){return this._layers.indexOf(t)>=0},f.prototype.addLayer=function(t,e){if(this._layers.indexOf(t)>=0)throw new Error("Layer already in stage");if(null==e&&(e=this._layers.length),e<0||e>this._layers.length)throw new Error("Invalid layer position");this.validateLayer(t);var n=t.geometry().type,r=t.view().type,i=this._rendererRegistry.get(n,r);if(!i)throw new Error("No "+this.type+" renderer avaiable for "+n+" geometry and "+r+" view");var o=this.createRenderer(i);this._layers.splice(e,0,t),this._renderers.splice(e,0,o),t.addEventListener("viewChange",this._emitRenderInvalid),t.addEventListener("effectsChange",this._emitRenderInvalid),t.addEventListener("fixedLevelChange",this._emitRenderInvalid),t.addEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},f.prototype.moveLayer=function(t,e){var n=this._layers.indexOf(t);if(n<0)throw new Error("No such layer in stage");if(e<0||e>=this._layers.length)throw new Error("Invalid layer position");t=this._layers.splice(n,1)[0];var r=this._renderers.splice(n,1)[0];this._layers.splice(e,0,t),this._renderers.splice(e,0,r),this._emitRenderInvalid()},f.prototype.removeLayer=function(t){var e=this._layers.indexOf(t);if(e<0)throw new Error("No such layer in stage");var n=this._layers.splice(e,1)[0],r=this._renderers.splice(e,1)[0];this.destroyRenderer(r),n.removeEventListener("viewChange",this._emitRenderInvalid),n.removeEventListener("effectsChange",this._emitRenderInvalid),n.removeEventListener("fixedLevelChange",this._emitRenderInvalid),n.removeEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},f.prototype.removeAllLayers=function(){for(;this._layers.length>0;)this.removeLayer(this._layers[0])},f.prototype.startFrame=function(){throw new Error("Stage implementation must override startFrame")},f.prototype.endFrame=function(){throw new Error("Stage implementation must override endFrame")},f.prototype.render=function(){var t,e,n,r=this._tilesToLoad,i=this._tilesToRender,s=!0,a=this._width,h=this._height,u=this._tmpRect,c=this._tmpSize;if(!(a<=0||h<=0)){for(this.startFrame(),t=0;t<this._layers.length;t++)this._layers[t].textureStore().startFrame();for(t=0;t<this._layers.length;t++){var l,f,p=this._layers[t],d=p.effects(),v=p.view(),m=p.textureStore(),_=this._renderers[t],y=this._layers.length-t;if(o(a,h,d&&d.rect,u),!(u.width<=0||u.height<=0)){for(c.width=u.width*this._width,c.height=u.height*this._height,v.setSize(c),_.startLayer(p,u),n=this._collectTiles(p,m),e=0;e<r.length;e++)l=r[e],m.markTile(l);for(e=0;e<i.length;e++)l=i[e],f=m.texture(l),_.renderTile(l,f,p,y);p.emit("renderComplete",n),n||(s=!1),_.endLayer(p,u)}}for(t=0;t<this._layers.length;t++)this._layers[t].textureStore().endFrame();this.endFrame(),this.emit("renderComplete",s)}},f.prototype._collectTiles=function(t,e){var n=this._tilesToLoad,r=this._tilesToRender,i=this._tmpVisible;n.length=0,r.length=0,i.length=0,t.visibleTiles(i);for(var o=!0,s=0;s<i.length;s++){var a,h=i[s];this._collectTileToLoad(h),e.texture(h)?(a=!1,this._collectTileToRender(h)):(a=this._collectChildren(h,e),o=!1),this._collectParents(h,e,a)}return n.sort(c),r.sort(l),o},f.prototype._collectChildren=function(t,e){var n=this._tmpChildren,r=!0;do{if(n.length=0,!t.children(n))break;r=!1;for(var i=0;i<n.length;i++)t=n[i],e.texture(t)?(this._collectTileToLoad(t),this._collectTileToRender(t)):r=!0}while(r&&1===n.length);return r},f.prototype._collectParents=function(t,e,n){for(var r=this._progressive;(r||n)&&null!=(t=t.parent());){if(n)if(e.texture(t))this._collectTileToRender(t),n=!1;else if(!this._progressive)continue;this._collectTileToLoad(t)||(r=!1)}return n},f.prototype._collectTileToLoad=function(t){return this._collectTileIntoList(t,this._tilesToLoad)},f.prototype._collectTileToRender=function(t){return this._collectTileIntoList(t,this._tilesToRender)},f.prototype._collectTileIntoList=function(t,e){for(var n=!1,r=0;r<e.length;r++)if(t.equals(e[r])){n=!0;break}return n||e.push(t),!n},f.prototype.createTexture=function(t,e,n){var r=this;var i=a(s((function(){return new r.TextureClass(r,t,e)})));return this._createTextureWorkQueue.push(i,(function(r,i){n(r,t,e,i)}))},t.exports=f},IOcx:function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return i})),n.d(e,"mat2d",(function(){return o})),n.d(e,"mat3",(function(){return s})),n.d(e,"mat4",(function(){return a})),n.d(e,"quat",(function(){return c})),n.d(e,"quat2",(function(){return l})),n.d(e,"vec2",(function(){return f})),n.d(e,"vec3",(function(){return h})),n.d(e,"vec4",(function(){return u}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return p})),n.d(r,"ARRAY_TYPE",(function(){return d})),n.d(r,"RANDOM",(function(){return v})),n.d(r,"setMatrixArrayType",(function(){return m})),n.d(r,"toRadian",(function(){return y})),n.d(r,"equals",(function(){return g}));var i={};n.r(i),n.d(i,"create",(function(){return w})),n.d(i,"clone",(function(){return M})),n.d(i,"copy",(function(){return x})),n.d(i,"identity",(function(){return b})),n.d(i,"fromValues",(function(){return E})),n.d(i,"set",(function(){return T})),n.d(i,"transpose",(function(){return L})),n.d(i,"invert",(function(){return C})),n.d(i,"adjoint",(function(){return S})),n.d(i,"determinant",(function(){return A})),n.d(i,"multiply",(function(){return R})),n.d(i,"rotate",(function(){return P})),n.d(i,"scale",(function(){return I})),n.d(i,"fromRotation",(function(){return z})),n.d(i,"fromScaling",(function(){return H})),n.d(i,"str",(function(){return D})),n.d(i,"frob",(function(){return O})),n.d(i,"LDU",(function(){return k})),n.d(i,"add",(function(){return F})),n.d(i,"subtract",(function(){return q})),n.d(i,"exactEquals",(function(){return X})),n.d(i,"equals",(function(){return V})),n.d(i,"multiplyScalar",(function(){return B})),n.d(i,"multiplyScalarAndAdd",(function(){return N})),n.d(i,"mul",(function(){return j})),n.d(i,"sub",(function(){return Y}));var o={};n.r(o),n.d(o,"create",(function(){return W})),n.d(o,"clone",(function(){return G})),n.d(o,"copy",(function(){return U})),n.d(o,"identity",(function(){return K})),n.d(o,"fromValues",(function(){return Z})),n.d(o,"set",(function(){return Q})),n.d(o,"invert",(function(){return J})),n.d(o,"determinant",(function(){return $})),n.d(o,"multiply",(function(){return tt})),n.d(o,"rotate",(function(){return et})),n.d(o,"scale",(function(){return nt})),n.d(o,"translate",(function(){return rt})),n.d(o,"fromRotation",(function(){return it})),n.d(o,"fromScaling",(function(){return ot})),n.d(o,"fromTranslation",(function(){return st})),n.d(o,"str",(function(){return at})),n.d(o,"frob",(function(){return ht})),n.d(o,"add",(function(){return ut})),n.d(o,"subtract",(function(){return ct})),n.d(o,"multiplyScalar",(function(){return lt})),n.d(o,"multiplyScalarAndAdd",(function(){return ft})),n.d(o,"exactEquals",(function(){return pt})),n.d(o,"equals",(function(){return dt})),n.d(o,"mul",(function(){return vt})),n.d(o,"sub",(function(){return mt}));var s={};n.r(s),n.d(s,"create",(function(){return _t})),n.d(s,"fromMat4",(function(){return yt})),n.d(s,"clone",(function(){return gt})),n.d(s,"copy",(function(){return wt})),n.d(s,"fromValues",(function(){return Mt})),n.d(s,"set",(function(){return xt})),n.d(s,"identity",(function(){return bt})),n.d(s,"transpose",(function(){return Et})),n.d(s,"invert",(function(){return Tt})),n.d(s,"adjoint",(function(){return Lt})),n.d(s,"determinant",(function(){return Ct})),n.d(s,"multiply",(function(){return St})),n.d(s,"translate",(function(){return At})),n.d(s,"rotate",(function(){return Rt})),n.d(s,"scale",(function(){return Pt})),n.d(s,"fromTranslation",(function(){return It})),n.d(s,"fromRotation",(function(){return zt})),n.d(s,"fromScaling",(function(){return Ht})),n.d(s,"fromMat2d",(function(){return Dt})),n.d(s,"fromQuat",(function(){return Ot})),n.d(s,"normalFromMat4",(function(){return kt})),n.d(s,"projection",(function(){return Ft})),n.d(s,"str",(function(){return qt})),n.d(s,"frob",(function(){return Xt})),n.d(s,"add",(function(){return Vt})),n.d(s,"subtract",(function(){return Bt})),n.d(s,"multiplyScalar",(function(){return Nt})),n.d(s,"multiplyScalarAndAdd",(function(){return jt})),n.d(s,"exactEquals",(function(){return Yt})),n.d(s,"equals",(function(){return Wt})),n.d(s,"mul",(function(){return Gt})),n.d(s,"sub",(function(){return Ut}));var a={};n.r(a),n.d(a,"create",(function(){return Kt})),n.d(a,"clone",(function(){return Zt})),n.d(a,"copy",(function(){return Qt})),n.d(a,"fromValues",(function(){return Jt})),n.d(a,"set",(function(){return $t})),n.d(a,"identity",(function(){return te})),n.d(a,"transpose",(function(){return ee})),n.d(a,"invert",(function(){return ne})),n.d(a,"adjoint",(function(){return re})),n.d(a,"determinant",(function(){return ie})),n.d(a,"multiply",(function(){return oe})),n.d(a,"translate",(function(){return se})),n.d(a,"scale",(function(){return ae})),n.d(a,"rotate",(function(){return he})),n.d(a,"rotateX",(function(){return ue})),n.d(a,"rotateY",(function(){return ce})),n.d(a,"rotateZ",(function(){return le})),n.d(a,"fromTranslation",(function(){return fe})),n.d(a,"fromScaling",(function(){return pe})),n.d(a,"fromRotation",(function(){return de})),n.d(a,"fromXRotation",(function(){return ve})),n.d(a,"fromYRotation",(function(){return me})),n.d(a,"fromZRotation",(function(){return _e})),n.d(a,"fromRotationTranslation",(function(){return ye})),n.d(a,"fromQuat2",(function(){return ge})),n.d(a,"getTranslation",(function(){return we})),n.d(a,"getScaling",(function(){return Me})),n.d(a,"getRotation",(function(){return xe})),n.d(a,"fromRotationTranslationScale",(function(){return be})),n.d(a,"fromRotationTranslationScaleOrigin",(function(){return Ee})),n.d(a,"fromQuat",(function(){return Te})),n.d(a,"frustum",(function(){return Le})),n.d(a,"perspective",(function(){return Ce})),n.d(a,"perspectiveFromFieldOfView",(function(){return Se})),n.d(a,"ortho",(function(){return Ae})),n.d(a,"lookAt",(function(){return Re})),n.d(a,"targetTo",(function(){return Pe})),n.d(a,"str",(function(){return Ie})),n.d(a,"frob",(function(){return ze})),n.d(a,"add",(function(){return He})),n.d(a,"subtract",(function(){return De})),n.d(a,"multiplyScalar",(function(){return Oe})),n.d(a,"multiplyScalarAndAdd",(function(){return ke})),n.d(a,"exactEquals",(function(){return Fe})),n.d(a,"equals",(function(){return qe})),n.d(a,"mul",(function(){return Xe})),n.d(a,"sub",(function(){return Ve}));var h={};n.r(h),n.d(h,"create",(function(){return Be})),n.d(h,"clone",(function(){return Ne})),n.d(h,"length",(function(){return je})),n.d(h,"fromValues",(function(){return Ye})),n.d(h,"copy",(function(){return We})),n.d(h,"set",(function(){return Ge})),n.d(h,"add",(function(){return Ue})),n.d(h,"subtract",(function(){return Ke})),n.d(h,"multiply",(function(){return Ze})),n.d(h,"divide",(function(){return Qe})),n.d(h,"ceil",(function(){return Je})),n.d(h,"floor",(function(){return $e})),n.d(h,"min",(function(){return tn})),n.d(h,"max",(function(){return en})),n.d(h,"round",(function(){return nn})),n.d(h,"scale",(function(){return rn})),n.d(h,"scaleAndAdd",(function(){return on})),n.d(h,"distance",(function(){return sn})),n.d(h,"squaredDistance",(function(){return an})),n.d(h,"squaredLength",(function(){return hn})),n.d(h,"negate",(function(){return un})),n.d(h,"inverse",(function(){return cn})),n.d(h,"normalize",(function(){return ln})),n.d(h,"dot",(function(){return fn})),n.d(h,"cross",(function(){return pn})),n.d(h,"lerp",(function(){return dn})),n.d(h,"hermite",(function(){return vn})),n.d(h,"bezier",(function(){return mn})),n.d(h,"random",(function(){return _n})),n.d(h,"transformMat4",(function(){return yn})),n.d(h,"transformMat3",(function(){return gn})),n.d(h,"transformQuat",(function(){return wn})),n.d(h,"rotateX",(function(){return Mn})),n.d(h,"rotateY",(function(){return xn})),n.d(h,"rotateZ",(function(){return bn})),n.d(h,"angle",(function(){return En})),n.d(h,"zero",(function(){return Tn})),n.d(h,"str",(function(){return Ln})),n.d(h,"exactEquals",(function(){return Cn})),n.d(h,"equals",(function(){return Sn})),n.d(h,"sub",(function(){return Rn})),n.d(h,"mul",(function(){return Pn})),n.d(h,"div",(function(){return In})),n.d(h,"dist",(function(){return zn})),n.d(h,"sqrDist",(function(){return Hn})),n.d(h,"len",(function(){return Dn})),n.d(h,"sqrLen",(function(){return On})),n.d(h,"forEach",(function(){return kn}));var u={};n.r(u),n.d(u,"create",(function(){return Fn})),n.d(u,"clone",(function(){return qn})),n.d(u,"fromValues",(function(){return Xn})),n.d(u,"copy",(function(){return Vn})),n.d(u,"set",(function(){return Bn})),n.d(u,"add",(function(){return Nn})),n.d(u,"subtract",(function(){return jn})),n.d(u,"multiply",(function(){return Yn})),n.d(u,"divide",(function(){return Wn})),n.d(u,"ceil",(function(){return Gn})),n.d(u,"floor",(function(){return Un})),n.d(u,"min",(function(){return Kn})),n.d(u,"max",(function(){return Zn})),n.d(u,"round",(function(){return Qn})),n.d(u,"scale",(function(){return Jn})),n.d(u,"scaleAndAdd",(function(){return $n})),n.d(u,"distance",(function(){return tr})),n.d(u,"squaredDistance",(function(){return er})),n.d(u,"length",(function(){return nr})),n.d(u,"squaredLength",(function(){return rr})),n.d(u,"negate",(function(){return ir})),n.d(u,"inverse",(function(){return or})),n.d(u,"normalize",(function(){return sr})),n.d(u,"dot",(function(){return ar})),n.d(u,"cross",(function(){return hr})),n.d(u,"lerp",(function(){return ur})),n.d(u,"random",(function(){return cr})),n.d(u,"transformMat4",(function(){return lr})),n.d(u,"transformQuat",(function(){return fr})),n.d(u,"zero",(function(){return pr})),n.d(u,"str",(function(){return dr})),n.d(u,"exactEquals",(function(){return vr})),n.d(u,"equals",(function(){return mr})),n.d(u,"sub",(function(){return _r})),n.d(u,"mul",(function(){return yr})),n.d(u,"div",(function(){return gr})),n.d(u,"dist",(function(){return wr})),n.d(u,"sqrDist",(function(){return Mr})),n.d(u,"len",(function(){return xr})),n.d(u,"sqrLen",(function(){return br})),n.d(u,"forEach",(function(){return Er}));var c={};n.r(c),n.d(c,"create",(function(){return Tr})),n.d(c,"identity",(function(){return Lr})),n.d(c,"setAxisAngle",(function(){return Cr})),n.d(c,"getAxisAngle",(function(){return Sr})),n.d(c,"getAngle",(function(){return Ar})),n.d(c,"multiply",(function(){return Rr})),n.d(c,"rotateX",(function(){return Pr})),n.d(c,"rotateY",(function(){return Ir})),n.d(c,"rotateZ",(function(){return zr})),n.d(c,"calculateW",(function(){return Hr})),n.d(c,"exp",(function(){return Dr})),n.d(c,"ln",(function(){return Or})),n.d(c,"pow",(function(){return kr})),n.d(c,"slerp",(function(){return Fr})),n.d(c,"random",(function(){return qr})),n.d(c,"invert",(function(){return Xr})),n.d(c,"conjugate",(function(){return Vr})),n.d(c,"fromMat3",(function(){return Br})),n.d(c,"fromEuler",(function(){return Nr})),n.d(c,"str",(function(){return jr})),n.d(c,"clone",(function(){return Qr})),n.d(c,"fromValues",(function(){return Jr})),n.d(c,"copy",(function(){return $r})),n.d(c,"set",(function(){return ti})),n.d(c,"add",(function(){return ei})),n.d(c,"mul",(function(){return ni})),n.d(c,"scale",(function(){return ri})),n.d(c,"dot",(function(){return ii})),n.d(c,"lerp",(function(){return oi})),n.d(c,"length",(function(){return si})),n.d(c,"len",(function(){return ai})),n.d(c,"squaredLength",(function(){return hi})),n.d(c,"sqrLen",(function(){return ui})),n.d(c,"normalize",(function(){return ci})),n.d(c,"exactEquals",(function(){return li})),n.d(c,"equals",(function(){return fi})),n.d(c,"rotationTo",(function(){return pi})),n.d(c,"sqlerp",(function(){return di})),n.d(c,"setAxes",(function(){return vi}));var l={};n.r(l),n.d(l,"create",(function(){return mi})),n.d(l,"clone",(function(){return _i})),n.d(l,"fromValues",(function(){return yi})),n.d(l,"fromRotationTranslationValues",(function(){return gi})),n.d(l,"fromRotationTranslation",(function(){return wi})),n.d(l,"fromTranslation",(function(){return Mi})),n.d(l,"fromRotation",(function(){return xi})),n.d(l,"fromMat4",(function(){return bi})),n.d(l,"copy",(function(){return Ei})),n.d(l,"identity",(function(){return Ti})),n.d(l,"set",(function(){return Li})),n.d(l,"getReal",(function(){return Ci})),n.d(l,"getDual",(function(){return Si})),n.d(l,"setReal",(function(){return Ai})),n.d(l,"setDual",(function(){return Ri})),n.d(l,"getTranslation",(function(){return Pi})),n.d(l,"translate",(function(){return Ii})),n.d(l,"rotateX",(function(){return zi})),n.d(l,"rotateY",(function(){return Hi})),n.d(l,"rotateZ",(function(){return Di})),n.d(l,"rotateByQuatAppend",(function(){return Oi})),n.d(l,"rotateByQuatPrepend",(function(){return ki})),n.d(l,"rotateAroundAxis",(function(){return Fi})),n.d(l,"add",(function(){return qi})),n.d(l,"multiply",(function(){return Xi})),n.d(l,"mul",(function(){return Vi})),n.d(l,"scale",(function(){return Bi})),n.d(l,"dot",(function(){return Ni})),n.d(l,"lerp",(function(){return ji})),n.d(l,"invert",(function(){return Yi})),n.d(l,"conjugate",(function(){return Wi})),n.d(l,"length",(function(){return Gi})),n.d(l,"len",(function(){return Ui})),n.d(l,"squaredLength",(function(){return Ki})),n.d(l,"sqrLen",(function(){return Zi})),n.d(l,"normalize",(function(){return Qi})),n.d(l,"str",(function(){return Ji})),n.d(l,"exactEquals",(function(){return $i})),n.d(l,"equals",(function(){return to}));var f={};n.r(f),n.d(f,"create",(function(){return eo})),n.d(f,"clone",(function(){return no})),n.d(f,"fromValues",(function(){return ro})),n.d(f,"copy",(function(){return io})),n.d(f,"set",(function(){return oo})),n.d(f,"add",(function(){return so})),n.d(f,"subtract",(function(){return ao})),n.d(f,"multiply",(function(){return ho})),n.d(f,"divide",(function(){return uo})),n.d(f,"ceil",(function(){return co})),n.d(f,"floor",(function(){return lo})),n.d(f,"min",(function(){return fo})),n.d(f,"max",(function(){return po})),n.d(f,"round",(function(){return vo})),n.d(f,"scale",(function(){return mo})),n.d(f,"scaleAndAdd",(function(){return _o})),n.d(f,"distance",(function(){return yo})),n.d(f,"squaredDistance",(function(){return go})),n.d(f,"length",(function(){return wo})),n.d(f,"squaredLength",(function(){return Mo})),n.d(f,"negate",(function(){return xo})),n.d(f,"inverse",(function(){return bo})),n.d(f,"normalize",(function(){return Eo})),n.d(f,"dot",(function(){return To})),n.d(f,"cross",(function(){return Lo})),n.d(f,"lerp",(function(){return Co})),n.d(f,"random",(function(){return So})),n.d(f,"transformMat2",(function(){return Ao})),n.d(f,"transformMat2d",(function(){return Ro})),n.d(f,"transformMat3",(function(){return Po})),n.d(f,"transformMat4",(function(){return Io})),n.d(f,"rotate",(function(){return zo})),n.d(f,"angle",(function(){return Ho})),n.d(f,"zero",(function(){return Do})),n.d(f,"str",(function(){return Oo})),n.d(f,"exactEquals",(function(){return ko})),n.d(f,"equals",(function(){return Fo})),n.d(f,"len",(function(){return qo})),n.d(f,"sub",(function(){return Xo})),n.d(f,"mul",(function(){return Vo})),n.d(f,"div",(function(){return Bo})),n.d(f,"dist",(function(){return No})),n.d(f,"sqrDist",(function(){return jo})),n.d(f,"sqrLen",(function(){return Yo})),n.d(f,"forEach",(function(){return Wo}));var p=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,v=Math.random;function m(t){d=t}var _=Math.PI/180;function y(t){return t*_}function g(t,e){return Math.abs(t-e)<=p*Math.max(1,Math.abs(t),Math.abs(e))}function w(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function b(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function E(t,e,n,r){var i=new d(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function T(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function L(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function C(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-i*r;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t):null}function S(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function A(t){return t[0]*t[3]-t[2]*t[1]}function R(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],h=n[1],u=n[2],c=n[3];return t[0]=r*a+o*h,t[1]=i*a+s*h,t[2]=r*u+o*c,t[3]=i*u+s*c,t}function P(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),h=Math.cos(n);return t[0]=r*h+o*a,t[1]=i*h+s*a,t[2]=r*-a+o*h,t[3]=i*-a+s*h,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],h=n[1];return t[0]=r*a,t[1]=i*a,t[2]=o*h,t[3]=s*h,t}function z(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function H(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function D(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function O(t){return Math.hypot(t[0],t[1],t[2],t[3])}function k(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function F(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function q(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function X(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function V(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],h=e[2],u=e[3];return Math.abs(n-s)<=p*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-h)<=p*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-u)<=p*Math.max(1,Math.abs(o),Math.abs(u))}function B(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function N(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var j=R,Y=q;function W(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function G(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function U(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,e,n,r,i,o){var s=new d(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=o,s}function Q(t,e,n,r,i,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t}function J(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],h=n*o-r*i;return h?(h=1/h,t[0]=o*h,t[1]=-r*h,t[2]=-i*h,t[3]=n*h,t[4]=(i*a-o*s)*h,t[5]=(r*s-n*a)*h,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=n[0],c=n[1],l=n[2],f=n[3],p=n[4],d=n[5];return t[0]=r*u+o*c,t[1]=i*u+s*c,t[2]=r*l+o*f,t[3]=i*l+s*f,t[4]=r*p+o*d+a,t[5]=i*p+s*d+h,t}function et(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*u,t[1]=i*c+s*u,t[2]=r*-u+o*c,t[3]=i*-u+s*c,t[4]=a,t[5]=h,t}function nt(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=n[0],c=n[1];return t[0]=r*u,t[1]=i*u,t[2]=o*c,t[3]=s*c,t[4]=a,t[5]=h,t}function rt(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=r*u+o*c+a,t[5]=i*u+s*c+h,t}function it(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function st(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function at(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ht(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ut(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ct(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function lt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ft(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],h=e[0],u=e[1],c=e[2],l=e[3],f=e[4],d=e[5];return Math.abs(n-h)<=p*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-c)<=p*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-l)<=p*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-f)<=p*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-d)<=p*Math.max(1,Math.abs(a),Math.abs(d))}var vt=tt,mt=ct;function _t(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function wt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,n,r,i,o,s,a,h){var u=new d(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=s,u[7]=a,u[8]=h,u}function xt(t,e,n,r,i,o,s,a,h,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=h,t[8]=u,t}function bt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Et(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Tt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=c*s-a*u,f=-c*o+a*h,p=u*o-s*h,d=n*l+r*f+i*p;return d?(d=1/d,t[0]=l*d,t[1]=(-c*r+i*u)*d,t[2]=(a*r-i*s)*d,t[3]=f*d,t[4]=(c*n-i*h)*d,t[5]=(-a*n+i*o)*d,t[6]=p*d,t[7]=(-u*n+r*h)*d,t[8]=(s*n-r*o)*d,t):null}function Lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8];return t[0]=s*c-a*u,t[1]=i*u-r*c,t[2]=r*a-i*s,t[3]=a*h-o*c,t[4]=n*c-i*h,t[5]=i*o-n*a,t[6]=o*u-s*h,t[7]=r*h-n*u,t[8]=n*s-r*o,t}function Ct(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8];return e*(u*o-s*h)+n*(-u*i+s*a)+r*(h*i-o*a)}function St(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=n[0],p=n[1],d=n[2],v=n[3],m=n[4],_=n[5],y=n[6],g=n[7],w=n[8];return t[0]=f*r+p*s+d*u,t[1]=f*i+p*a+d*c,t[2]=f*o+p*h+d*l,t[3]=v*r+m*s+_*u,t[4]=v*i+m*a+_*c,t[5]=v*o+m*h+_*l,t[6]=y*r+g*s+w*u,t[7]=y*i+g*a+w*c,t[8]=y*o+g*h+w*l,t}function At(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=h,t[6]=f*r+p*s+u,t[7]=f*i+p*a+c,t[8]=f*o+p*h+l,t}function Rt(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=Math.sin(n),p=Math.cos(n);return t[0]=p*r+f*s,t[1]=p*i+f*a,t[2]=p*o+f*h,t[3]=p*s-f*r,t[4]=p*a-f*i,t[5]=p*h-f*o,t[6]=u,t[7]=c,t[8]=l,t}function Pt(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function It(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function zt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ht(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Dt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Ot(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,h=i+i,u=n*s,c=r*s,l=r*a,f=i*s,p=i*a,d=i*h,v=o*s,m=o*a,_=o*h;return t[0]=1-l-d,t[3]=c-_,t[6]=f+m,t[1]=c+_,t[4]=1-u-d,t[7]=p-v,t[2]=f-m,t[5]=p+v,t[8]=1-u-l,t}function kt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],v=e[13],m=e[14],_=e[15],y=n*a-r*s,g=n*h-i*s,w=n*u-o*s,M=r*h-i*a,x=r*u-o*a,b=i*u-o*h,E=c*v-l*d,T=c*m-f*d,L=c*_-p*d,C=l*m-f*v,S=l*_-p*v,A=f*_-p*m,R=y*A-g*S+w*C+M*L-x*T+b*E;return R?(R=1/R,t[0]=(a*A-h*S+u*C)*R,t[1]=(h*L-s*A-u*T)*R,t[2]=(s*S-a*L+u*E)*R,t[3]=(i*S-r*A-o*C)*R,t[4]=(n*A-i*L+o*T)*R,t[5]=(r*L-n*S-o*E)*R,t[6]=(v*b-m*x+_*M)*R,t[7]=(m*w-d*b-_*g)*R,t[8]=(d*x-v*w+_*y)*R,t):null}function Ft(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function qt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Xt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Vt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Bt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function jt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Yt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],h=t[6],u=t[7],c=t[8],l=e[0],f=e[1],d=e[2],v=e[3],m=e[4],_=e[5],y=e[6],g=e[7],w=e[8];return Math.abs(n-l)<=p*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=p*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-d)<=p*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-v)<=p*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-m)<=p*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-_)<=p*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(h-y)<=p*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(u-g)<=p*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-w)<=p*Math.max(1,Math.abs(c),Math.abs(w))}var Gt=St,Ut=Bt;function Kt(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,r,i,o,s,a,h,u,c,l,f,p,v,m){var _=new d(16);return _[0]=t,_[1]=e,_[2]=n,_[3]=r,_[4]=i,_[5]=o,_[6]=s,_[7]=a,_[8]=h,_[9]=u,_[10]=c,_[11]=l,_[12]=f,_[13]=p,_[14]=v,_[15]=m,_}function $t(t,e,n,r,i,o,s,a,h,u,c,l,f,p,d,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=h,t[8]=u,t[9]=c,t[10]=l,t[11]=f,t[12]=p,t[13]=d,t[14]=v,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],v=e[13],m=e[14],_=e[15],y=n*a-r*s,g=n*h-i*s,w=n*u-o*s,M=r*h-i*a,x=r*u-o*a,b=i*u-o*h,E=c*v-l*d,T=c*m-f*d,L=c*_-p*d,C=l*m-f*v,S=l*_-p*v,A=f*_-p*m,R=y*A-g*S+w*C+M*L-x*T+b*E;return R?(R=1/R,t[0]=(a*A-h*S+u*C)*R,t[1]=(i*S-r*A-o*C)*R,t[2]=(v*b-m*x+_*M)*R,t[3]=(f*x-l*b-p*M)*R,t[4]=(h*L-s*A-u*T)*R,t[5]=(n*A-i*L+o*T)*R,t[6]=(m*w-d*b-_*g)*R,t[7]=(c*b-f*w+p*g)*R,t[8]=(s*S-a*L+u*E)*R,t[9]=(r*L-n*S-o*E)*R,t[10]=(d*x-v*w+_*y)*R,t[11]=(l*w-c*x-p*y)*R,t[12]=(a*T-s*C-h*E)*R,t[13]=(n*C-r*T+i*E)*R,t[14]=(v*g-d*M-m*y)*R,t[15]=(c*M-l*g+f*y)*R,t):null}function re(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],v=e[13],m=e[14],_=e[15];return t[0]=a*(f*_-p*m)-l*(h*_-u*m)+v*(h*p-u*f),t[1]=-(r*(f*_-p*m)-l*(i*_-o*m)+v*(i*p-o*f)),t[2]=r*(h*_-u*m)-a*(i*_-o*m)+v*(i*u-o*h),t[3]=-(r*(h*p-u*f)-a*(i*p-o*f)+l*(i*u-o*h)),t[4]=-(s*(f*_-p*m)-c*(h*_-u*m)+d*(h*p-u*f)),t[5]=n*(f*_-p*m)-c*(i*_-o*m)+d*(i*p-o*f),t[6]=-(n*(h*_-u*m)-s*(i*_-o*m)+d*(i*u-o*h)),t[7]=n*(h*p-u*f)-s*(i*p-o*f)+c*(i*u-o*h),t[8]=s*(l*_-p*v)-c*(a*_-u*v)+d*(a*p-u*l),t[9]=-(n*(l*_-p*v)-c*(r*_-o*v)+d*(r*p-o*l)),t[10]=n*(a*_-u*v)-s*(r*_-o*v)+d*(r*u-o*a),t[11]=-(n*(a*p-u*l)-s*(r*p-o*l)+c*(r*u-o*a)),t[12]=-(s*(l*m-f*v)-c*(a*m-h*v)+d*(a*f-h*l)),t[13]=n*(l*m-f*v)-c*(r*m-i*v)+d*(r*f-i*l),t[14]=-(n*(a*m-h*v)-s*(r*m-i*v)+d*(r*h-i*a)),t[15]=n*(a*f-h*l)-s*(r*f-i*l)+c*(r*h-i*a),t}function ie(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],m=t[15];return(e*s-n*o)*(l*m-f*v)-(e*a-r*o)*(c*m-f*d)+(e*h-i*o)*(c*v-l*d)+(n*a-r*s)*(u*m-f*p)-(n*h-i*s)*(u*v-l*p)+(r*h-i*a)*(u*d-c*p)}function oe(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],d=e[11],v=e[12],m=e[13],_=e[14],y=e[15],g=n[0],w=n[1],M=n[2],x=n[3];return t[0]=g*r+w*a+M*l+x*v,t[1]=g*i+w*h+M*f+x*m,t[2]=g*o+w*u+M*p+x*_,t[3]=g*s+w*c+M*d+x*y,g=n[4],w=n[5],M=n[6],x=n[7],t[4]=g*r+w*a+M*l+x*v,t[5]=g*i+w*h+M*f+x*m,t[6]=g*o+w*u+M*p+x*_,t[7]=g*s+w*c+M*d+x*y,g=n[8],w=n[9],M=n[10],x=n[11],t[8]=g*r+w*a+M*l+x*v,t[9]=g*i+w*h+M*f+x*m,t[10]=g*o+w*u+M*p+x*_,t[11]=g*s+w*c+M*d+x*y,g=n[12],w=n[13],M=n[14],x=n[15],t[12]=g*r+w*a+M*l+x*v,t[13]=g*i+w*h+M*f+x*m,t[14]=g*o+w*u+M*p+x*_,t[15]=g*s+w*c+M*d+x*y,t}function se(t,e,n){var r,i,o,s,a,h,u,c,l,f,p,d,v=n[0],m=n[1],_=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*_+e[12],t[13]=e[1]*v+e[5]*m+e[9]*_+e[13],t[14]=e[2]*v+e[6]*m+e[10]*_+e[14],t[15]=e[3]*v+e[7]*m+e[11]*_+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=h,t[6]=u,t[7]=c,t[8]=l,t[9]=f,t[10]=p,t[11]=d,t[12]=r*v+a*m+l*_+e[12],t[13]=i*v+h*m+f*_+e[13],t[14]=o*v+u*m+p*_+e[14],t[15]=s*v+c*m+d*_+e[15]),t}function ae(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function he(t,e,n,r){var i,o,s,a,h,u,c,l,f,d,v,m,_,y,g,w,M,x,b,E,T,L,C,S,A=r[0],R=r[1],P=r[2],I=Math.hypot(A,R,P);return I<p?null:(A*=I=1/I,R*=I,P*=I,i=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],h=e[1],u=e[2],c=e[3],l=e[4],f=e[5],d=e[6],v=e[7],m=e[8],_=e[9],y=e[10],g=e[11],w=A*A*s+o,M=R*A*s+P*i,x=P*A*s-R*i,b=A*R*s-P*i,E=R*R*s+o,T=P*R*s+A*i,L=A*P*s+R*i,C=R*P*s-A*i,S=P*P*s+o,t[0]=a*w+l*M+m*x,t[1]=h*w+f*M+_*x,t[2]=u*w+d*M+y*x,t[3]=c*w+v*M+g*x,t[4]=a*b+l*E+m*T,t[5]=h*b+f*E+_*T,t[6]=u*b+d*E+y*T,t[7]=c*b+v*E+g*T,t[8]=a*L+l*C+m*S,t[9]=h*L+f*C+_*S,t[10]=u*L+d*C+y*S,t[11]=c*L+v*C+g*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ue(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],h=e[7],u=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=s*i+c*r,t[6]=a*i+l*r,t[7]=h*i+f*r,t[8]=u*i-o*r,t[9]=c*i-s*r,t[10]=l*i-a*r,t[11]=f*i-h*r,t}function ce(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],h=e[3],u=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=s*i-c*r,t[2]=a*i-l*r,t[3]=h*i-f*r,t[8]=o*r+u*i,t[9]=s*r+c*i,t[10]=a*r+l*i,t[11]=h*r+f*i,t}function le(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],h=e[3],u=e[4],c=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=s*i+c*r,t[2]=a*i+l*r,t[3]=h*i+f*r,t[4]=u*i-o*r,t[5]=c*i-s*r,t[6]=l*i-a*r,t[7]=f*i-h*r,t}function fe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,n){var r,i,o,s=n[0],a=n[1],h=n[2],u=Math.hypot(s,a,h);return u<p?null:(s*=u=1/u,a*=u,h*=u,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=s*s*o+i,t[1]=a*s*o+h*r,t[2]=h*s*o-a*r,t[3]=0,t[4]=s*a*o-h*r,t[5]=a*a*o+i,t[6]=h*a*o+s*r,t[7]=0,t[8]=s*h*o+a*r,t[9]=a*h*o-s*r,t[10]=h*h*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ve(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _e(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=r+r,h=i+i,u=o+o,c=r*a,l=r*h,f=r*u,p=i*h,d=i*u,v=o*u,m=s*a,_=s*h,y=s*u;return t[0]=1-(p+v),t[1]=l+y,t[2]=f-_,t[3]=0,t[4]=l-y,t[5]=1-(c+v),t[6]=d+m,t[7]=0,t[8]=f+_,t[9]=d-m,t[10]=1-(c+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ge(t,e){var n=new d(3),r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=r*r+i*i+o*o+s*s;return l>0?(n[0]=2*(a*s+c*r+h*o-u*i)/l,n[1]=2*(h*s+c*i+u*r-a*o)/l,n[2]=2*(u*s+c*o+a*i-h*r)/l):(n[0]=2*(a*s+c*r+h*o-u*i),n[1]=2*(h*s+c*i+u*r-a*o),n[2]=2*(u*s+c*o+a*i-h*r)),ye(t,e,n),t}function we(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],s=e[5],a=e[6],h=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(h,u,c),t}function xe(t,e){var n=new d(3);Me(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],s=e[0]*r,a=e[1]*i,h=e[2]*o,u=e[4]*r,c=e[5]*i,l=e[6]*o,f=e[8]*r,p=e[9]*i,v=e[10]*o,m=s+c+v,_=0;return m>0?(_=2*Math.sqrt(m+1),t[3]=.25*_,t[0]=(l-p)/_,t[1]=(f-h)/_,t[2]=(a-u)/_):s>c&&s>v?(_=2*Math.sqrt(1+s-c-v),t[3]=(l-p)/_,t[0]=.25*_,t[1]=(a+u)/_,t[2]=(f+h)/_):c>v?(_=2*Math.sqrt(1+c-s-v),t[3]=(f-h)/_,t[0]=(a+u)/_,t[1]=.25*_,t[2]=(l+p)/_):(_=2*Math.sqrt(1+v-s-c),t[3]=(a-u)/_,t[0]=(f+h)/_,t[1]=(l+p)/_,t[2]=.25*_),t}function be(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3],h=i+i,u=o+o,c=s+s,l=i*h,f=i*u,p=i*c,d=o*u,v=o*c,m=s*c,_=a*h,y=a*u,g=a*c,w=r[0],M=r[1],x=r[2];return t[0]=(1-(d+m))*w,t[1]=(f+g)*w,t[2]=(p-y)*w,t[3]=0,t[4]=(f-g)*M,t[5]=(1-(l+m))*M,t[6]=(v+_)*M,t[7]=0,t[8]=(p+y)*x,t[9]=(v-_)*x,t[10]=(1-(l+d))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ee(t,e,n,r,i){var o=e[0],s=e[1],a=e[2],h=e[3],u=o+o,c=s+s,l=a+a,f=o*u,p=o*c,d=o*l,v=s*c,m=s*l,_=a*l,y=h*u,g=h*c,w=h*l,M=r[0],x=r[1],b=r[2],E=i[0],T=i[1],L=i[2],C=(1-(v+_))*M,S=(p+w)*M,A=(d-g)*M,R=(p-w)*x,P=(1-(f+_))*x,I=(m+y)*x,z=(d+g)*b,H=(m-y)*b,D=(1-(f+v))*b;return t[0]=C,t[1]=S,t[2]=A,t[3]=0,t[4]=R,t[5]=P,t[6]=I,t[7]=0,t[8]=z,t[9]=H,t[10]=D,t[11]=0,t[12]=n[0]+E-(C*E+R*T+z*L),t[13]=n[1]+T-(S*E+P*T+H*L),t[14]=n[2]+L-(A*E+I*T+D*L),t[15]=1,t}function Te(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,h=i+i,u=n*s,c=r*s,l=r*a,f=i*s,p=i*a,d=i*h,v=o*s,m=o*a,_=o*h;return t[0]=1-l-d,t[1]=c+_,t[2]=f-m,t[3]=0,t[4]=c-_,t[5]=1-u-d,t[6]=p+v,t[7]=0,t[8]=f+m,t[9]=p-v,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Le(t,e,n,r,i,o,s){var a=1/(n-e),h=1/(i-r),u=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*h,t[10]=(s+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*u,t[15]=0,t}function Ce(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function Se(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),h=2/(s+a),u=2/(i+o);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-a)*h*.5,t[9]=(i-o)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ae(t,e,n,r,i,o,s){var a=1/(e-n),h=1/(r-i),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*h,t[14]=(s+o)*u,t[15]=1,t}function Re(t,e,n,r){var i,o,s,a,h,u,c,l,f,d,v=e[0],m=e[1],_=e[2],y=r[0],g=r[1],w=r[2],M=n[0],x=n[1],b=n[2];return Math.abs(v-M)<p&&Math.abs(m-x)<p&&Math.abs(_-b)<p?te(t):(c=v-M,l=m-x,f=_-b,i=g*(f*=d=1/Math.hypot(c,l,f))-w*(l*=d),o=w*(c*=d)-y*f,s=y*l-g*c,(d=Math.hypot(i,o,s))?(i*=d=1/d,o*=d,s*=d):(i=0,o=0,s=0),a=l*s-f*o,h=f*i-c*s,u=c*o-l*i,(d=Math.hypot(a,h,u))?(a*=d=1/d,h*=d,u*=d):(a=0,h=0,u=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=o,t[5]=h,t[6]=l,t[7]=0,t[8]=s,t[9]=u,t[10]=f,t[11]=0,t[12]=-(i*v+o*m+s*_),t[13]=-(a*v+h*m+u*_),t[14]=-(c*v+l*m+f*_),t[15]=1,t)}function Pe(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=r[0],h=r[1],u=r[2],c=i-n[0],l=o-n[1],f=s-n[2],p=c*c+l*l+f*f;p>0&&(c*=p=1/Math.sqrt(p),l*=p,f*=p);var d=h*f-u*l,v=u*c-a*f,m=a*l-h*c;return(p=d*d+v*v+m*m)>0&&(d*=p=1/Math.sqrt(p),v*=p,m*=p),t[0]=d,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-f*v,t[5]=f*d-c*m,t[6]=c*v-l*d,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t}function Ie(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ze(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function He(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function De(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Oe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function ke(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Fe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function qe(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],h=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],v=t[12],m=t[13],_=t[14],y=t[15],g=e[0],w=e[1],M=e[2],x=e[3],b=e[4],E=e[5],T=e[6],L=e[7],C=e[8],S=e[9],A=e[10],R=e[11],P=e[12],I=e[13],z=e[14],H=e[15];return Math.abs(n-g)<=p*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-w)<=p*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(i-M)<=p*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-x)<=p*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-b)<=p*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(a-E)<=p*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(h-T)<=p*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(u-L)<=p*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(c-C)<=p*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(l-S)<=p*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(f-A)<=p*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-R)<=p*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(v-P)<=p*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(m-I)<=p*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(_-z)<=p*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(y-H)<=p*Math.max(1,Math.abs(y),Math.abs(H))}var Xe=oe,Ve=De;function Be(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ne(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function je(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Ye(t,e,n){var r=new d(3);return r[0]=t,r[1]=e,r[2]=n,r}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ge(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ue(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ke(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ze(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Qe(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function on(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function sn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function an(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function hn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function un(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function cn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ln(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function fn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pn(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],h=n[2];return t[0]=i*h-o*a,t[1]=o*s-r*h,t[2]=r*a-i*s,t}function dn(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t}function vn(t,e,n,r,i,o){var s=o*o,a=s*(2*o-3)+1,h=s*(o-2)+o,u=s*(o-1),c=s*(3-2*o);return t[0]=e[0]*a+n[0]*h+r[0]*u+i[0]*c,t[1]=e[1]*a+n[1]*h+r[1]*u+i[1]*c,t[2]=e[2]*a+n[2]*h+r[2]*u+i[2]*c,t}function mn(t,e,n,r,i,o){var s=1-o,a=s*s,h=o*o,u=a*s,c=3*o*a,l=3*h*s,f=h*o;return t[0]=e[0]*u+n[0]*c+r[0]*l+i[0]*f,t[1]=e[1]*u+n[1]*c+r[1]*l+i[1]*f,t[2]=e[2]*u+n[2]*c+r[2]*l+i[2]*f,t}function _n(t,e){e=e||1;var n=2*v()*Math.PI,r=2*v()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function yn(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function gn(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function wn(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],h=e[1],u=e[2],c=i*u-o*h,l=o*a-r*u,f=r*h-i*a,p=i*f-o*l,d=o*c-r*f,v=r*l-i*c,m=2*s;return c*=m,l*=m,f*=m,p*=2,d*=2,v*=2,t[0]=a+c+p,t[1]=h+l+d,t[2]=u+f+v,t}function Mn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function xn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function bn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function En(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],h=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+s*s+a*a),u=h&&fn(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))}function Tn(t){return t[0]=0,t[1]=0,t[2]=0,t}function Ln(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Cn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Sn(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(n-o)<=p*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=p*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-a)<=p*Math.max(1,Math.abs(i),Math.abs(a))}var An,Rn=Ke,Pn=Ze,In=Qe,zn=sn,Hn=an,Dn=je,On=hn,kn=(An=Be(),function(t,e,n,r,i,o){var s,a;for(e||(e=3),n||(n=0),a=r?Math.min(r*e+n,t.length):t.length,s=n;s<a;s+=e)An[0]=t[s],An[1]=t[s+1],An[2]=t[s+2],i(An,An,o),t[s]=An[0],t[s+1]=An[1],t[s+2]=An[2];return t});function Fn(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function qn(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Xn(t,e,n,r){var i=new d(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Vn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Bn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Nn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function jn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Yn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Gn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Un(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Kn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Zn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Qn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Jn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $n(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function nr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function rr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ir(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function or(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function sr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s,t}function ar(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hr(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],s=n[0]*r[3]-n[3]*r[0],a=n[1]*r[2]-n[2]*r[1],h=n[1]*r[3]-n[3]*r[1],u=n[2]*r[3]-n[3]*r[2],c=e[0],l=e[1],f=e[2],p=e[3];return t[0]=l*u-f*h+p*a,t[1]=-c*u+f*s-p*o,t[2]=c*h-l*s+p*i,t[3]=-c*a+l*o-f*i,t}function ur(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t[3]=a+r*(n[3]-a),t}function cr(t,e){var n,r,i,o,s,a;e=e||1;do{s=(n=2*v()-1)*n+(r=2*v()-1)*r}while(s>=1);do{a=(i=2*v()-1)*i+(o=2*v()-1)*o}while(a>=1);var h=Math.sqrt((1-s)/a);return t[0]=e*n,t[1]=e*r,t[2]=e*i*h,t[3]=e*o*h,t}function lr(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}function fr(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],h=n[2],u=n[3],c=u*r+a*o-h*i,l=u*i+h*r-s*o,f=u*o+s*i-a*r,p=-s*r-a*i-h*o;return t[0]=c*u+p*-s+l*-h-f*-a,t[1]=l*u+p*-a+f*-s-c*-h,t[2]=f*u+p*-h+c*-a-l*-s,t[3]=e[3],t}function pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function dr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=e[0],a=e[1],h=e[2],u=e[3];return Math.abs(n-s)<=p*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-h)<=p*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-u)<=p*Math.max(1,Math.abs(o),Math.abs(u))}var _r=jn,yr=Yn,gr=Wn,wr=tr,Mr=er,xr=nr,br=rr,Er=function(){var t=Fn();return function(e,n,r,i,o,s){var a,h;for(n||(n=4),r||(r=0),h=i?Math.min(i*n+r,e.length):e.length,a=r;a<h;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function Tr(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Lr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Cr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Sr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>p?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ar(t,e){var n=ii(t,e);return Math.acos(2*n*n-1)}function Rr(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],h=n[1],u=n[2],c=n[3];return t[0]=r*c+s*a+i*u-o*h,t[1]=i*c+s*h+o*a-r*u,t[2]=o*c+s*u+r*h-i*a,t[3]=s*c-r*a-i*h-o*u,t}function Pr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),h=Math.cos(n);return t[0]=r*h+s*a,t[1]=i*h+o*a,t[2]=o*h-i*a,t[3]=s*h-r*a,t}function Ir(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),h=Math.cos(n);return t[0]=r*h-o*a,t[1]=i*h+s*a,t[2]=o*h+r*a,t[3]=s*h-i*a,t}function zr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),h=Math.cos(n);return t[0]=r*h+i*a,t[1]=i*h-r*a,t[2]=o*h+s*a,t[3]=s*h-o*a,t}function Hr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Dr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=Math.sqrt(n*n+r*r+i*i),a=Math.exp(o),h=s>0?a*Math.sin(s)/s:0;return t[0]=n*h,t[1]=r*h,t[2]=i*h,t[3]=a*Math.cos(s),t}function Or(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=Math.sqrt(n*n+r*r+i*i),a=s>0?Math.atan2(s,o)/s:0;return t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function kr(t,e,n){return Or(t,e),ri(t,t,n),Dr(t,t),t}function Fr(t,e,n,r){var i,o,s,a,h,u=e[0],c=e[1],l=e[2],f=e[3],d=n[0],v=n[1],m=n[2],_=n[3];return(o=u*d+c*v+l*m+f*_)<0&&(o=-o,d=-d,v=-v,m=-m,_=-_),1-o>p?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,h=Math.sin(r*i)/s):(a=1-r,h=r),t[0]=a*u+h*d,t[1]=a*c+h*v,t[2]=a*l+h*m,t[3]=a*f+h*_,t}function qr(t){var e=v(),n=v(),r=v(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function Xr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a,t}function Vr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Br(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*s+s]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+s]-e[3*s+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[s]=(e[3*s+i]+e[3*i+s])*n}return t}function Nr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),s=Math.cos(e),a=Math.sin(n),h=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return t[0]=o*h*c-s*a*u,t[1]=s*a*c+o*h*u,t[2]=s*h*u-o*a*c,t[3]=s*h*c+o*a*u,t}function jr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Yr,Wr,Gr,Ur,Kr,Zr,Qr=qn,Jr=Xn,$r=Vn,ti=Bn,ei=Nn,ni=Rr,ri=Jn,ii=ar,oi=ur,si=nr,ai=si,hi=rr,ui=hi,ci=sr,li=vr,fi=mr,pi=(Yr=Be(),Wr=Ye(1,0,0),Gr=Ye(0,1,0),function(t,e,n){var r=fn(e,n);return r<-.999999?(pn(Yr,Wr,e),Dn(Yr)<1e-6&&pn(Yr,Gr,e),ln(Yr,Yr),Cr(t,Yr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pn(Yr,e,n),t[0]=Yr[0],t[1]=Yr[1],t[2]=Yr[2],t[3]=1+r,ci(t,t))}),di=(Ur=Tr(),Kr=Tr(),function(t,e,n,r,i,o){return Fr(Ur,e,i,o),Fr(Kr,n,r,o),Fr(t,Ur,Kr,2*o*(1-o)),t}),vi=(Zr=_t(),function(t,e,n,r){return Zr[0]=n[0],Zr[3]=n[1],Zr[6]=n[2],Zr[1]=r[0],Zr[4]=r[1],Zr[7]=r[2],Zr[2]=-e[0],Zr[5]=-e[1],Zr[8]=-e[2],ci(t,Br(t,Zr))});function mi(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function _i(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function yi(t,e,n,r,i,o,s,a){var h=new d(8);return h[0]=t,h[1]=e,h[2]=n,h[3]=r,h[4]=i,h[5]=o,h[6]=s,h[7]=a,h}function gi(t,e,n,r,i,o,s){var a=new d(8);a[0]=t,a[1]=e,a[2]=n,a[3]=r;var h=.5*i,u=.5*o,c=.5*s;return a[4]=h*r+u*n-c*e,a[5]=u*r+c*t-h*n,a[6]=c*r+h*e-u*t,a[7]=-h*t-u*e-c*n,a}function wi(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],s=e[0],a=e[1],h=e[2],u=e[3];return t[0]=s,t[1]=a,t[2]=h,t[3]=u,t[4]=r*u+i*h-o*a,t[5]=i*u+o*s-r*h,t[6]=o*u+r*a-i*s,t[7]=-r*s-i*a-o*h,t}function Mi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function xi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function bi(t,e){var n=Tr();xe(n,e);var r=new d(3);return we(r,e),wi(t,n,r),t}function Ei(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Ti(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Li(t,e,n,r,i,o,s,a,h){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=h,t}var Ci=$r;function Si(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ai=$r;function Ri(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Pi(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],s=-e[0],a=-e[1],h=-e[2],u=e[3];return t[0]=2*(n*u+o*s+r*h-i*a),t[1]=2*(r*u+o*a+i*s-n*h),t[2]=2*(i*u+o*h+n*a-r*s),t}function Ii(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=.5*n[0],h=.5*n[1],u=.5*n[2],c=e[4],l=e[5],f=e[6],p=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=s*a+i*u-o*h+c,t[5]=s*h+o*a-r*u+l,t[6]=s*u+r*h-i*a+f,t[7]=-r*a-i*h-o*u+p,t}function zi(t,e,n){var r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*s+c*r+h*o-u*i,f=h*s+c*i+u*r-a*o,p=u*s+c*o+a*i-h*r,d=c*s-a*r-h*i-u*o;return Pr(t,e,n),r=t[0],i=t[1],o=t[2],s=t[3],t[4]=l*s+d*r+f*o-p*i,t[5]=f*s+d*i+p*r-l*o,t[6]=p*s+d*o+l*i-f*r,t[7]=d*s-l*r-f*i-p*o,t}function Hi(t,e,n){var r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*s+c*r+h*o-u*i,f=h*s+c*i+u*r-a*o,p=u*s+c*o+a*i-h*r,d=c*s-a*r-h*i-u*o;return Ir(t,e,n),r=t[0],i=t[1],o=t[2],s=t[3],t[4]=l*s+d*r+f*o-p*i,t[5]=f*s+d*i+p*r-l*o,t[6]=p*s+d*o+l*i-f*r,t[7]=d*s-l*r-f*i-p*o,t}function Di(t,e,n){var r=-e[0],i=-e[1],o=-e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*s+c*r+h*o-u*i,f=h*s+c*i+u*r-a*o,p=u*s+c*o+a*i-h*r,d=c*s-a*r-h*i-u*o;return zr(t,e,n),r=t[0],i=t[1],o=t[2],s=t[3],t[4]=l*s+d*r+f*o-p*i,t[5]=f*s+d*i+p*r-l*o,t[6]=p*s+d*o+l*i-f*r,t[7]=d*s-l*r-f*i-p*o,t}function Oi(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],h=e[1],u=e[2],c=e[3];return t[0]=a*s+c*r+h*o-u*i,t[1]=h*s+c*i+u*r-a*o,t[2]=u*s+c*o+a*i-h*r,t[3]=c*s-a*r-h*i-u*o,a=e[4],h=e[5],u=e[6],c=e[7],t[4]=a*s+c*r+h*o-u*i,t[5]=h*s+c*i+u*r-a*o,t[6]=u*s+c*o+a*i-h*r,t[7]=c*s-a*r-h*i-u*o,t}function ki(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],h=n[1],u=n[2],c=n[3];return t[0]=r*c+s*a+i*u-o*h,t[1]=i*c+s*h+o*a-r*u,t[2]=o*c+s*u+r*h-i*a,t[3]=s*c-r*a-i*h-o*u,a=n[4],h=n[5],u=n[6],c=n[7],t[4]=r*c+s*a+i*u-o*h,t[5]=i*c+s*h+o*a-r*u,t[6]=o*c+s*u+r*h-i*a,t[7]=s*c-r*a-i*h-o*u,t}function Fi(t,e,n,r){if(Math.abs(r)<p)return Ei(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),s=o*n[0]/i,a=o*n[1]/i,h=o*n[2]/i,u=Math.cos(r),c=e[0],l=e[1],f=e[2],d=e[3];t[0]=c*u+d*s+l*h-f*a,t[1]=l*u+d*a+f*s-c*h,t[2]=f*u+d*h+c*a-l*s,t[3]=d*u-c*s-l*a-f*h;var v=e[4],m=e[5],_=e[6],y=e[7];return t[4]=v*u+y*s+m*h-_*a,t[5]=m*u+y*a+_*s-v*h,t[6]=_*u+y*h+v*a-m*s,t[7]=y*u-v*s-m*a-_*h,t}function qi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function Xi(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[4],h=n[5],u=n[6],c=n[7],l=e[4],f=e[5],p=e[6],d=e[7],v=n[0],m=n[1],_=n[2],y=n[3];return t[0]=r*y+s*v+i*_-o*m,t[1]=i*y+s*m+o*v-r*_,t[2]=o*y+s*_+r*m-i*v,t[3]=s*y-r*v-i*m-o*_,t[4]=r*c+s*a+i*u-o*h+l*y+d*v+f*_-p*m,t[5]=i*c+s*h+o*a-r*u+f*y+d*m+p*v-l*_,t[6]=o*c+s*u+r*h-i*a+p*y+d*_+l*m-f*v,t[7]=s*c-r*a-i*h-o*u+d*y-l*v-f*m-p*_,t}var Vi=Xi;function Bi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Ni=ii;function ji(t,e,n,r){var i=1-r;return Ni(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Yi(t,e){var n=Ki(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Wi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Gi=si,Ui=Gi,Ki=hi,Zi=Ki;function Qi(t,e){var n=Ki(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,s=e[3]/n,a=e[4],h=e[5],u=e[6],c=e[7],l=r*a+i*h+o*u+s*c;t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=(a-r*l)/n,t[5]=(h-i*l)/n,t[6]=(u-o*l)/n,t[7]=(c-s*l)/n}return t}function Ji(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function $i(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function to(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],h=t[6],u=t[7],c=e[0],l=e[1],f=e[2],d=e[3],v=e[4],m=e[5],_=e[6],y=e[7];return Math.abs(n-c)<=p*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=p*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-f)<=p*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=p*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-v)<=p*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-m)<=p*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(h-_)<=p*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(u-y)<=p*Math.max(1,Math.abs(u),Math.abs(y))}function eo(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function no(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function ro(t,e){var n=new d(2);return n[0]=t,n[1]=e,n}function io(t,e){return t[0]=e[0],t[1]=e[1],t}function oo(t,e,n){return t[0]=e,t[1]=n,t}function so(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ao(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ho(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function uo(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function co(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function lo(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function fo(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function po(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function vo(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function mo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function _o(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function yo(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function go(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function wo(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Mo(t){var e=t[0],n=t[1];return e*e+n*n}function xo(t,e){return t[0]=-e[0],t[1]=-e[1],t}function bo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Eo(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function To(t,e){return t[0]*e[0]+t[1]*e[1]}function Lo(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Co(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function So(t,e){e=e||1;var n=2*v()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Ao(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function Ro(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function Po(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Io(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function zo(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],s=Math.sin(r),a=Math.cos(r);return t[0]=i*a-o*s+n[0],t[1]=i*s+o*a+n[1],t}function Ho(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),a=s&&(n*i+r*o)/s;return Math.acos(Math.min(Math.max(a,-1),1))}function Do(t){return t[0]=0,t[1]=0,t}function Oo(t){return"vec2("+t[0]+", "+t[1]+")"}function ko(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=p*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=p*Math.max(1,Math.abs(r),Math.abs(o))}var qo=wo,Xo=ao,Vo=ho,Bo=uo,No=yo,jo=go,Yo=Mo,Wo=function(){var t=eo();return function(e,n,r,i,o,s){var a,h;for(n||(n=2),r||(r=0),h=i?Math.min(i*n+r,e.length):e.length,a=r;a<h;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}()},IrFz:function(t,e,n){"use strict";var r=n("ItFr");function i(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruMap: invalid capacity");this._capacity=t,this._keys=new Array(this._capacity),this._values=new Array(this._capacity),this._start=0,this._size=0}i.prototype._index=function(t){return r(this._start+t,this._capacity)},i.prototype.get=function(t){for(var e=0;e<this._size;e++){var n=this._keys[this._index(e)];if(t.equals(n))return this._values[this._index(e)]}return null},i.prototype.set=function(t,e){if(0===this._capacity)return t;this.del(t);var n=this._size===this._capacity?this._keys[this._index(0)]:null;return this._keys[this._index(this._size)]=t,this._values[this._index(this._size)]=e,this._size<this._capacity?this._size++:this._start=this._index(1),n},i.prototype.del=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)])){for(var n=this._values[this._index(e)],r=e;r<this._size-1;r++)this._keys[this._index(r)]=this._keys[this._index(r+1)],this._values[this._index(r)]=this._values[this._index(r+1)];return this._size--,n}return null},i.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)]))return!0;return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._start=0,this._size=0},i.prototype.forEach=function(t){for(var e=0,n=0;n<this._size;n++)t(this._keys[this._index(n)],this._values[this._index(n)]),e+=1;return e},t.exports=i},ItFr:function(t,e,n){"use strict";t.exports=function(t,e){return(+t%(e=+e)+e)%e}},J2ab:function(t,e,n){"use strict";t.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec2 vTextureCoord;","void main(void) {","  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},JZIl:function(t,e,n){"use strict";var r=n("yLV6"),i=1,o="MarzipanoHammerElementId";function s(t,e){return t[o]||(t[o]=i++),e+t[o]}function a(){this._managers={},this._refCount={}}function h(t,e,n,r){this._manager=e,this._element=n,this._type=r,this._hammerGestures=t,this._eventHandlers=[]}a.prototype.get=function(t,e,n){var r=s(t,e);return this._managers[r]||(this._managers[r]=this._createManager(t,e,n),this._refCount[r]=0),this._refCount[r]++,new h(this,this._managers[r],t,e)},a.prototype._createManager=function(t,e,n){var i=new r.Manager(t);return"mouse"===e?i.add(new r.Pan({direction:r.DIRECTION_ALL,threshold:0})):"touch"!==e&&"pen"!==e&&"kinect"!==e||(i.add(new r.Pan({direction:r.DIRECTION_ALL,threshold:20,pointers:1})),"multipinch"==n?i.add(new r.Pinch({event:"multipinch",pointers:0,threshold:0})):i.add(new r.Pinch)),i},a.prototype._releaseHandle=function(t,e){var n=s(t,e);this._refCount[n]&&(this._refCount[n]--,this._refCount[n]||(this._managers[n].destroy(),delete this._managers[n],delete this._refCount[n]))},h.prototype.on=function(t,e){var n=this._type,r=function(t){n===t.pointerType&&e(t)};this._eventHandlers.push({events:t,handler:r}),this._manager.on(t,r)},h.prototype.release=function(){for(var t=0;t<this._eventHandlers.length;t++){var e=this._eventHandlers[t];this._manager.off(e.events,e.handler)}this._hammerGestures._releaseHandle(this._element,this._type),this._manager=null,this._element=null,this._type=null,this._hammerGestures=null},h.prototype.manager=function(){return this._manager},t.exports=new a},Jekc:function(t,e,n){"use strict";var r=n("ItFr");function i(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Map: invalid capacity");this._capacity=t||64,this._keyBuckets=[],this._valBuckets=[];for(var e=0;e<this._capacity;e++)this._keyBuckets.push([]),this._valBuckets.push([]);this._size=0}i.prototype.get=function(t){for(var e=r(t.hash(),this._capacity),n=this._keyBuckets[e],i=0;i<n.length;i++){var o=n[i];if(t.equals(o))return this._valBuckets[e][i]}return null},i.prototype.set=function(t,e){for(var n=r(t.hash(),this._capacity),i=this._keyBuckets[n],o=this._valBuckets[n],s=0;s<i.length;s++){var a=i[s];if(t.equals(a)){var h=o[s];return i[s]=t,o[s]=e,h}}return i.push(t),o.push(e),this._size++,null},i.prototype.del=function(t){for(var e=r(t.hash(),this._capacity),n=this._keyBuckets[e],i=this._valBuckets[e],o=0;o<n.length;o++){var s=n[o];if(t.equals(s)){for(var a=i[o],h=o;h<n.length-1;h++)n[h]=n[h+1],i[h]=i[h+1];return n.length=n.length-1,i.length=i.length-1,this._size--,a}}return null},i.prototype.has=function(t){for(var e=r(t.hash(),this._capacity),n=this._keyBuckets[e],i=0;i<n.length;i++){var o=n[i];if(t.equals(o))return!0}return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._keyBuckets[t].length=0,this._valBuckets[t].length=0;this._size=0},i.prototype.forEach=function(t){for(var e=0,n=0;n<this._capacity;n++)for(var r=this._keyBuckets[n],i=this._valBuckets[n],o=0;o<r.length;o++)t(r[o],i[o]),e+=1;return e},t.exports=i},KZ2n:function(t,e,n){"use strict";var r=n("R8wE"),i=n("hwQt"),o=n("GjHf"),s=n("fpI6"),a=n("p2RX"),h=n("w5Vv");function u(t,e){this.z=t,this._geometry=e,this._level=e.levelList[t]}function c(t){this.constructor.super_.call(this,t),this._width=t.width}function l(t){if("array"!==h(t))throw new Error("Level list must be an array");this.levelList=s.makeLevelList(t,c),this.selectableLevelList=s.makeSelectableLevelList(this.levelList)}u.prototype.rotX=function(){return 0},u.prototype.rotY=function(){return 0},u.prototype.centerX=function(){return.5},u.prototype.centerY=function(){return.5},u.prototype.scaleX=function(){return 1},u.prototype.scaleY=function(){return 1},u.prototype.parent=function(){return 0===this.z?null:new u(this.z-1,this._geometry)},u.prototype.children=function(t){return this.z===this._geometry.levelList.length-1?null:((t=t||[]).push(new u(this.z+1,this._geometry)),t)},u.prototype.neighbors=function(){return[]},u.prototype.hash=function(){return i(this.z)},u.prototype.equals=function(t){return this._geometry===t._geometry&&this.z===t.z},u.prototype.cmp=function(t){return o(this.z,t.z)},u.prototype.str=function(){return"EquirectTile("+tile.z+")"},r(c,a),c.prototype.width=function(){return this._width},c.prototype.height=function(){return this._width/2},c.prototype.tileWidth=function(){return this._width},c.prototype.tileHeight=function(){return this._width/2},l.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var n=this.levelList[e];t=Math.max(t,n.tileWidth,n.tileHeight)}return t},l.prototype.levelTiles=function(t,e){var n=this.levelList.indexOf(t);return(e=e||[]).push(new u(n,this)),e},l.prototype.visibleTiles=function(t,e,n){var r=new u(this.levelList.indexOf(e),this);(n=n||[]).length=0,n.push(r)},l.Tile=l.prototype.Tile=u,l.type=l.prototype.type="equirect",u.type=u.prototype.type="equirect",t.exports=l},LAUC:function(t,e,n){"use strict";var r=n("Vq8G");t.exports=function(t,e,n){var i=!1,o=r();return e(0),requestAnimationFrame((function s(){if(!i){var a=(r()-o)/t;a<1?(e(a),requestAnimationFrame(s)):(e(1),n())}})),function(){i=!0,n.apply(null,arguments)}}},Lbfq:function(t,e,n){"use strict";var r=n("hKL4"),i=n("q5Ud"),o=n("cwWM"),s=n("l8c5"),a=n("Vq8G"),h=n("GaDe"),u=n("w5Vv"),c=n("aGdX"),l=n("77Rc");function f(t,e){this._viewer=t,this._view=e,this._layers=[],this._hotspotContainer=new o(t._controlContainer,t.stage(),this._view,t.renderLoop()),this._movement=null,this._movementStartTime=null,this._movementStep=null,this._movementParams=null,this._movementCallback=null,this._updateMovementHandler=this._updateMovement.bind(this),this._updateHotspotContainerHandler=this._updateHotspotContainer.bind(this),this._viewer.addEventListener("sceneChange",this._updateHotspotContainerHandler),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._view.addEventListener("change",this._viewChangeHandler),this._updateHotspotContainer()}s(f),f.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._viewer.removeEventListener("sceneChange",this._updateHotspotContainerHandler),this._movement&&this.stopMovement(),this._hotspotContainer.destroy(),this.destroyAllLayers(),l(this)},f.prototype.hotspotContainer=function(){return this._hotspotContainer},f.prototype.layer=function(){return this._layers[0]},f.prototype.listLayers=function(){return[].concat(this._layers)},f.prototype.view=function(){return this._view},f.prototype.viewer=function(){return this._viewer},f.prototype.visible=function(){return this._viewer.scene()===this},f.prototype.createLayer=function(t){var e=(t=t||{}).textureStoreOpts||{},n=t.layerOpts||{},o=t.source,s=t.geometry,a=this._view,h=this._viewer.stage(),u=new i(o,h,e),c=new r(o,s,a,u,n);return this._layers.push(c),t.pinFirstLevel&&c.pinFirstLevel(),this.emit("layerChange"),c},f.prototype.destroyLayer=function(t){var e=this._layers.indexOf(t);if(e<0)throw new Error("No such layer in scene");this._layers.splice(e,1),this.emit("layerChange"),t.textureStore().destroy(),t.destroy()},f.prototype.destroyAllLayers=function(){for(;this._layers.length>0;)this.destroyLayer(this._layers[0])},f.prototype.switchTo=function(t,e){return this._viewer.switchScene(this,t,e)},f.prototype.lookTo=function(t,e,n){var r=this;if(e=e||{},n=n||h,"object"!==u(t))throw new Error("Target view parameters must be an object");var i=null!=e.ease?e.ease:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},o=null!=e.controlsInterrupt&&e.controlsInterrupt,s=null!=e.transitionDuration?e.transitionDuration:1e3,a=null==e.shortest||e.shortest,l=this._view,f=l.parameters(),p={};c(p,t),c(p,f),a&&l.normalizeToClosest&&l.normalizeToClosest(p,p);var d=this._viewer.controls().enabled();o||this._viewer.controls().disable(),this.startMovement((function(){var t=!1;return function(e,n){if(n>=s&&t)return null;var r=Math.min(n/s,1);for(var o in e){var a=f[o],h=p[o];e[o]=a+i(r)*(h-a)}return t=n>=s,e}}),(function(){d&&r._viewer.controls().enable(),n()}))},f.prototype.startMovement=function(t,e){var n=this._viewer.renderLoop();this._movement&&this.stopMovement();var r=t();if("function"!=typeof r)throw new Error("Bad movement");this._movement=t,this._movementStep=r,this._movementStartTime=a(),this._movementParams={},this._movementCallback=e,n.addEventListener("beforeRender",this._updateMovementHandler),n.renderOnNextFrame()},f.prototype.stopMovement=function(){var t=this._movementCallback,e=this._viewer.renderLoop();this._movement&&(this._movement=null,this._movementStep=null,this._movementStartTime=null,this._movementParams=null,this._movementCallback=null,e.removeEventListener("beforeRender",this._updateMovementHandler),t&&t())},f.prototype.movement=function(){return this._movement},f.prototype._updateMovement=function(){if(!this._movement)throw new Error("Should not call update");var t=this._viewer.renderLoop(),e=this._view,n=a()-this._movementStartTime,r=this._movementStep,i=this._movementParams;null==(i=r(i=e.parameters(i),n))?this.stopMovement():(e.setParameters(i),t.renderOnNextFrame())},f.prototype._updateHotspotContainer=function(){this.visible()?this._hotspotContainer.show():this._hotspotContainer.hide()},t.exports=f},Mzh7:function(t,e,n){"use strict";var r=n("aGdX"),i=n("PQoV"),o=n("C8HN"),s=n("UnMT"),a=n("ONJT"),h=n("wkbN"),u={mouseViewMode:"drag",dragMode:"pan"};t.exports=function(t,e,n){n=r(n||{},u);var c={mouseViewDrag:new i(e,"mouse"),mouseViewQtvr:new o(e,"mouse"),leftArrowKey:new h(37,"x",-.7,3),rightArrowKey:new h(39,"x",.7,3),upArrowKey:new h(38,"y",-.7,3),downArrowKey:new h(40,"y",.7,3),plusKey:new h(107,"zoom",-.7,3),minusKey:new h(109,"zoom",.7,3),wKey:new h(87,"y",-.7,3),aKey:new h(65,"x",-.7,3),sKey:new h(83,"y",.7,3),dKey:new h(68,"x",.7,3),qKey:new h(81,"roll",.7,3),eKey:new h(69,"roll",-.7,3)},l=["scrollZoom","touchView","pinch","rotate"];!1!==n.scrollZoom&&(c.scrollZoom=new s(e));var f={arrowKeys:["leftArrowKey","rightArrowKey","upArrowKey","downArrowKey"],plusMinusKeys:["plusKey","minusKey"],wasdKeys:["wKey","aKey","sKey","dKey"],qeKeys:["qKey","eKey"]};switch(n.dragMode){case"multipinch":c.pinch=new i(e,"touch",{hammerEvent:"multipinch"}),c.touchView=new i(e,"touch");break;case"pinch":c.pinch=new i(e,"touch",{hammerEvent:"pinch"});break;case"pan":c.touchView=new i(e,"touch"),c.pinch=new a(e,"touch");break;default:throw new Error("Unknown drag mode: "+n.dragMode)}switch(n.mouseViewMode){case"drag":l.push("mouseViewDrag");break;case"qtvr":l.push("mouseViewQtvr");break;default:throw new Error("Unknown mouse view mode: "+n.mouseViewMode)}for(var p in c){var d=c[p];t.registerMethod(p,d),l.indexOf(p)>=0&&t.enableMethod(p)}for(var v in f){var m=f[v];t.addMethodGroup(v,m)}return c}},OH7d:function(t,e,n){"use strict";var r=n("l8c5"),i=n("5K+I"),o=n("mrMV"),s=n("S3fn"),a=n("ev33"),h=n("Vq8G"),u={x:"x",y:"y",z:"z",f:"face"};function c(t,e){e=e||{},this._loadPool=new o({concurrency:e.concurrency||4}),this._retryDelay=e.retryDelay||1e4,this._retryMap={},this._sourceFromTile=t}function l(t){return new RegExp("\\{("+t+")\\}","g")}r(c),c.prototype.loadAsset=function(t,e,n){var r,o=this,u=this._retryDelay,c=this._retryMap,l=this._sourceFromTile(e),f=l.url,p=l.rect,d=t.loadImage.bind(t,f,p),v=c[f];if(null!=v){var m=h()-v;m<u?r=u-m:(r=0,delete c[f])}var _=a.bind(null,r);return s(_,(function(t){return o._loadPool.push(d,(function(n,r){n?(n instanceof i&&(c[f]=h(),o.emit("networkError",n,e)),t(n,e)):(delete c[f],t(null,e,r))}))}))(n)},c.fromString=function(t,e){var n=(e=e||{})&&e.cubeMapPreviewFaceOrder||"bdflru";return new c(e.cubeMapPreviewUrl?function(t){return 0===t.z?function(t){var r=n.indexOf(t.face)/6;return{url:e.cubeMapPreviewUrl,rect:{x:0,y:r,width:1,height:1/6}}}(t):r(t)}:r,e);function r(e){var n=t;for(var r in u){var i=u[r],o=l(r),s=e.hasOwnProperty(i)?e[i]:"";n=n.replace(o,s)}return{url:n}}},t.exports=c},ONJT:function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("JZIl"),s=n("77Rc");function a(t,e,n){this._hammer=o.get(t,e),this._lastEvent=null,this._active=!1,this._dynamics=new i,this._hammer.on("pinchstart",this._handleStart.bind(this)),this._hammer.on("pinch",this._handleEvent.bind(this)),this._hammer.on("pinchend",this._handleEnd.bind(this)),this._hammer.on("pinchcancel",this._handleEnd.bind(this))}r(a),a.prototype.destroy=function(){this._hammer.release(),s(this)},a.prototype._handleStart=function(){this._active||(this._active=!0,this.emit("active"))},a.prototype._handleEnd=function(){this._lastEvent=null,this._active&&(this._active=!1,this.emit("inactive"))},a.prototype._handleEvent=function(t){var e=t.scale;this._lastEvent&&(e/=this._lastEvent.scale),this._dynamics.offset=-1*(e-1),this.emit("parameterDynamics","zoom",this._dynamics),this._lastEvent=t},t.exports=a},OTh6:function(t,e,n){"use strict";var r=n("l8c5"),i=n("IOcx").mat4,o=n("IOcx").vec4,s=n("wIDX"),a=n("43FX"),h=n("CSCW"),u=n("77Rc"),c=[1,0,1,0],l=[-1,-1,1,1];function f(t,e){if(!t||null==t.mediaAspectRatio)throw new Error("mediaAspectRatio must be defined");this._x=t&&null!=t.x?t.x:.5,this._y=t&&null!=t.y?t.y:.5,this._zoom=t&&null!=t.zoom?t.zoom:1,this._mediaAspectRatio=t.mediaAspectRatio,this._width=t&&null!=t.width?t.width:0,this._height=t&&null!=t.height?t.height:0,this._limiter=e||null,this._projMatrix=i.create(),this._invProjMatrix=i.create(),this._frustum=[0,0,0,0],this._projectionChanged=!0,this._params={},this._vec=o.create(),this._update()}r(f),f.prototype.destroy=function(){u(this)},f.prototype.x=function(){return this._x},f.prototype.y=function(){return this._y},f.prototype.zoom=function(){return this._zoom},f.prototype.mediaAspectRatio=function(){return this._mediaAspectRatio},f.prototype.width=function(){return this._width},f.prototype.height=function(){return this._height},f.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},f.prototype.parameters=function(t){return(t=t||{}).x=this._x,t.y=this._y,t.zoom=this._zoom,t.mediaAspectRatio=this._mediaAspectRatio,t},f.prototype.limiter=function(){return this._limiter},f.prototype.setX=function(t){this._resetParams(),this._params.x=t,this._update(this._params)},f.prototype.setY=function(t){this._resetParams(),this._params.y=t,this._update(this._params)},f.prototype.setZoom=function(t){this._resetParams(),this._params.zoom=t,this._update(this._params)},f.prototype.offsetX=function(t){this.setX(this._x+t)},f.prototype.offsetY=function(t){this.setY(this._y+t)},f.prototype.offsetZoom=function(t){this.setZoom(this._zoom+t)},f.prototype.setMediaAspectRatio=function(t){this._resetParams(),this._params.mediaAspectRatio=t,this._update(this._params)},f.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},f.prototype.setParameters=function(t){this._resetParams(),this._params.x=t.x,this._params.y=t.y,this._params.zoom=t.zoom,this._params.mediaAspectRatio=t.mediaAspectRatio,this._update(this._params)},f.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},f.prototype._resetParams=function(){var t=this._params;t.x=null,t.y=null,t.zoom=null,t.mediaAspectRatio=null,t.width=null,t.height=null},f.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._x,n=this._y,r=this._zoom,i=this._mediaAspectRatio,o=this._width,s=this._height;if(t.x=null!=t.x?t.x:e,t.y=null!=t.y?t.y:n,t.zoom=null!=t.zoom?t.zoom:r,t.mediaAspectRatio=null!=t.mediaAspectRatio?t.mediaAspectRatio:i,t.width=null!=t.width?t.width:o,t.height=null!=t.height?t.height:s,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var u=t.x,c=t.y,l=t.zoom,f=t.mediaAspectRatio,p=t.width,d=t.height;if(!(a(u)&&a(c)&&a(l)&&a(f)&&a(p)&&a(d)))throw new Error("Bad view - suspect a broken limiter");l=h(l,1e-6,1/0),this._x=u,this._y=c,this._zoom=l,this._mediaAspectRatio=f,this._width=p,this._height=d,u===e&&c===n&&l===r&&f===i&&p===o&&d===s||(this._projectionChanged=!0,this.emit("change")),p===o&&d===s||this.emit("resize")},f.prototype._zoomX=function(){return this._zoom},f.prototype._zoomY=function(){var t=this._mediaAspectRatio,e=this._width/this._height,n=this._zoom,r=n*t/e;return isNaN(r)&&(r=n),r},f.prototype.updateWithControlParameters=function(t){var e=this.zoom(),n=this._zoomX(),r=this._zoomY();this.offsetX(t.axisScaledX*n+t.x*e),this.offsetY(t.axisScaledY*r+t.y*e),this.offsetZoom(t.zoom*e)},f.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,n=this._frustum;if(this._projectionChanged){var r=this._x,o=this._y,s=this._zoomX(),a=this._zoomY(),h=n[0]=.5-o+.5*a,u=n[1]=r-.5+.5*s,c=n[2]=.5-o-.5*a,l=n[3]=r-.5-.5*s;i.ortho(t,l,u,c,h,-1,1),i.invert(e,t),this._projectionChanged=!1}},f.prototype.projection=function(){return this._updateProjection(),this._projMatrix},f.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},f.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,n=0;n<e.length;n++){for(var r=e[n],i=c[n],o=l[n],s=!1,a=0;a<t.length;a++){var h=t[a];if(o<0&&h[i]<r||o>0&&h[i]>r){s=!0;break}}if(!s)return!1}return!0},f.prototype.selectLevel=function(t){for(var e=s()*this.width(),n=this._zoom,r=0;r<t.length;r++){var i=t[r];if(n*i.width()>=e)return i}return t[t.length-1]},f.prototype.coordinatesToScreen=function(t,e){var n=this._vec;e||(e={});var r=this._width,i=this._height;if(r<=0||i<=0)return e.x=null,e.y=null,null;var s=t&&null!=t.x?t.x:.5,a=t&&null!=t.y?t.y:.5;o.set(n,s-.5,.5-a,-1,1),o.transformMat4(n,n,this.projection());for(var h=0;h<3;h++)n[h]/=n[3];return e.x=r*(n[0]+1)/2,e.y=i*(1-n[1])/2,e},f.prototype.screenToCoordinates=function(t,e){var n=this._vec;e||(e={});var r=this._width,i=this._height,s=2*t.x/r-1,a=1-2*t.y/i;return o.set(n,s,a,1,1),o.transformMat4(n,n,this.inverseProjection()),e.x=.5+n[0],e.y=.5-n[1],e},f.limit={x:function(t,e){return function(n){return n.x=h(n.x,t,e),n}},y:function(t,e){return function(n){return n.y=h(n.y,t,e),n}},zoom:function(t,e){return function(n){return n.zoom=h(n.zoom,t,e),n}},resolution:function(t){return function(e){if(e.width<=0||e.height<=0)return e;var n=e.width,r=s()*n/t;return e.zoom=h(e.zoom,r,1/0),e}},visibleX:function(t,e){return function(n){var r=e-t;n.zoom>r&&(n.zoom=r);var i=t+.5*n.zoom,o=e-.5*n.zoom;return n.x=h(n.x,i,o),n}},visibleY:function(t,e){return function(n){if(n.width<=0||n.height<=0)return n;var r=n.width/n.height/n.mediaAspectRatio,i=(e-t)*r;n.zoom>i&&(n.zoom=i);var o=t+.5*n.zoom/r,s=e-.5*n.zoom/r;return n.y=h(n.y,o,s),n}},letterbox:function(){return function(t){if(t.width<=0||t.height<=0)return t;var e,n,r,i,o=t.width/t.height,s=o/t.mediaAspectRatio;return t.mediaAspectRatio>=o&&(t.zoom=Math.min(t.zoom,1)),t.mediaAspectRatio<=o&&(t.zoom=Math.min(t.zoom,s)),t.zoom>1?e=n=.5:(e=0+.5*t.zoom/1,n=1-.5*t.zoom/1),t.zoom>s?r=i=.5:(r=0+.5*t.zoom/s,i=1-.5*t.zoom/s),t.x=h(t.x,e,n),t.y=h(t.y,r,i),t}}},f.type=f.prototype.type="flat",t.exports=f},"OjK+":function(t,e,n){"use strict";var r=n("DZQB"),i=n("5K+I"),o=n("puQj"),s=n("/zJR"),a=n("/IDO"),h=!!s.createImageBitmap&&!o.firefox,u={imageOrientation:"flipY",premultiplyAlpha:"premultiply"};function c(t){this._stage=t}c.prototype.loadImage=function(t,e,n){var r=this,i=new Image;i.crossOrigin="anonymous";var o=e&&e.x||0,s=e&&e.y||0,h=e&&e.width||1,u=e&&e.height||1;return n=a(n),i.onload=function(){r._handleLoad(i,o,s,h,u,n)},i.onerror=function(){r._handleError(t,n)},i.src=t,function(){i.onload=i.onerror=null,i.src="",n.apply(null,arguments)}},c.prototype._handleLoad=function(t,e,n,i,o,a){if(0!==e||0!==n||1!==i||1!==o)if(e*=t.naturalWidth,n*=t.naturalHeight,i*=t.naturalWidth,o*=t.naturalHeight,h)s.createImageBitmap(t,e,n,i,o,u).then((function(t){a(null,new r(t))}));else{var c=document.createElement("canvas");c.width=i,c.height=o,c.getContext("2d").drawImage(t,e,n,i,o,0,0,i,o),a(null,new r(c))}else a(null,new r(t))},c.prototype._handleError=function(t,e){e(new i("Network error: "+t))},t.exports=c},Oxtx:function(t,e,n){"use strict";var r=n("aGdX"),i=n("77Rc"),o={active:"move",inactive:"default",disabled:"default"};function s(t,e,n,i){i=r(i||{},o),this._element=n,this._controls=t,this._id=e,this._attached=!1,this._setActiveCursor=this._setCursor.bind(this,i.active),this._setInactiveCursor=this._setCursor.bind(this,i.inactive),this._setDisabledCursor=this._setCursor.bind(this,i.disabled),this._setOriginalCursor=this._setCursor.bind(this,this._element.style.cursor),this._updateAttachmentHandler=this._updateAttachment.bind(this),t.addEventListener("methodEnabled",this._updateAttachmentHandler),t.addEventListener("methodDisabled",this._updateAttachmentHandler),t.addEventListener("enabled",this._updateAttachmentHandler),t.addEventListener("disabled",this._updateAttachmentHandler),this._updateAttachment()}s.prototype.destroy=function(){this._detachFromControlMethod(this._controls.method(this._id)),this._setOriginalCursor(),this._controls.removeEventListener("methodEnabled",this._updateAttachmentHandler),this._controls.removeEventListener("methodDisabled",this._updateAttachmentHandler),this._controls.removeEventListener("enabled",this._updateAttachmentHandler),this._controls.removeEventListener("disabled",this._updateAttachmentHandler),i(this)},s.prototype._updateAttachment=function(){var t=this._controls,e=this._id;t.enabled()&&t.method(e).enabled?this._attachToControlMethod(t.method(e)):this._detachFromControlMethod(t.method(e))},s.prototype._attachToControlMethod=function(t){this._attached||(t.instance.addEventListener("active",this._setActiveCursor),t.instance.addEventListener("inactive",this._setInactiveCursor),t.active?this._setActiveCursor():this._setInactiveCursor(),this._attached=!0)},s.prototype._detachFromControlMethod=function(t){this._attached&&(t.instance.removeEventListener("active",this._setActiveCursor),t.instance.removeEventListener("inactive",this._setInactiveCursor),this._setDisabledCursor(),this._attached=!1)},s.prototype._setCursor=function(t){this._element.style.cursor=t},t.exports=s},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},PQoV:function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("JZIl"),s=n("aGdX"),a=n("tuss").maxFriction,h=n("77Rc"),u={friction:6,maxFrictionTime:.3,hammerEvent:"pan"},c="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function l(t,e,n){if(this._element=t,this._opts=s(n||{},u),this._startEvent=null,this._lastEvent=null,this._active=!1,this._dynamics={x:new i,y:new i},this._hammer=o.get(t,e,this._opts.hammerEvent),this._hammer.on("hammer.input",this._handleHammerEvent.bind(this)),"pan"!=this._opts.hammerEvent&&"pinch"!=this._opts.hammerEvent&&"multipinch"!=this._opts.hammerEvent)throw new Error(this._opts.hammerEvent+" is not a hammerEvent managed in DragControlMethod");this._hammer.on(this._opts.hammerEvent+"start",this._handleStart.bind(this)),this._hammer.on(this._opts.hammerEvent+"move",this._handleMove.bind(this)),this._hammer.on(this._opts.hammerEvent+"end",this._handleEnd.bind(this)),this._hammer.on(this._opts.hammerEvent+"cancel",this._handleEnd.bind(this))}r(l),l.prototype.destroy=function(){this._hammer.release(),h(this)},l.prototype._handleHammerEvent=function(t){if(t.isFirst){if(c&&this._active)throw new Error("DragControlMethod active detected when already active");this._active=!0,this.emit("active")}if(t.isFinal){if(c&&!this._active)throw new Error("DragControlMethod inactive detected when already inactive");this._active=!1,this.emit("inactive")}},l.prototype._handleStart=function(t){t.preventDefault(),this._startEvent=t},l.prototype._handleMove=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsMove(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y))},l.prototype._handleEnd=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsRelease(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y)),this._startEvent=!1,this._lastEvent=!1},l.prototype._updateDynamicsMove=function(t){var e=t.deltaX,n=t.deltaY,r=this._lastEvent||this._startEvent;r&&(e-=r.deltaX,n-=r.deltaY);var i=this._element.getBoundingClientRect();e/=i.right-i.left,n/=i.bottom-i.top,this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.offset=-e,this._dynamics.y.offset=-n,this._lastEvent=t};var f=[null,null];l.prototype._updateDynamicsRelease=function(t){var e=this._element.getBoundingClientRect(),n=e.right-e.left,r=e.bottom-e.top,i=1e3*t.velocityX/n,o=1e3*t.velocityY/r;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=i,this._dynamics.y.velocity=o,a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,f),this._dynamics.x.friction=f[0],this._dynamics.y.friction=f[1]},t.exports=l},Pw8D:function(t,e,n){"use strict";t.exports=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uProjMatrix;","varying vec2 vTextureCoord;","void main(void) {","  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);","  gl_Position.z = uDepth * gl_Position.w;","  vTextureCoord = aTextureCoord;","}"].join("\n")},QsHJ:function(t,e,n){"use strict";t.exports=function(t){return 0==(t&t-1)}},R8wE:function(t,e,n){"use strict";t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},S3fn:function(t,e,n){"use strict";var r=n("GaDe");t.exports=function(){var t=Array.prototype.slice.call(arguments,0);return function(){var e=t.slice(0),n=null,i=null,o=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],s=arguments.length?arguments[arguments.length-1]:r;function a(){var t=arguments[0];if(t)return n=i=null,void s.apply(null,arguments);if(!e.length)return n=i=null,void s.apply(null,arguments);var r=n=e.shift(),o=Array.prototype.slice.call(arguments,1);o.push(a);var h=n.apply(null,o);if(r===n){if("function"!=typeof h)throw new Error("chain: chaining on non-cancellable function");i=h}}function h(){i&&i.apply(null,arguments)}return o.unshift(null),a.apply(null,o),h}}},Sf3O:function(t,e,n){"use strict";t.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform float uTextureX;","uniform float uTextureY;","uniform float uTextureWidth;","uniform float uTextureHeight;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec4 vRay;","const float PI = 3.14159265358979323846264;","void main(void) {","  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);","  float phi  = acos(vRay.y * r);","  float theta = atan(vRay.x, -1.0*vRay.z);","  float s = 0.5 + 0.5 * theta / PI;","  float t = 1.0 - phi / PI;","  s = s * uTextureWidth + uTextureX;","  t = t * uTextureHeight + uTextureY;","  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},T2LU:function(t,e,n){"use strict";t.exports=function(){var t=arguments;return function(e){for(var n=e,r=0;r<t.length;r++){n=t[r].call(null,n)}return n}}},UnMT:function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("aGdX"),s=n("77Rc"),a={frictionTime:.2,zoomDelta:.001};function h(t,e){this._element=t,this._opts=o(e||{},a),this._dynamics=new i,this._eventList=[];var n=this._opts.frictionTime?this.withSmoothing:this.withoutSmoothing;this._wheelListener=n.bind(this),t.addEventListener("wheel",this._wheelListener)}function u(t){var e=1==t.deltaMode?20:1;return t.deltaY*e}r(h),h.prototype.destroy=function(){this._element.removeEventListener("wheel",this._wheelListener),s(this)},h.prototype.withoutSmoothing=function(t){this._dynamics.offset=u(t)*this._opts.zoomDelta,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},h.prototype.withSmoothing=function(t){var e=t.timeStamp;for(this._eventList.push(t);this._eventList[0].timeStamp<e-1e3*this._opts.frictionTime;)this._eventList.shift(0);for(var n=0,r=0;r<this._eventList.length;r++){n+=u(this._eventList[r])*this._opts.zoomDelta/this._opts.frictionTime}this._dynamics.velocity=n,this._dynamics.friction=Math.abs(n)/this._opts.frictionTime,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},t.exports=h},Vgxw:function(t,e,n){"use strict";var r=n("l8c5"),i=n("fvpu"),o=n("Aui5").setTransform,s=n("77Rc");function a(t,e,n,r,i){(i=i||{}).perspective=i.perspective||{},i.perspective.extraTransforms=null!=i.perspective.extraTransforms?i.perspective.extraTransforms:"",this._domElement=t,this._parentDomElement=e,this._view=n,this._coords={},this._perspective={},this.setPosition(r),this._parentDomElement.appendChild(this._domElement),this.setPerspective(i.perspective),this._visible=!0,this._position={x:0,y:0}}r(a),a.prototype.destroy=function(){this._parentDomElement.removeChild(this._domElement),s(this)},a.prototype.domElement=function(){return this._domElement},a.prototype.position=function(){return this._coords},a.prototype.setPosition=function(t){for(var e in t)this._coords[e]=t[e];this._update()},a.prototype.perspective=function(){return this._perspective},a.prototype.setPerspective=function(t){for(var e in t)this._perspective[e]=t[e];this._update()},a.prototype.show=function(){this._visible||(this._visible=!0,this._update())},a.prototype.hide=function(){this._visible&&(this._visible=!1,this._update())},a.prototype._update=function(){var t,e,n=this._domElement,r=this._coords,i=this._position,o=!1;if(this._visible){var s=this._view;this._perspective.radius?(o=!0,this._setEmbeddedPosition(s,r)):(s.coordinatesToScreen(r,i),t=i.x,e=i.y,null!=t&&null!=e&&(o=!0,this._setPosition(t,e)))}o?(n.style.display="block",n.style.position="absolute"):(n.style.display="none",n.style.position="")},a.prototype._setEmbeddedPosition=function(t,e){var n=t.coordinatesToPerspectiveTransform(e,this._perspective.radius,this._perspective.extraTransforms);o(this._domElement,n)},a.prototype._setPosition=function(t,e){i(this._domElement,t,e,this._perspective.extraTransforms)},t.exports=a},Vq8G:function(t,e,n){"use strict";t.exports="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()}},ZXlt:function(t,e,n){"use strict";t.exports={WebGlStage:n("dBP0"),WebGlCubeRenderer:n("fnIc"),WebGlFlatRenderer:n("mQ4t"),WebGlEquirectRenderer:n("ksFE"),registerDefaultRenderers:n("rcVr"),CubeGeometry:n("t3FP"),FlatGeometry:n("4sOk"),EquirectGeometry:n("KZ2n"),RectilinearView:n("A7Kq"),FlatView:n("OTh6"),ImageUrlSource:n("OH7d"),SingleAssetSource:n("Duax"),StaticAsset:n("DZQB"),DynamicAsset:n("l/XM"),TextureStore:n("q5Ud"),Layer:n("hKL4"),RenderLoop:n("9MkR"),KeyControlMethod:n("wkbN"),DragControlMethod:n("PQoV"),QtvrControlMethod:n("C8HN"),ScrollZoomControlMethod:n("UnMT"),PinchZoomControlMethod:n("ONJT"),VelocityControlMethod:n("dbf1"),ElementPressControlMethod:n("cdHj"),Controls:n("8HNk"),Dynamics:n("uPEp"),Viewer:n("wJyA"),Scene:n("Lbfq"),Hotspot:n("Vgxw"),HotspotContainer:n("cwWM"),colorEffects:n("bUuW"),registerDefaultControls:n("Mzh7"),autorotate:n("t2RU"),util:{async:n("yblz"),cancelize:n("hw3A"),chain:n("S3fn"),clamp:n("CSCW"),clearOwnProperties:n("77Rc"),cmp:n("GjHf"),compose:n("T2LU"),convertFov:n("8674"),decimal:n("G7g9"),defaults:n("aGdX"),defer:n("BfH8"),degToRad:n("g7dT"),delay:n("ev33"),dom:n("Aui5"),extend:n("x8Mq"),hash:n("hwQt"),inherits:n("R8wE"),mod:n("ItFr"),noop:n("GaDe"),now:n("Vq8G"),once:n("/IDO"),pixelRatio:n("wIDX"),radToDeg:n("Eh9X"),real:n("43FX"),retry:n("xxJl"),tween:n("LAUC"),type:n("w5Vv")},dependencies:{bowser:n("puQj"),glMatrix:n("IOcx"),eventEmitter:n("l8c5"),hammerjs:n("yLV6")}}},aGdX:function(t,e,n){"use strict";t.exports=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t}},bUuW:function(t,e,n){"use strict";var r=n("IOcx").vec4,i=n("IOcx").mat4;function o(t,e,n){var i,o,s,a,h,u,c;i=n,o=t,s=e.colorMatrix,a=o[0],h=o[1],u=o[2],c=o[3],i[0]=s[0]*a+s[1]*h+s[2]*u+s[3]*c,i[1]=s[4]*a+s[5]*h+s[6]*u+s[7]*c,i[2]=s[8]*a+s[9]*h+s[10]*u+s[11]*c,i[3]=s[12]*a+s[13]*h+s[14]*u+s[15]*c,r.add(n,n,e.colorOffset)}var s=r.create();t.exports={identity:function(t){var e=t||{};return e.colorOffset=e.colorOffset||r.create(),e.colorMatrix=e.colorMatrix||i.create(),e},applyToPixel:o,applyToImageData:function(t,e){for(var n=t.width,i=t.height,a=t.data,h=0;h<n*i;h++)r.set(s,a[4*h+0]/255,a[4*h+1]/255,a[4*h+2]/255,a[4*h+3]/255),o(s,e,s),a[4*h+0]=255*s[0],a[4*h+1]=255*s[1],a[4*h+2]=255*s[2],a[4*h+3]=255*s[3]}}},cdHj:function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("77Rc");function s(t,e,n,r){if(!t)throw new Error("ElementPressControlMethod: element must be defined");if(!e)throw new Error("ElementPressControlMethod: parameter must be defined");if(!n)throw new Error("ElementPressControlMethod: velocity must be defined");if(!r)throw new Error("ElementPressControlMethod: friction must be defined");this._element=t,this._pressHandler=this._handlePress.bind(this),this._releaseHandler=this._handleRelease.bind(this),t.addEventListener("mousedown",this._pressHandler),t.addEventListener("mouseup",this._releaseHandler),t.addEventListener("mouseleave",this._releaseHandler),t.addEventListener("touchstart",this._pressHandler),t.addEventListener("touchmove",this._releaseHandler),t.addEventListener("touchend",this._releaseHandler),this._parameter=e,this._velocity=n,this._friction=r,this._dynamics=new i,this._pressing=!1}r(s),s.prototype.destroy=function(){this._element.removeEventListener("mousedown",this._pressHandler),this._element.removeEventListener("mouseup",this._releaseHandler),this._element.removeEventListener("mouseleave",this._releaseHandler),this._element.removeEventListener("touchstart",this._pressHandler),this._element.removeEventListener("touchmove",this._releaseHandler),this._element.removeEventListener("touchend",this._releaseHandler),o(this)},s.prototype._handlePress=function(){this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active")},s.prototype._handleRelease=function(){this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1},t.exports=s},cwWM:function(t,e,n){"use strict";var r=n("l8c5"),i=n("Vgxw"),o=n("mfb3"),s=n("fvpu"),a=n("Aui5").setAbsolute,h=n("Aui5").setOverflowHidden,u=n("Aui5").setOverflowVisible,c=n("Aui5").setNullSize,l=n("Aui5").setPixelSize,f=n("Aui5").setWithVendorPrefix("pointer-events"),p=n("77Rc");function d(t,e,n,r,i){i=i||{},this._parentDomElement=t,this._stage=e,this._view=n,this._renderLoop=r,this._hotspots=[],this._visible=!0,this._rect=i.rect,this._visibilityOrRectChanged=!0,this._stageWidth=null,this._stageHeight=null,this._tmpRect={},this._hotspotContainerWrapper=document.createElement("div"),a(this._hotspotContainerWrapper),f(this._hotspotContainerWrapper,"none"),this._parentDomElement.appendChild(this._hotspotContainerWrapper),this._hotspotContainer=document.createElement("div"),a(this._hotspotContainer),f(this._hotspotContainer,"all"),this._hotspotContainerWrapper.appendChild(this._hotspotContainer),this._updateHandler=this._update.bind(this),this._renderLoop.addEventListener("afterRender",this._updateHandler)}r(d),d.prototype.destroy=function(){for(;this._hotspots.length;)this.destroyHotspot(this._hotspots[0]);this._parentDomElement.removeChild(this._hotspotContainerWrapper),this._renderLoop.removeEventListener("afterRender",this._updateHandler),p(this)},d.prototype.domElement=function(){return this._hotspotContainer},d.prototype.setRect=function(t){this._rect=t,this._visibilityOrRectChanged=!0},d.prototype.rect=function(){return this._rect},d.prototype.createHotspot=function(t,e,n){e=e||{};var r=new i(t,this._hotspotContainer,this._view,e,n);return this._hotspots.push(r),r._update(),this.emit("hotspotsChange"),r},d.prototype.hasHotspot=function(t){return this._hotspots.indexOf(t)>=0},d.prototype.listHotspots=function(){return[].concat(this._hotspots)},d.prototype.destroyHotspot=function(t){var e=this._hotspots.indexOf(t);if(e<0)throw new Error("No such hotspot");this._hotspots.splice(e,1),t.destroy(),this.emit("hotspotsChange")},d.prototype.hide=function(){this._visible&&(this._visible=!1,this._visibilityOrRectChanged=!0,this._update())},d.prototype.show=function(){this._visible||(this._visible=!0,this._visibilityOrRectChanged=!0,this._update())},d.prototype._update=function(){var t=this._hotspotContainerWrapper,e=this._stage.width(),n=this._stage.height(),r=this._tmpRect;if(this._visibilityOrRectChanged||this._rect&&(e!==this._stageWidth||n!==this._stageHeight)){var i=this._visible;t.style.display=i?"block":"none",i&&(this._rect?(o(e,n,this._rect,r),s(t,e*r.x,n*r.y),l(t,e*r.width,n*r.height),h(t)):(s(t,0,0),c(t),u(t))),this._stageWidth=e,this._stageHeight=n,this._visibilityOrRectChanged=!1}for(var a=0;a<this._hotspots.length;a++)this._hotspots[a]._update()},t.exports=d},dBP0:function(t,e,n){"use strict";var r=n("GpiB"),i=n("OjK+"),o=n("puQj"),s=n("R8wE"),a=n("wIDX"),h=n("QsHJ"),u=n("Aui5").setAbsolute,c=n("Aui5").setFullSize,l=n("77Rc"),f=o.chrome;function p(t){t=t||{};var e=this;this.constructor.super_.call(this,t),this._generateMipmaps=null!=t.generateMipmaps&&t.generateMipmaps,this._loader=new i(this),this._domElement=document.createElement("canvas"),u(this._domElement),c(this._domElement),this._gl=function(t,e){var n={alpha:!0,premultipliedAlpha:!0,antialias:!(!e||!e.antialias),preserveDrawingBuffer:!(!e||!e.preserveDrawingBuffer)},r=t.getContext&&(t.getContext("webgl",n)||t.getContext("experimental-webgl",n));if(!r)throw new Error("Could not get WebGL context");return e.wrapContext&&(r=e.wrapContext(r)),r}(this._domElement,t),this._handleContextLoss=function(){e.emit("webglcontextlost"),e._gl=null},this._domElement.addEventListener("webglcontextlost",this._handleContextLoss),this._rendererInstances=[]}function d(t,e,n){this._stage=t,this._gl=t._gl,this._texture=null,this._timestamp=null,this._width=this._height=null,this.refresh(e,n)}s(p,r),p.prototype.destroy=function(){this._domElement.removeEventListener("webglcontextlost",this._handleContextLoss),this.constructor.super_.prototype.destroy.call(this)},p.prototype.domElement=function(){return this._domElement},p.prototype.webGlContext=function(){return this._gl},p.prototype.setSizeForType=function(){var t=a();this._domElement.width=t*this._width,this._domElement.height=t*this._height},p.prototype.loadImage=function(t,e,n){return this._loader.loadImage(t,e,n)},p.prototype.maxTextureSize=function(){return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE)},p.prototype.validateLayer=function(t){var e=t.geometry().maxTileSize(),n=this.maxTextureSize();if(e>n)throw new Error("Layer has level with tile size larger than maximum texture size ("+e+" vs. "+n+")")},p.prototype.createRenderer=function(t){for(var e=this._rendererInstances,n=0;n<e.length;n++)if(e[n]instanceof t)return e[n];var r=new t(this._gl);return e.push(r),r},p.prototype.destroyRenderer=function(t){var e=this._rendererInstances;if(this._renderers.indexOf(t)<0){t.destroy();var n=e.indexOf(t);n>=0&&e.splice(n,1)}},p.prototype.startFrame=function(){var t=this._gl;if(!t)throw new Error("Bad WebGL context - maybe context was lost?");t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)},p.prototype.endFrame=function(){},p.prototype.takeSnapshot=function(t){"object"==typeof t&&null!=t||(t={});var e=t.quality;if(void 0===e&&(e=75),"number"!=typeof e||e<0||e>100)throw new Error("WebGLStage: Snapshot quality needs to be a number between 0 and 100");return this.render(),this._domElement.toDataURL("image/jpeg",e/100)},p.type=p.prototype.type="webgl",d.prototype.refresh=function(t,e){var n,r=this._gl,i=this._stage,o=e.timestamp();if(o!==this._timestamp){var s=e.element(),a=e.width(),u=e.height();if(a!==this._width||u!==this._height){var c=i.maxTextureSize();if(a>c)throw new Error("Texture width larger than max size ("+a+" vs. "+c+")");if(u>c)throw new Error("Texture height larger than max size ("+u+" vs. "+c+")");this._texture&&r.deleteTexture(n),n=this._texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,n),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s)}else n=this._texture,r.bindTexture(r.TEXTURE_2D,n),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),s instanceof HTMLVideoElement&&f?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s):r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,s);i._generateMipmaps&&h(a)&&h(u)?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.generateMipmap(r.TEXTURE_2D)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null),this._timestamp=o,this._width=a,this._height=u}},d.prototype.destroy=function(){this._texture&&this._gl.deleteTexture(this._texture),l(this)},p.TextureClass=p.prototype.TextureClass=d,t.exports=p},dbf1:function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("77Rc");function s(t){if(!t)throw new Error("VelocityControlMethod: parameter must be defined");this._parameter=t,this._dynamics=new i}r(s),s.prototype.destroy=function(){o(this)},s.prototype.setVelocity=function(t){this._dynamics.velocity=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},s.prototype.setFriction=function(t){this._dynamics.friction=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},t.exports=s},ev33:function(t,e,n){"use strict";t.exports=function(t,e){var n=null;return n=setTimeout((function(){null!=n&&(n=null,e(null))}),t),function(){null!=n&&(clearTimeout(n),n=null,e.apply(null,arguments))}}},fnIc:function(t,e,n){"use strict";var r=n("+3xs");function i(){this.constructor.super_.apply(this,arguments)}n("R8wE")(i,r),t.exports=i},fpI6:function(t,e,n){"use strict";var r=n("GjHf");t.exports={makeLevelList:function(t,e){for(var n=[],i=0;i<t.length;i++)n.push(new e(t[i]));return n.sort((function(t,e){return r(t.width(),e.width())})),n},makeSelectableLevelList:function(t){for(var e=[],n=0;n<t.length;n++)t[n]._fallbackOnly||e.push(t[n]);if(!e.length)throw new Error("No selectable levels in list");return e}}},fvpu:function(t,e,n){"use strict";var r=n("Aui5").setTransform,i=n("G7g9");t.exports=function(t,e,n,o){o=o||"";var s="translateX("+i(e)+"px) translateY("+i(n)+"px) translateZ(0) "+o;r(t,s)}},g7dT:function(t,e,n){"use strict";t.exports=function(t){return t*Math.PI/180}},hKL4:function(t,e,n){"use strict";var r=n("l8c5"),i=n("x8Mq"),o=n("77Rc");function s(t,e,n,r,i){i=i||{};var o=this;this._source=t,this._geometry=e,this._view=n,this._textureStore=r,this._effects=i.effects||{},this._fixedLevelIndex=null,this._viewChangeHandler=function(){o.emit("viewChange",o.view())},this._view.addEventListener("change",this._viewChangeHandler),this._textureStoreChangeHandler=function(){o.emit("textureStoreChange",o.textureStore())},this._textureStore.addEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureInvalid",this._textureStoreChangeHandler)}r(s),s.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._textureStore.removeEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureInvalid",this._textureStoreChangeHandler),o(this)},s.prototype.source=function(){return this._source},s.prototype.geometry=function(){return this._geometry},s.prototype.view=function(){return this._view},s.prototype.textureStore=function(){return this._textureStore},s.prototype.effects=function(){return this._effects},s.prototype.setEffects=function(t){this._effects=t,this.emit("effectsChange",this._effects)},s.prototype.mergeEffects=function(t){i(this._effects,t),this.emit("effectsChange",this._effects)},s.prototype.fixedLevel=function(){return this._fixedLevelIndex},s.prototype.setFixedLevel=function(t){if(t!==this._fixedLevelIndex){if(null!=t&&(t>=this._geometry.levelList.length||t<0))throw new Error("Level index out of range: "+t);this._fixedLevelIndex=t,this.emit("fixedLevelChange",this._fixedLevelIndex)}},s.prototype._selectLevel=function(){return null!=this._fixedLevelIndex?this._geometry.levelList[this._fixedLevelIndex]:this._view.selectLevel(this._geometry.selectableLevelList)},s.prototype.visibleTiles=function(t){var e=this._selectLevel();return this._geometry.visibleTiles(this._view,e,t)},s.prototype.pinLevel=function(t){for(var e=this._geometry.levelList[t],n=this._geometry.levelTiles(e),r=0;r<n.length;r++)this._textureStore.pin(n[r])},s.prototype.unpinLevel=function(t){for(var e=this._geometry.levelList[t],n=this._geometry.levelTiles(e),r=0;r<n.length;r++)this._textureStore.unpin(n[r])},s.prototype.pinFirstLevel=function(){return this.pinLevel(0)},s.prototype.unpinFirstLevel=function(){return this.unpinLevel(0)},t.exports=s},hw3A:function(t,e,n){"use strict";var r=n("/IDO");t.exports=function(t){return function(){if(!arguments.length)throw new Error("cancelized: expected at least one argument");var e=Array.prototype.slice.call(arguments,0),n=e[e.length-1]=r(e[e.length-1]);function i(){n.apply(null,arguments)}return t.apply(null,e),i}}},hwQt:function(t,e,n){"use strict";t.exports=function(){for(var t=0,e=0;e<arguments.length;e++){var n=arguments[e];t+=n,t+=n<<10,t^=n>>6}return t+=t<<3,t^=t>>11,(t+=t<<15)>=0?t:-t}},icZL:function(t,e,n){"use strict";var r=n("qN4a");function i(){this._stack=[],this._visited=new r,this._vertices=null}i.prototype.search=function(t,e,n){var r=this._stack,i=this._visited,o=this._vertices,s=0;for(this._clear(),r.push(e);r.length>0;){var a=r.pop();if(!i.has(a)&&t.intersects(a.vertices(o))){i.add(a);for(var h=a.neighbors(),u=0;u<h.length;u++)r.push(h[u]);n.push(a),s++}}return this._vertices=o,this._clear(),s},i.prototype._clear=function(){this._stack.length=0,this._visited.clear()},t.exports=i},jboI:function(t,e,n){"use strict";var r=n("ItFr");function i(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruSet: invalid capacity");this._capacity=t,this._elements=new Array(this._capacity),this._start=0,this._size=0}i.prototype._index=function(t){return r(this._start+t,this._capacity)},i.prototype.add=function(t){if(0===this._capacity)return t;this.remove(t);var e=this._size===this._capacity?this._elements[this._index(0)]:null;return this._elements[this._index(this._size)]=t,this._size<this._capacity?this._size++:this._start=this._index(1),e},i.prototype.remove=function(t){for(var e=0;e<this._size;e++){var n=this._elements[this._index(e)];if(t.equals(n)){for(var r=e;r<this._size-1;r++)this._elements[this._index(r)]=this._elements[this._index(r+1)];return this._size--,n}}return null},i.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._elements[this._index(e)]))return!0;return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._elements.length=0,this._start=0,this._size=0},i.prototype.forEach=function(t){for(var e=0,n=0;n<this._size;n++)t(this._elements[this._index(n)]),e+=1;return e},t.exports=i},ksFE:function(t,e,n){"use strict";var r=n("IOcx").mat4,i=n("77Rc"),o=n("4Hdd"),s=o.createConstantBuffers,a=o.destroyConstantBuffers,h=o.createShaderProgram,u=o.destroyShaderProgram,c=o.enableAttributes,l=o.disableAttributes,f=o.setViewport,p=o.setupPixelEffectUniforms,d=o.setDepth,v=o.setTexture,m=n("xqER"),_=n("Sf3O"),y=[0,1,2,0,2,3],g=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],w=[0,0,1,0,1,1,0,1],M=["aVertexPosition"],x=["uDepth","uOpacity","uSampler","uInvProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix","uTextureX","uTextureY","uTextureWidth","uTextureHeight"];function b(t){this.gl=t,this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.constantBuffers=s(t,y,g,w),this.shaderProgram=h(t,m,_,M,x)}b.prototype.destroy=function(){a(this.gl,this.constantBuffers),u(this.gl,this.shaderProgram),i(this)},b.prototype.startLayer=function(t,e){var n=this.gl,i=this.shaderProgram,o=this.constantBuffers,s=this.invProjMatrix,a=this.viewportMatrix;n.useProgram(i),c(n,i),f(n,t,e,a),n.uniformMatrix4fv(i.uViewportMatrix,!1,a),n.bindBuffer(n.ARRAY_BUFFER,o.vertexPositions),n.vertexAttribPointer(i.aVertexPosition,3,n.FLOAT,n.FALSE,0,0),n.bindBuffer(n.ARRAY_BUFFER,o.textureCoords),r.copy(s,t.view().projection()),r.invert(s,s),n.uniformMatrix4fv(i.uInvProjMatrix,!1,s);var h=t.effects().textureCrop||{},u=null!=h.x?h.x:0,l=null!=h.y?h.y:0,d=null!=h.width?h.width:1,v=null!=h.height?h.height:1;n.uniform1f(i.uTextureX,u),n.uniform1f(i.uTextureY,l),n.uniform1f(i.uTextureWidth,d),n.uniform1f(i.uTextureHeight,v),p(n,t.effects(),{opacity:i.uOpacity,colorOffset:i.uColorOffset,colorMatrix:i.uColorMatrix})},b.prototype.endLayer=function(t,e){var n=this.gl,r=this.shaderProgram;l(n,r)},b.prototype.renderTile=function(t,e,n,r){var i=this.gl,o=this.shaderProgram,s=this.constantBuffers;d(i,o,r,t.z),v(i,o,e),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,s.vertexIndices),i.drawElements(i.TRIANGLES,y.length,i.UNSIGNED_SHORT,0)},t.exports=b},"l/XM":function(t,e,n){"use strict";var r=n("DZQB"),i=n("R8wE"),o=n("l8c5"),s=n("77Rc");function a(t){this.constructor.super_.call(this,t),this._timestamp=0}i(a,r),o(a),a.prototype.destroy=function(){s(this)},a.prototype.timestamp=function(){return this._timestamp},a.prototype.isDynamic=function(){return!0},a.prototype.markDirty=function(){this._timestamp++,this.emit("change")},t.exports=a},l8c5:function(t,e,n){"use strict";function r(){}r.prototype.addEventListener=function(t,e){var n=this.__events=this.__events||{},r=n[t]=n[t]||[];r.indexOf(e)<0&&r.push(e)},r.prototype.removeEventListener=function(t,e){var n=(this.__events=this.__events||{})[t];if(n){var r=n.indexOf(e);r>=0&&n.splice(r,1)}},r.prototype.emit=function(t,e){var n=this.__events=this.__events||{},r=n[t],i=Array.prototype.slice.call(arguments,1);if(r)for(var o=0;o<r.length;o++){var s=r[o];s.apply(this,i)}},t.exports=function(t){for(var e in r.prototype)r.prototype.hasOwnProperty(e)&&(t.prototype[e]=r.prototype[e])}},lI7A:function(t,e,n){"use strict";var r=n("Vq8G");function i(t,e){this.fn=t,this.cb=e,this.cfn=null}function o(t){this._queue=[],this._delay=t&&t.delay||0,this._paused=t&&!!t.paused||!1,this._currentTask=null,this._lastFinished=null}o.prototype.length=function(){return this._queue.length},o.prototype.push=function(t,e){var n=new i(t,e),r=this._cancel.bind(this,n);return this._queue.push(n),this._next(),r},o.prototype.pause=function(){this._paused||(this._paused=!0)},o.prototype.resume=function(){this._paused&&(this._paused=!1,this._next())},o.prototype._start=function(t){if(this._currentTask)throw new Error("WorkQueue: called start while running task");this._currentTask=t;var e=this._finish.bind(this,t);if(t.cfn=t.fn(e),"function"!=typeof t.cfn)throw new Error("WorkQueue: function is not cancellable")},o.prototype._finish=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask!==t)throw new Error("WorkQueue: called finish on wrong task");t.cb.apply(null,e),this._currentTask=null,this._lastFinished=r(),this._next()},o.prototype._cancel=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask===t)t.cfn.apply(null,e);else{var n=this._queue.indexOf(t);n>=0&&(this._queue.splice(n,1),t.cb.apply(null,e))}},o.prototype._next=function(){if(!this._paused&&this._queue.length&&!this._currentTask){if(null!=this._lastFinished){var t=r()-this._lastFinished,e=this._delay-t;if(e>0)return void setTimeout(this._next.bind(this),e)}var n=this._queue.shift();this._start(n)}},t.exports=o},mQ4t:function(t,e,n){"use strict";var r=n("+3xs");function i(){this.constructor.super_.apply(this,arguments)}n("R8wE")(i,r),t.exports=i},mfb3:function(t,e,n){"use strict";t.exports=function(t,e,n,r){var i,o,s,a;return r=r||{},i=null!=n&&null!=n.absoluteWidth?n.absoluteWidth/t:null!=n&&null!=n.relativeWidth?n.relativeWidth:1,o=n&&null!=n.absoluteHeight?n.absoluteHeight/e:null!=n&&null!=n.relativeHeight?n.relativeHeight:1,s=null!=n&&null!=n.absoluteX?n.absoluteX/t:null!=n&&null!=n.relativeX?n.relativeX:0,a=null!=n&&null!=n.absoluteY?n.absoluteY/e:null!=n&&null!=n.relativeY?n.relativeY:0,r.x=s,r.y=a,r.width=i,r.height=o,r}},mrMV:function(t,e,n){"use strict";var r=n("lI7A"),i=n("ItFr");function o(t){this._concurrency=t&&t.concurrency||1,this._paused=t&&!!t.paused||!1,this._pool=[];for(var e=0;e<this._concurrency;e++)this._pool.push(new r(t));this._next=0}o.prototype.length=function(){for(var t=0,e=0;e<this._pool.length;e++)t+=this._pool[e].length();return t},o.prototype.push=function(t,e){var n=this._next,r=this._pool[n].push(t,e);return this._next=i(this._next+1,this._concurrency),r},o.prototype.pause=function(){if(!this._paused){this._paused=!0;for(var t=0;t<this._concurrency;t++)this._pool[t].pause()}},o.prototype.resume=function(){if(this._paused){this._paused=!1;for(var t=0;t<this._concurrency;t++)this._pool[t].resume()}},t.exports=o},p2RX:function(t,e,n){"use strict";function r(t){this._fallbackOnly=!!t.fallbackOnly}r.prototype.numHorizontalTiles=function(){return Math.ceil(this.width()/this.tileWidth())},r.prototype.numVerticalTiles=function(){return Math.ceil(this.height()/this.tileHeight())},r.prototype.fallbackOnly=function(){return this._fallbackOnly},t.exports=r},puQj:function(t,e,n){var r;r=function(){var t=!0;function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function r(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,s=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(e)&&/android/i.test(e),h=/nexus\s*[0-6]\s*/i.test(e),u=!h&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),l=/silk/i.test(e),f=/sailfish/i.test(e),p=/tizen/i.test(e),d=/(web|hpw)(o|0)s/i.test(e),v=/windows phone/i.test(e),m=(/SamsungBrowser/i.test(e),!v&&/windows/i.test(e)),_=!s&&!l&&/macintosh/i.test(e),y=!a&&!f&&!p&&!d&&/linux/i.test(e),g=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),w=n(/version\/(\d+(\.\d+)?)/i),M=/tablet/i.test(e)&&!/tablet pc/i.test(e),x=!M&&/[^-]mobi/i.test(e),b=/xbox/i.test(e);/opera/i.test(e)?i={name:"Opera",opera:t,version:w||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?i={name:"Opera",opera:t,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(e)?i={name:"Samsung Internet for Android",samsungBrowser:t,version:w||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(e)?i={name:"NAVER Whale browser",whale:t,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(e)?i={name:"MZ Browser",mzbrowser:t,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(e)?i={name:"Opera Coast",coast:t,version:w||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(e)?i={name:"Focus",focus:t,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:t,version:w||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?i={name:"UC Browser",ucbrowser:t,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?i={name:"Maxthon",maxthon:t,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?i={name:"Epiphany",epiphany:t,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?i={name:"Puffin",puffin:t,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?i={name:"Sleipnir",sleipnir:t,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?i={name:"K-Meleon",kMeleon:t,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:t},g?(i.msedge=t,i.version=g):(i.msie=t,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",osname:"Chrome OS",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?i={name:"Microsoft Edge",msedge:t,version:g}:/vivaldi/i.test(e)?i={name:"Vivaldi",vivaldi:t,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||w}:f?i={name:"Sailfish",osname:"Sailfish OS",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(i={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=t,i.osname="Firefox OS")):l?i={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?i={name:"SlimerJS",slimer:t,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:t,version:w||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(i={name:"WebOS",osname:"WebOS",webos:t,version:w||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=t)):/bada/i.test(e)?i={name:"Bada",osname:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",osname:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(e)?i={name:"QupZilla",qupzilla:t,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(e)?i={name:"Chromium",chromium:t,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:w}:/safari|applewebkit/i.test(e)?(i={name:"Safari",safari:t},w&&(i.version=w)):s?(i={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},w&&(i.version=w)):i=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:n(/googlebot\/(\d+(\.\d+))/i)||w}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(i.name=i.name||"Blink",i.blink=t):(i.name=i.name||"Webkit",i.webkit=t),!i.version&&w&&(i.version=w)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=t,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!a&&!i.silk?!i.windowsphone&&s?(i[s]=t,i.ios=t,i.osname="iOS"):_?(i.mac=t,i.osname="macOS"):b?(i.xbox=t,i.osname="Xbox"):m?(i.windows=t,i.osname="Windows"):y&&(i.linux=t,i.osname="Linux"):(i.android=t,i.osname="Android");var E="";i.windows?E=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?E=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?E=(E=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?E=(E=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?E=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?E=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?E=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?E=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(E=n(/tizen[\/\s](\d+(\.\d+)*)/i)),E&&(i.osversion=E);var T=!i.windows&&E.split(".")[0];return M||u||"ipad"==s||a&&(3==T||T>=4&&!x)||i.silk?i.tablet=t:(x||"iphone"==s||"ipod"==s||a||h||i.blackberry||i.webos||i.bada)&&(i.mobile=t),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===o([i.version,"1.0"])||i.mzbrowser&&1===o([i.version,"6.0"])||i.focus&&1===o([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=t:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=t:i.x=t,i}var n=e("undefined"!=typeof navigator&&navigator.userAgent||"");function r(t){return t.split(".").length}function i(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)r.push(e(t[n]));return r}function o(t){for(var e=Math.max(r(t[0]),r(t[1])),n=i(t,(function(t){var n=e-r(t);return i((t+=new Array(n+1).join(".0")).split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));--e>=0;){if(n[0][e]>n[1][e])return 1;if(n[0][e]!==n[1][e])return-1;if(0===e)return 0}}function s(t,r,i){var s=n;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(s=e(i));var a=""+s.version;for(var h in t)if(t.hasOwnProperty(h)&&s[h]){if("string"!=typeof t[h])throw new Error("Browser version in the minVersion map should be a string: "+h+": "+String(t));return o([a,t[h]])<0}return r}return n.test=function(t){for(var e=0;e<t.length;++e){var r=t[e];if("string"==typeof r&&r in n)return!0}return!1},n.isUnsupportedBrowser=s,n.compareVersions=o,n.check=function(t,e,n){return!s(t,e,n)},n._detect=e,n.detect=e,n},t.exports?t.exports=r():n("B9Yq")("bowser",r)},q5Ud:function(t,e,n){"use strict";var r=n("Jekc"),i=n("qN4a"),o=n("jboI"),s=n("l8c5"),a=n("aGdX"),h=n("xxJl"),u=n("S3fn"),c=n("R8wE"),l=n("77Rc"),f="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.textureStore,p=0,d=1,v=2,m=3,_={previouslyVisibleCacheSize:512},y=0;function g(){}function w(t,e){var n=this,r=y++;n._id=r,n._store=t,n._tile=e,n._asset=null,n._texture=null,n._changeHandler=function(){t.emit("textureInvalid",e)};var i=t.source(),o=t.stage(),s=i.loadAsset.bind(i),a=o.createTexture.bind(o),c=u(h(s),a);t.emit("textureStartLoad",e),f&&console.log("loading",r,e),n._cancel=c(o,e,(function(i,o,s,a){if(n._cancel=null,i)return s&&s.destroy(),a&&a.destroy(),void(i instanceof g?(t.emit("textureCancel",e),f&&console.log("cancel",r,e)):(t.emit("textureError",e,i),f&&console.log("error",r,e)));n._texture=a,s.isDynamic()?(n._asset=s,s.addEventListener("change",n._changeHandler)):s.destroy(),t.emit("textureLoad",e),f&&console.log("load",r,e)}))}function M(t,e,n){n=a(n||{},_),this._source=t,this._stage=e,this._state=p,this._delimCount=0,this._itemMap=new r,this._visible=new i,this._previouslyVisible=new o(n.previouslyVisibleCacheSize),this._pinMap=new r,this._newVisible=new i,this._noLongerVisible=[],this._visibleAgain=[],this._evicted=[]}c(g,Error),w.prototype.asset=function(){return this._asset},w.prototype.texture=function(){return this._texture},w.prototype.destroy=function(){var t=this._id,e=this._store,n=this._tile,r=this._asset,i=this._texture,o=this._cancel;o?o(new g("Texture load cancelled")):(r&&(r.removeEventListener("change",this._changeHandler),r.destroy()),i&&i.destroy(),e.emit("textureUnload",n),f&&console.log("unload",t,n),l(this))},s(w),s(M),M.prototype.destroy=function(){this.clear(),l(this)},M.prototype.stage=function(){return this._stage},M.prototype.source=function(){return this._source},M.prototype.clear=function(){var t=this;t._evicted.length=0,t._itemMap.forEach((function(e){t._evicted.push(e)})),t._evicted.forEach((function(e){t._unloadTile(e)})),t._itemMap.clear(),t._visible.clear(),t._previouslyVisible.clear(),t._pinMap.clear(),t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},M.prototype.clearNotPinned=function(){var t=this;t._evicted.length=0,t._itemMap.forEach((function(e){t._pinMap.has(e)||t._evicted.push(e)})),t._evicted.forEach((function(e){t._unloadTile(e)})),t._visible.clear(),t._previouslyVisible.clear(),t._evicted.length=0},M.prototype.startFrame=function(){if(this._state!==p&&this._state!==d)throw new Error("TextureStore: startFrame called out of sequence");this._state=d,this._delimCount++},M.prototype.markTile=function(t){if(this._state!==d&&this._state!==v)throw new Error("TextureStore: markTile called out of sequence");this._state=v;var e=this._itemMap.get(t),n=e&&e.texture(),r=e&&e.asset();n&&r&&n.refresh(t,r),this._newVisible.add(t)},M.prototype.endFrame=function(){if(this._state!==d&&this._state!==v&&this._state!==m)throw new Error("TextureStore: endFrame called out of sequence");this._state=m,this._delimCount--,this._delimCount||(this._update(),this._state=p)},M.prototype._update=function(){var t=this;t._noLongerVisible.length=0,t._visible.forEach((function(e){t._newVisible.has(e)||t._noLongerVisible.push(e)})),t._visibleAgain.length=0,t._newVisible.forEach((function(e){t._previouslyVisible.has(e)&&t._visibleAgain.push(e)})),t._visibleAgain.forEach((function(e){t._previouslyVisible.remove(e)})),t._evicted.length=0,t._noLongerVisible.forEach((function(e){var n=t._itemMap.get(e);if(n&&n.texture()){var r=t._previouslyVisible.add(e);null!=r&&t._evicted.push(r)}else n&&t._unloadTile(e)})),t._evicted.forEach((function(e){t._pinMap.has(e)||t._unloadTile(e)})),t._newVisible.forEach((function(e){t._itemMap.get(e)||t._loadTile(e)}));var e=t._visible;t._visible=t._newVisible,t._newVisible=e,t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},M.prototype._loadTile=function(t){if(this._itemMap.has(t))throw new Error("TextureStore: loading texture already in cache");var e=new w(this,t);this._itemMap.set(t,e)},M.prototype._unloadTile=function(t){var e=this._itemMap.del(t);if(!e)throw new Error("TextureStore: unloading texture not in cache");e.destroy()},M.prototype.asset=function(t){var e=this._itemMap.get(t);return e?e.asset():null},M.prototype.texture=function(t){var e=this._itemMap.get(t);return e?e.texture():null},M.prototype.pin=function(t){var e=(this._pinMap.get(t)||0)+1;return this._pinMap.set(t,e),this._itemMap.has(t)||this._loadTile(t),e},M.prototype.unpin=function(t){var e=this._pinMap.get(t);if(!e)throw new Error("TextureStore: unpin when not pinned");return--e>0?this._pinMap.set(t,e):(this._pinMap.del(t),this._visible.has(t)||this._previouslyVisible.has(t)||this._unloadTile(t)),e},M.prototype.query=function(t){var e=this._itemMap.get(t),n=this._pinMap.get(t)||0;return{visible:this._visible.has(t),previouslyVisible:this._previouslyVisible.has(t),hasAsset:null!=e&&null!=e.asset(),hasTexture:null!=e&&null!=e.texture(),pinned:0!==n,pinCount:n}},t.exports=M},qN4a:function(t,e,n){"use strict";var r=n("ItFr");function i(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Set: invalid capacity");this._capacity=this._capacity||64,this._buckets=[];for(var e=0;e<this._capacity;e++)this._buckets.push([]);this._size=0}i.prototype.add=function(t){for(var e=r(t.hash(),this._capacity),n=this._buckets[e],i=0;i<n.length;i++){var o=n[i];if(t.equals(o))return n[i]=t,o}return n.push(t),this._size++,null},i.prototype.remove=function(t){for(var e=r(t.hash(),this._capacity),n=this._buckets[e],i=0;i<n.length;i++){var o=n[i];if(t.equals(o)){for(var s=i;s<n.length-1;s++)n[s]=n[s+1];return n.length=n.length-1,this._size--,o}}return null},i.prototype.has=function(t){for(var e=r(t.hash(),this._capacity),n=this._buckets[e],i=0;i<n.length;i++){var o=n[i];if(t.equals(o))return!0}return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._buckets[t].length=0;this._size=0},i.prototype.forEach=function(t){for(var e=0,n=0;n<this._capacity;n++)for(var r=this._buckets[n],i=0;i<r.length;i++)t(r[i]),e+=1;return e},t.exports=i},quiO:function(t,e,n){"use strict";function r(){this._renderers={}}r.prototype.set=function(t,e,n){this._renderers[t]||(this._renderers[t]={}),this._renderers[t][e]=n},r.prototype.get=function(t,e){return this._renderers[t]&&this._renderers[t][e]||null},t.exports=r},rcVr:function(t,e,n){"use strict";var r=n("fnIc"),i=n("mQ4t"),o=n("ksFE");t.exports=function(t){switch(t.type){case"webgl":t.registerRenderer("flat","flat",i),t.registerRenderer("cube","rectilinear",r),t.registerRenderer("equirect","rectilinear",o);break;default:throw new Error("Unknown stage type: "+t.type)}}},t2RU:function(t,e,n){"use strict";var r=n("aGdX"),i={yawSpeed:.1,pitchSpeed:.1,fovSpeed:.1,yawAccel:.01,pitchAccel:.01,fovAccel:.01,targetPitch:0,targetFov:null};t.exports=function(t){var e=(t=r(t||{},i)).yawSpeed,n=t.pitchSpeed,o=t.fovSpeed,s=t.yawAccel,a=t.pitchAccel,h=t.fovAccel,u=t.targetPitch,c=t.targetFov;return function(){var t,r,i,l,f=0,p=0,d=0,v=0,m=0,_=0,y=0;return function(g,w){if(t=(w-f)/1e3,m=Math.min(p+t*s,e),r=m*t,g.yaw=g.yaw+r,null!=u&&g.pitch!==u){var M=.5*d*d/a;_=Math.abs(u-g.pitch)>M?Math.min(d+t*a,n):Math.max(d-t*a,0),i=_*t,u<g.pitch&&(g.pitch=Math.max(u,g.pitch-i)),u>g.pitch&&(g.pitch=Math.min(u,g.pitch+i))}if(null!=c&&g.fov!==u){var x=.5*v*v/h;y=Math.abs(c-g.fov)>x?Math.min(v+t*h,o):Math.max(v-t*h,0),l=y*t,c<g.fov&&(g.fov=Math.max(c,g.fov-l)),c>g.fov&&(g.fov=Math.min(c,g.fov+l))}return f=w,p=m,d=_,v=y,g}}}},t3FP:function(t,e,n){"use strict";var r=n("R8wE"),i=n("hwQt"),o=n("icZL"),s=n("IrFz"),a=n("p2RX"),h=n("fpI6").makeLevelList,u=n("fpI6").makeSelectableLevelList,c=n("CSCW"),l=n("GjHf"),f=n("w5Vv"),p=n("IOcx").vec3,d=n("IOcx").vec4,v={f:{x:0,y:0},b:{x:0,y:Math.PI},l:{x:0,y:Math.PI/2},r:{x:0,y:-Math.PI/2},u:{x:Math.PI/2,y:0},d:{x:-Math.PI/2,y:0}},m=p.create();function _(t,e,n,r){e&&p.rotateZ(t,t,m,e),n&&p.rotateX(t,t,m,n),r&&p.rotateY(t,t,m,r)}for(var y={},g=0;g<"fudlrb".length;g++){var w="fudlrb"[g],M=v[w],x=p.fromValues(0,0,-1);_(x,0,M.x,M.y),y[w]=x}var b={f:["l","r","u","d"],b:["r","l","u","d"],l:["b","f","u","d"],r:["f","b","u","d"],u:["l","r","b","f"],d:["l","r","f","b"]},E=[[0,1],[1,0],[0,-1],[-1,0]];function T(t,e,n,r,i){this.face=t,this.x=e,this.y=n,this.z=r,this._geometry=i,this._level=i.levelList[r]}function L(t){if(this.constructor.super_.call(this,t),this._size=t.size,this._tileSize=t.tileSize,this._size%this._tileSize!=0)throw new Error("Level size is not multiple of tile size: "+this._size+" "+this._tileSize)}function C(t){if("array"!==f(t))throw new Error("Level list must be an array");this.levelList=h(t,L),this.selectableLevelList=u(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new o(this),this._neighborsCache=new s(64),this._vec=d.create(),this._viewSize={}}T.prototype.rotX=function(){return v[this.face].x},T.prototype.rotY=function(){return v[this.face].y},T.prototype.centerX=function(){return(this.x+.5)/this._level.numHorizontalTiles()-.5},T.prototype.centerY=function(){return.5-(this.y+.5)/this._level.numVerticalTiles()},T.prototype.scaleX=function(){return 1/this._level.numHorizontalTiles()},T.prototype.scaleY=function(){return 1/this._level.numVerticalTiles()},T.prototype.vertices=function(t){t||(t=[p.create(),p.create(),p.create(),p.create()]);var e=v[this.face];function n(t,n,r){p.set(t,n,r,-.5),_(t,0,e.x,e.y)}var r=this.centerX()-this.scaleX()/2,i=this.centerX()+this.scaleX()/2,o=this.centerY()-this.scaleY()/2,s=this.centerY()+this.scaleY()/2;return n(t[0],r,s),n(t[1],i,s),n(t[2],i,o),n(t[3],r,o),t},T.prototype.parent=function(){if(0===this.z)return null;var t=this.face,e=this.z,n=this.x,r=this.y,i=this._geometry,o=i.levelList[e],s=i.levelList[e-1];return new T(t,Math.floor(n/o.numHorizontalTiles()*s.numHorizontalTiles()),Math.floor(r/o.numVerticalTiles()*s.numVerticalTiles()),e-1,i)},T.prototype.children=function(t){if(this.z===this._geometry.levelList.length-1)return null;var e=this.face,n=this.z,r=this.x,i=this.y,o=this._geometry,s=o.levelList[n],a=o.levelList[n+1],h=a.numHorizontalTiles()/s.numHorizontalTiles(),u=a.numVerticalTiles()/s.numVerticalTiles();t=t||[];for(var c=0;c<h;c++)for(var l=0;l<u;l++){var f=h*r+c,p=u*i+l,d=n+1;t.push(new T(e,f,p,d,o))}return t},T.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,n=e.get(this);if(n)return n;for(var r=t._vec,i=this.face,o=this.x,s=this.y,a=this.z,h=this._level,u=h.numHorizontalTiles(),l=h.numVerticalTiles(),f=[],d=0;d<E.length;d++){var m=o+E[d][0],y=s+E[d][1],g=a,w=i;if(m<0||m>=u||y<0||y>=l){var M,x=this.centerX(),L=this.centerY();m<0?(p.set(r,-.5,L,-.5),w=b[i][0]):m>=u?(p.set(r,.5,L,-.5),w=b[i][1]):y<0?(p.set(r,x,.5,-.5),w=b[i][2]):y>=l&&(p.set(r,x,-.5,-.5),w=b[i][3]),_(r,0,(M=v[i]).x,M.y),_(r,0,-(M=v[w]).x,-M.y),m=c(Math.floor((.5+r[0])*u),0,u-1),y=c(Math.floor((.5-r[1])*l),0,l-1)}f.push(new T(w,m,y,g,t))}return e.set(this,f),f},T.prototype.hash=function(){return i("fudlrb".indexOf(this.face),this.z,this.y,this.x)},T.prototype.equals=function(t){return this._geometry===t._geometry&&this.face===t.face&&this.z===t.z&&this.y===t.y&&this.x===t.x},T.prototype.cmp=function(t){return l(this.z,t.z)||l("fudlrb".indexOf(this.face),"fudlrb".indexOf(t.face))||l(this.y,t.y)||l(this.x,t.x)},T.prototype.str=function(){return"CubeTile("+tile.face+", "+tile.x+", "+tile.y+", "+tile.z+")"},r(L,a),L.prototype.width=function(){return this._size},L.prototype.height=function(){return this._size},L.prototype.tileWidth=function(){return this._tileSize},L.prototype.tileHeight=function(){return this._tileSize},L.prototype._validateWithParentLevel=function(t){var e=this.width(),n=this.height(),r=this.tileWidth(),i=this.tileHeight(),o=this.numHorizontalTiles(),s=this.numVerticalTiles(),a=t.width(),h=t.height(),u=t.tileWidth(),c=t.tileHeight(),l=t.numHorizontalTiles(),f=t.numVerticalTiles();if(e%a!=0)throw new Error("Level width must be multiple of parent level: "+e+" vs. "+a);if(n%h!=0)throw new Error("Level height must be multiple of parent level: "+n+" vs. "+h);if(o%l!=0)throw new Error("Number of horizontal tiles must be multiple of parent level: "+o+" ("+e+"/"+r+") vs. "+l+" ("+a+"/"+u+")");if(s%f!=0)throw new Error("Number of vertical tiles must be multiple of parent level: "+s+" ("+n+"/"+i+") vs. "+f+" ("+h+"/"+c+")")},C.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var n=this.levelList[e];t=Math.max(t,n.tileWidth,n.tileHeight)}return t},C.prototype.levelTiles=function(t,e){var n=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,i=t.numVerticalTiles()-1;e=e||[];for(var o=0;o<"fudlrb".length;o++)for(var s="fudlrb"[o],a=0;a<=r;a++)for(var h=0;h<=i;h++)e.push(new T(s,a,h,n,this));return e},C.prototype._closestTile=function(t,e){var n=this._vec;d.set(n,0,0,1,1),d.transformMat4(n,n,t.inverseProjection());var r=1/0,i=null;for(var o in y){var s=y[o],a=1-p.dot(s,n);a<r&&(r=a,i=o)}for(var h=Math.max(Math.abs(n[0]),Math.abs(n[1]),Math.abs(n[2]))/.5,u=0;u<3;u++)n[u]=n[u]/h;var l=v[i];_(n,0,-l.x,-l.y);var f=this.levelList.indexOf(e),m=e.numHorizontalTiles(),g=e.numVerticalTiles();return new T(i,c(Math.floor((.5+n[0])*m),0,m-1),c(Math.floor((.5-n[1])*g),0,g-1),f,this)},C.prototype.visibleTiles=function(t,e,n){var r=this._viewSize,i=this._tileSearcher;if(n=n||[],t.size(r),0===r.width||0===r.height)return n;var o=this._closestTile(t,e);if(!i.search(t,o,n))throw new Error("Starting tile is not visible");return n},C.Tile=C.prototype.Tile=T,C.type=C.prototype.type="cube",T.type=T.prototype.type="cube",t.exports=C},tuss:function(t,e,n){"use strict";function r(t,e,n,r){var i=Math.atan(e/t);r[0]=n*Math.cos(i),r[1]=n*Math.sin(i)}t.exports={maxFriction:function(t,e,n,i,o){var s=Math.sqrt(Math.pow(e,2)+Math.pow(n,2));r(e,n,t=Math.max(t,s/i),o),o[0]=Math.abs(o[0]),o[1]=Math.abs(o[1])},changeVectorNorm:r}},uPEp:function(t,e,n){"use strict";function r(){this.velocity=null,this.friction=null,this.offset=null}r.equals=function(t,e){return t.velocity===e.velocity&&t.friction===e.friction&&t.offset===e.offset},r.prototype.equals=function(t){return r.equals(this,t)},r.prototype.update=function(t,e){t.offset&&(this.offset=this.offset||0,this.offset+=t.offset);var n=this.offsetFromVelocity(e);n&&(this.offset=this.offset||0,this.offset+=n),this.velocity=t.velocity,this.friction=t.friction},r.prototype.reset=function(){this.velocity=null,this.friction=null,this.offset=null},r.prototype.velocityAfter=function(t){return this.velocity?this.friction?function(t,e){if(t<0)return Math.min(0,t+e);if(t>0)return Math.max(0,t-e);return 0}(this.velocity,this.friction*t):this.velocity:null},r.prototype.offsetFromVelocity=function(t){t=Math.min(t,this.nullVelocityTime());var e=this.velocityAfter(t);return(this.velocity+e)/2*t},r.prototype.nullVelocityTime=function(){return null==this.velocity?0:this.velocity&&!this.friction?1/0:Math.abs(this.velocity/this.friction)},t.exports=r},w5Vv:function(t,e,n){"use strict";t.exports=function(t){var e=typeof t;if("object"===e){if(null===t)return"null";if("[object Array]"===Object.prototype.toString.call(t))return"array";if("[object RegExp]"===Object.prototype.toString.call(t))return"regexp"}return e}},wIDX:function(t,e,n){"use strict";t.exports=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t&&t.deviceXDPI&&t.logicalXDPI)return t.deviceXDPI/t.logicalXDPI;if(t&&t.systemXDPI&&t.logicalXDPI)return t.systemXDPI/t.logicalXDPI}return 1}},wJyA:function(t,e,n){"use strict";var r=n("l8c5"),i=n("9MkR"),o=n("8HNk"),s=n("Lbfq"),a=n("33aB"),h=n("dBP0"),u=n("Oxtx"),c=n("JZIl"),l=n("Mzh7"),f=n("rcVr"),p=n("Aui5").setOverflowHidden,d=n("Aui5").setAbsolute,v=n("Aui5").setFullSize,m=n("LAUC"),_=n("GaDe"),y=n("77Rc");function g(t,e){e=e||{},this._domElement=t,p(t),this._stage=new h(e.stage),f(this._stage),this._domElement.appendChild(this._stage.domElement()),this._controlContainer=document.createElement("div"),d(this._controlContainer),v(this._controlContainer),t.appendChild(this._controlContainer),this._size={},this.updateSize(),this._updateSizeListener=this.updateSize.bind(this),window.addEventListener("resize",this._updateSizeListener),this._renderLoop=new i(this._stage),this._controls=new o,this._controlMethods=l(this._controls,this._controlContainer,e.controls),this._controls.attach(this._renderLoop),this._hammerManagerTouch=c.get(this._controlContainer,"touch"),this._hammerManagerMouse=c.get(this._controlContainer,"mouse"),this._dragCursor=new u(this._controls,"mouseViewDrag",t,e.cursors&&e.cursors.drag||{}),this._renderLoop.start(),this._scenes=[],this._currentScene=null,this._replacedScene=null,this._cancelCurrentTween=null,this._layerChangeHandler=this._updateSceneLayers.bind(this),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._idleTimer=new a,this._idleTimer.start(),this._resetIdleTimerHandler=this._resetIdleTimer.bind(this),this.addEventListener("viewChange",this._resetIdleTimerHandler),this._triggerIdleTimerHandler=this._triggerIdleTimer.bind(this),this._idleTimer.addEventListener("timeout",this._triggerIdleTimerHandler),this._stopMovementHandler=this.stopMovement.bind(this),this._controls.addEventListener("active",this._stopMovementHandler),this.addEventListener("sceneChange",this._stopMovementHandler),this._idleMovement=null}r(g),g.prototype.destroy=function(){for(var t in window.removeEventListener("resize",this._updateSizeListener),this._currentScene&&this._removeSceneEventListeners(this._currentScene),this._replacedScene&&this._removeSceneEventListeners(this._replacedScene),this._dragCursor.destroy(),this._controlMethods)this._controlMethods[t].destroy();for(;this._scenes.length;)this.destroyScene(this._scenes[0]);this._domElement.removeChild(this._stage.domElement()),this._stage.destroy(),this._renderLoop.destroy(),this._controls.destroy(),this._controls=null,this._cancelCurrentTween&&this._cancelCurrentTween(),y(this)},g.prototype.updateSize=function(){var t=this._size;t.width=this._domElement.clientWidth,t.height=this._domElement.clientHeight,this._stage.setSize(t)},g.prototype.stage=function(){return this._stage},g.prototype.renderLoop=function(){return this._renderLoop},g.prototype.controls=function(){return this._controls},g.prototype.domElement=function(){return this._domElement},g.prototype.createScene=function(t){t=t||{};var e=this.createEmptyScene({view:t.view});return e.createLayer({source:t.source,geometry:t.geometry,pinFirstLevel:t.pinFirstLevel,textureStoreOpts:t.textureStoreOpts,layerOpts:t.layerOpts}),e},g.prototype.createEmptyScene=function(t){var e=new s(this,(t=t||{}).view);return this._scenes.push(e),e},g.prototype._updateSceneLayers=function(){var t,e,n=this._stage,r=this._currentScene,i=this._replacedScene,o=n.listLayers(),s=[];if(i&&(s=s.concat(i.listLayers())),r&&(s=s.concat(r.listLayers())),1!==Math.abs(o.length-s.length))throw new Error("Stage and scene out of sync");if(s.length<o.length)for(t=0;t<o.length;t++)if(e=o[t],s.indexOf(e)<0){this._removeLayerFromStage(e);break}if(s.length>o.length)for(t=0;t<s.length;t++)e=s[t],o.indexOf(e)<0&&this._addLayerToStage(e,t)},g.prototype._addLayerToStage=function(t,e){t.pinFirstLevel(),this._stage.addLayer(t,e)},g.prototype._removeLayerFromStage=function(t){this._stage.removeLayer(t),t.unpinFirstLevel(),t.textureStore().clearNotPinned()},g.prototype._addSceneEventListeners=function(t){t.addEventListener("layerChange",this._layerChangeHandler),t.addEventListener("viewChange",this._viewChangeHandler)},g.prototype._removeSceneEventListeners=function(t){t.removeEventListener("layerChange",this._layerChangeHandler),t.removeEventListener("viewChange",this._viewChangeHandler)},g.prototype.destroyScene=function(t){var e,n,r=this._scenes.indexOf(t);if(r<0)throw new Error("No such scene in viewer");if(this._currentScene===t){for(this._removeSceneEventListeners(t),n=t.listLayers(),e=0;e<n.length;e++)this._removeLayerFromStage(n[e]);this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null),this._currentScene=null,this.emit("sceneChange")}if(this._replacedScene===t){for(this._removeSceneEventListeners(t),n=t.listLayers(),e=0;e<n.length;e++)this._removeLayerFromStage(n[e]);this._replacedScene=null}this._scenes.splice(r,1),t.destroy()},g.prototype.destroyAllScenes=function(){for(;this._scenes.length>0;)this.destroyScene(this._scenes[0])},g.prototype.hasScene=function(t){return this._scenes.indexOf(t)>=0},g.prototype.listScenes=function(){return[].concat(this._scenes)},g.prototype.scene=function(){return this._currentScene},g.prototype.view=function(){var t=this._currentScene;return t?t.view():null},g.prototype.lookTo=function(t,e,n){var r=this._currentScene;r&&r.lookTo(t,e,n)},g.prototype.startMovement=function(t,e){var n=this._currentScene;n&&n.startMovement(t,e)},g.prototype.stopMovement=function(){var t=this._currentScene;t&&t.stopMovement()},g.prototype.movement=function(){var t=this._currentScene;if(t)return t.movement()},g.prototype.setIdleMovement=function(t,e){this._idleTimer.setDuration(t),this._idleMovement=e},g.prototype.breakIdleMovement=function(){this.stopMovement(),this._resetIdleTimer()},g.prototype._resetIdleTimer=function(){this._idleTimer.start()},g.prototype._triggerIdleTimer=function(){var t=this._idleMovement;t&&this.startMovement(t)};function w(t,e,n){e.listLayers().forEach((function(e){e.mergeEffects({opacity:t})})),e._hotspotContainer.domElement().style.opacity=t}g.prototype.switchScene=function(t,e,n){var r=this;e=e||{},n=n||_;var i=this._stage,o=this._currentScene;if(o!==t){if(this._scenes.indexOf(t)<0)throw new Error("No such scene in viewer");this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null);var s=o?o.listLayers():[],a=t.listLayers(),h=i.listLayers();if(o&&(h.length!==s.length||h.length>1&&h[0]!=s[0]))throw new Error("Stage not in sync with viewer");for(var u=null!=e.transitionDuration?e.transitionDuration:1e3,c=null!=e.transitionUpdate?e.transitionUpdate:w,l=0;l<a.length;l++)this._addLayerToStage(a[l]);this._cancelCurrentTween=m(u,(function(e){c(e,t,o)}),(function(){if(r._replacedScene){r._removeSceneEventListeners(r._replacedScene),s=r._replacedScene.listLayers();for(var t=0;t<s.length;t++)r._removeLayerFromStage(s[t]);r._replacedScene=null}r._cancelCurrentTween=null,n()})),this._currentScene=t,this._replacedScene=o,this.emit("sceneChange"),this.emit("viewChange"),this._addSceneEventListeners(t)}else n()},t.exports=g},wkbN:function(t,e,n){"use strict";var r=n("l8c5"),i=n("uPEp"),o=n("77Rc");function s(t,e,n,r,o){if(!t)throw new Error("KeyControlMethod: keyCode must be defined");if(!e)throw new Error("KeyControlMethod: parameter must be defined");if(!n)throw new Error("KeyControlMethod: velocity must be defined");if(!r)throw new Error("KeyControlMethod: friction must be defined");o=o||document,this._keyCode=t,this._parameter=e,this._velocity=n,this._friction=r,this._element=o,this._keydownHandler=this._handlePress.bind(this),this._keyupHandler=this._handleRelease.bind(this),this._blurHandler=this._handleBlur.bind(this),this._element.addEventListener("keydown",this._keydownHandler),this._element.addEventListener("keyup",this._keyupHandler),window.addEventListener("blur",this._blurHandler),this._dynamics=new i,this._pressing=!1}r(s),s.prototype.destroy=function(){this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("keyup",this._keyupHandler),window.removeEventListener("blur",this._blurHandler),o(this)},s.prototype._handlePress=function(t){t.keyCode===this._keyCode&&(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))},s.prototype._handleRelease=function(t){t.keyCode===this._keyCode&&(this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1)},s.prototype._handleBlur=function(){this._dynamics.velocity=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive"),this._pressing=!1},t.exports=s},x8Mq:function(t,e,n){"use strict";t.exports=function(t,e){for(var n in e)t[n]=e[n];return t}},xqER:function(t,e,n){"use strict";t.exports=["attribute vec3 aVertexPosition;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uInvProjMatrix;","varying vec4 vRay;","void main(void) {","  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);","  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);","}"].join("\n")},xxJl:function(t,e,n){"use strict";var r=n("GaDe");t.exports=function(t){return function(){var e=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],n=arguments.length?arguments[arguments.length-1]:r,i=null,o=!1;function s(){var r=arguments[0];!r||o?n.apply(null,arguments):i=t.apply(null,e)}return e.push(s),s(!0),function(){o=!0,i.apply(null,arguments)}}}},yLV6:function(t,e,n){var r;
/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */!function(i,o,s,a){"use strict";var h=["","webkit","moz","MS","ms","o"],u=o.createElement("div"),c=Math.round,l=Math.abs,f=Date.now;function p(t,e,n){return setTimeout(g(t,n),e)}function d(t,e,n){return!!Array.isArray(t)&&(v(t,n[e],n),!0)}function v(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function m(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&void 0===t[r[i]])&&(t[r[i]]=e[r[i]]),i++;return t}function _(t,e){return m(t,e,!0)}function y(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&m(r,n)}function g(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function M(t,e){return void 0===t?e:t}function x(t,e,n){v(L(e),(function(e){t.addEventListener(e,n,!1)}))}function b(t,e,n){v(L(e),(function(e){t.removeEventListener(e,n,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function L(t){return t.trim().split(/\s+/g)}function C(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function S(t){return Array.prototype.slice.call(t,0)}function A(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];C(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function R(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<h.length;){if((r=(n=h[o])?n+i:e)in t)return r;o++}}var P=1;function I(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}var z="ontouchstart"in i,H=void 0!==R(i,"PointerEvent"),D=z&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),O=["x","y"],k=["clientX","clientY"];function F(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function q(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,s=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=X(e));i>1&&!n.firstMultiple?n.firstMultiple=X(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,h=e.center=V(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=j(a,h),e.distance=N(a,h),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=B(e.deltaX,e.deltaY),e.scale=s?(u=s.pointers,c=r,N(c[0],c[1],k)/N(u[0],u[1],k)):1,e.rotation=s?function(t,e){return j(e[1],e[0],k)-j(t[1],t[0],k)}(s.pointers,r):0,function(t,e){var n,r,i,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(a>25||void 0===s.velocity)){var h=s.deltaX-e.deltaX,u=s.deltaY-e.deltaY,c=function(t,e,n){return{x:e/t||0,y:n/t||0}}(a,h,u);r=c.x,i=c.y,n=l(c.x)>l(c.y)?c.x:c.y,o=B(h,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var u,c;var p=t.element;E(e.srcEvent.target,p)&&(p=e.srcEvent.target);e.target=p}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function X(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:c(t.pointers[n].clientX),clientY:c(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:V(e),deltaX:t.deltaX,deltaY:t.deltaY}}function V(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:c(n/e),y:c(r/e)}}function B(t,e){return t===e?1:l(t)>=l(e)?t>0?2:4:e>0?8:16}function N(t,e,n){n||(n=O);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function j(t,e,n){n||(n=O);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}F.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(I(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4};function W(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.allow=!0,this.pressed=!1,F.apply(this,arguments)}y(W,F,{handler:function(t){var e=Y[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&this.allow&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var G={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},U={2:"touch",3:"pen",4:"mouse",5:"kinect"},K="pointerdown",Z="pointermove pointerup pointercancel";function Q(){this.evEl=K,this.evWin=Z,F.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&(K="MSPointerDown",Z="MSPointerMove MSPointerUp MSPointerCancel"),y(Q,F,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=G[r],o=U[t.pointerType]||t.pointerType,s="touch"==o,a=C(e,t.pointerId,"pointerId");1&i&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var J={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function $(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,F.apply(this,arguments)}function tt(t,e){var n=S(t.touches),r=S(t.changedTouches);return 12&e&&(n=A(n.concat(r),"identifier",!0)),[n,r]}y($,F,{handler:function(t){var e=J[t.type];if(1===e&&(this.started=!0),this.started){var n=tt.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function nt(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},F.apply(this,arguments)}function rt(t,e){var n=S(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=S(t.changedTouches),a=[],h=this.target;if(o=n.filter((function(t){return E(t.target,h)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[A(o.concat(a),"identifier",!0),a]:void 0}function it(){F.apply(this,arguments);var t=g(this.handler,this);this.touch=new nt(this.manager,t),this.mouse=new W(this.manager,t)}y(nt,F,{handler:function(t){var e=et[t.type],n=rt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),y(it,F,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(r)this.mouse.allow=!1;else if(i&&!this.mouse.allow)return;12&e&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ot=R(u.style,"touchAction"),st=void 0!==ot;function at(t,e){this.manager=t,this.set(e)}at.prototype={set:function(t){"compute"==t&&(t=this.compute()),st&&(this.manager.element.style[ot]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,"none"))return"none";var e=T(t,"pan-x"),n=T(t,"pan-y");if(e&&n)return"pan-x pan-y";if(e||n)return e?"pan-x":"pan-y";if(T(t,"manipulation"))return"manipulation";return"auto"}(t.join(" "))},preventDefaults:function(t){if(!st){var e=t.srcEvent,n=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,i=T(r,"none"),o=T(r,"pan-y"),s=T(r,"pan-x");return i||o&&6&n||s&&24&n?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};function ht(t){this.id=P++,this.manager=null,this.options=_(t||{},this.defaults),this.options.enable=M(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ut(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function ct(t,e){var n=e.manager;return n?n.get(t):t}function lt(){ht.apply(this,arguments)}function ft(){lt.apply(this,arguments),this.pX=null,this.pY=null}function pt(){lt.apply(this,arguments)}function dt(){ht.apply(this,arguments),this._timer=null,this._input=null}function vt(){lt.apply(this,arguments)}function mt(){lt.apply(this,arguments)}function _t(){ht.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function yt(t,e){return(e=e||{}).recognizers=M(e.recognizers,yt.defaults.preset),new gt(t,e)}ht.prototype={defaults:{},set:function(t){return m(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=ct(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)||(t=ct(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===C(e,t=ct(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=ct(t,this);var e=C(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(r){e.manager.emit(e.options.event+(r?function(t){if(16&t)return"cancel";if(8&t)return"end";if(4&t)return"move";if(2&t)return"start";return""}(n):""),t)}n<8&&r(!0),r(),n>=8&&r(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=m({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},y(lt,ht,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:32}}),y(ft,lt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return lt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=ut(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),y(pt,lt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),y(dt,ht,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),y(vt,lt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),y(mt,lt,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:30,pointers:1},getTouchAction:function(){return ft.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.velocity:6&n?e=t.velocityX:24&n&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&l(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=ut(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),y(_t,ht,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),yt.VERSION="2.0.4",yt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[vt,{enable:!1}],[pt,{enable:!1},["rotate"]],[mt,{direction:6}],[ft,{direction:6},["swipe"]],[_t],[_t,{event:"doubletap",taps:2},["tap"]],[dt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function gt(t,e){var n;e=e||{},this.options=_(e,yt.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=new((n=this).options.inputClass||(H?Q:D?nt:z?it:W))(n,q),this.touchAction=new at(this,this.options.touchAction),wt(this,!0),v(e.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function wt(t,e){var n=t.element;v(t.options.cssProps,(function(t,r){n.style[R(n.style,r)]=e?t:""}))}gt.prototype={set:function(t){return m(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof ht)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(C(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return v(L(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this},off:function(t,e){var n=this.handlers;return v(L(t),(function(t){e?n[t].splice(C(n[t],e),1):delete n[t]})),this},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},m(yt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:gt,Input:F,TouchAction:at,TouchInput:nt,MouseInput:W,PointerEventInput:Q,TouchMouseInput:it,SingleTouchInput:$,Recognizer:ht,AttrRecognizer:lt,Tap:_t,Pan:ft,Swipe:mt,Pinch:pt,Rotate:vt,Press:dt,on:x,off:b,each:v,merge:_,extend:m,inherit:y,bindFn:g,prefixed:R}),n("PDX0")?void 0===(r=function(){return yt}.call(e,n,e,t))||(t.exports=r):t.exports?t.exports=yt:i.Hammer=yt}(window,document)},yblz:function(t,e,n){"use strict";t.exports=function(t){return function(e){var n,r;try{r=t()}catch(t){n=t}finally{n?e(n):e(null,r)}}}}}]);