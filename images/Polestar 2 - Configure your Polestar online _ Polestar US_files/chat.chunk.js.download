(window.webpackJsonpPtm=window.webpackJsonpPtm||[]).push([[0],{"3CS/":function(e,t,n){"use strict";n.r(t);var a,i=n("+aKL");!function(e){e.PRODUCTION="production",e.STAGING="staging",e.DEV="dev"}(a||(a={}));var o=()=>{const e="production";if(t=e,!Object.values(a).includes(t))throw new Error(`Unexpected ENV "${e}", expecting one of ${Object.values(a).join(", ")}`);var t;return e},d=n("lSNA"),r=n.n(d);const c=(e,t)=>Object.getOwnPropertyNames(e).includes(t)?e[t]:void 0;function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const l={baseCoreURL:"https://polestar-crm.my.salesforce.com",orgId:"00D4J0000001kb4",deploymentId:"5724J0000000KSc",baseLiveAgentContentURL:"https://c.la1-c2-lo2.salesforceliveagent.com/content",baseLiveAgentURL:"https://d.la1-c2-lo2.salesforceliveagent.com/chat"},u={baseCoreURL:"https://polestar-crm--uat.my.salesforce.com",orgId:"00D3H0000008lOv",deploymentId:"5723H0000004CK5",baseLiveAgentContentURL:"https://c.la1-c1cs-lo3.salesforceliveagent.com/content",baseLiveAgentURL:"https://d.la1-c1cs-lo3.salesforceliveagent.com/chat"},p={en:{language:"en",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Loading..",communityEndpointURL:"https://polestarcrm.secure.force.com/ukwebchat",eswConfigDevName:"UK_Web_Chat_Group",buttonId:"5734J0000000Lm8",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jaUAC_16f85047603"},se:{language:"sv",defaultMinimizedText:"Chatta",disabledMinimizedText:"Chatta",loadingText:"Laddar..",communityEndpointURL:"https://polestarcrm.secure.force.com/liveAgentSetupFlow",eswConfigDevName:"SE_Web_Chat_Group",buttonId:"5734J0000000Lm3",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jVUAS_16f8504138e"},uk:{language:"en-GB",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Loading..",communityEndpointURL:o()===a.PRODUCTION?"https://polestarcrm.secure.force.com/ukwebchat":"https://staging-polestarcrm.cs110.force.com/ukwebchat",eswConfigDevName:"UK_Web_Chat_Group",buttonId:"5734J0000000Lm8",eswLiveAgentDevName:o()===a.PRODUCTION?"EmbeddedServiceLiveAgent_Parent04I4J000000L8jaUAC_16f85047603":"EmbeddedServiceLiveAgent_Parent04I0C00000001z5UAA_17c9905c8db"},de:{language:"de",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Wird geladen..",communityEndpointURL:"https://polestarcrm.secure.force.com/dewebchat",eswConfigDevName:"DE_Web_Chat_Group",buttonId:"5734J0000000Llo",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jGUAS_16f850256e3"},"fr-be":{language:"fr-BE",defaultMinimizedText:"Chatter",disabledMinimizedText:"Chatter",loadingText:"Chargement..",communityEndpointURL:"https://polestarcrm.secure.force.com/befrwebchat",eswConfigDevName:"BE_FR_Web_Chat_Group",buttonId:"5734J0000000LlU",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8j1UAC_16f84ff745a"},"nl-be":{language:"nl-BE",defaultMinimizedText:"Chatten",disabledMinimizedText:"Chatten",loadingText:"Aan het laden..",communityEndpointURL:"https://polestarcrm.secure.force.com/benlwebchat",eswConfigDevName:"BE_NL_Web_Chat_Group",buttonId:"5734J0000000LlZ",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8j6UAC_16f85015bde"},no:{language:"no",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Laster..",communityEndpointURL:"https://polestarcrm.secure.force.com/nowebchat",eswConfigDevName:"NO_Web_Chat_Group",buttonId:"5734J0000000Lly",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jQUAS_16f850387f9"},nl:{language:"nl-NL",defaultMinimizedText:"Chatten",disabledMinimizedText:"Chatten",loadingText:"Aan het laden..",communityEndpointURL:"https://polestarcrm.secure.force.com/nlwebchat",eswConfigDevName:"NL_Web_Chat_Group",buttonId:"5734J0000000Llt",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jLUAS_16f8502d311"},"fr-ch":{language:"fr-CH",defaultMinimizedText:"Chatter",disabledMinimizedText:"Chatter",loadingText:"Chargement..",communityEndpointURL:"https://polestarcrm.secure.force.com/chfrwebchat",eswConfigDevName:"CH_FR_Web_Chat_Group",buttonId:"5734J0000000M84",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8xuUAC_17067dddcb8"},"de-ch":{language:"de-CH",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Wird geladen..",communityEndpointURL:"https://polestarcrm.secure.force.com/chdewebchat",eswConfigDevName:"CH_DE_Web_Chat_Group",buttonId:"5734J0000000M7u",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8xkUAC_17067db11d7"},"it-ch":{language:"it-CH",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Carica..",communityEndpointURL:"https://polestarcrm.secure.force.com/chitwebchat",eswConfigDevName:"CH_IT_Web_Chat_Group",buttonId:"5734J0000000M7z",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8xpUAC_17067db7cb9"},at:{language:"de-AT",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Wird geladen..",communityEndpointURL:"https://polestarcrm.secure.force.com/atwebchat",eswConfigDevName:"AT_Web_Chat_Group",buttonId:"5734J000000kAJ5",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000kA7yUAE_17849990cd4"},dk:{language:"da",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"IndlÃ¦ser..",communityEndpointURL:"https://polestarcrm.secure.force.com/dkwebchat",eswConfigDevName:"DK_Web_Chat_Group",buttonId:"5734J000000kAJ0",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000kA7tUAE_178454131e4"},fi:{language:"fi",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Ladataan..",communityEndpointURL:"https://polestarcrm.secure.force.com/fiwebchat",eswConfigDevName:"FI_Web_Chat_Group",buttonId:"5734J000000kAIv",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000kA7oUAE_178411f0123"},us:{language:"en_US",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Loading..",communityEndpointURL:"https://polestarcrm.secure.force.com/uswebchat",eswConfigDevName:"US_Web_Chat_Group",buttonId:"5734J0000000LmD",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jfUAC_16f8504e2c5"},"en-ca":{language:"en_US",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Loading..",communityEndpointURL:"https://polestarcrm.secure.force.com/caenwebchat",eswConfigDevName:"CA_EN_Web_Chat_Group",buttonId:"5734J0000000Lle",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jBUAS_16f8501cf7b"},"fr-ca":{language:"fr",defaultMinimizedText:"Chatter",disabledMinimizedText:"Chatter",loadingText:"Chargement..",communityEndpointURL:"https://polestarcrm.secure.force.com/cafrwebchat",eswConfigDevName:"CA_FR_Web_Chat_Group",buttonId:"5734J0000000Llj",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J000000L8jkUAC_16f8511e5f3"},"fr-lu":{language:"fr",defaultMinimizedText:"Chatter",disabledMinimizedText:"Chatter",loadingText:"Chargement..",communityEndpointURL:"https://polestarcrm.secure.force.com/lufrwebchat",eswConfigDevName:"LU_FR_Web_Chat_Group",buttonId:"5734J000000H8ys",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J0000008aI9UAI_17a6129d4ce"},au:{language:"en",defaultMinimizedText:"Chat",disabledMinimizedText:"Chat",loadingText:"Loading..",communityEndpointURL:"https://polestarcrm.secure.force.com/auwebchat",eswConfigDevName:"AU_Web_Chat_Group",buttonId:"5734J0000008irO",eswLiveAgentDevName:"EmbeddedServiceLiveAgent_Parent04I4J0000000AYtUAM_17b6283808d"}};var h=(e,t)=>{const n=c(p,e.locale);if(n)return m(m({},t===a.PRODUCTION?l:u),n)};const g=()=>{if(window.embedded_svc&&!window.embedded_svc.componentInitInProgress&&!document.getElementsByClassName("embeddedServiceSidebar").length){window.embedded_svc.componentInitInProgress=!0;try{window.embedded_svc.utils.isCommunityOrSite()&&Object.keys(window.embedded_svc.liveAgentAPI.inviteButton).length?window.dispatchEvent(new CustomEvent("onStartChatFromInvitation",{detail:{bubbles:!0,composed:!1}})):(window.embedded_svc.checkAuthentication(),window.embedded_svc.utils.fireEvent("onHelpButtonClick"))}catch(e){window.embedded_svc.componentInitInProgress=!1}}};var v=(e,t)=>{if(e.querySelector(".ptm-cloned-chat-button"))return;const n=document.querySelector("body > .embeddedServiceHelpButton");if(!n)return;const a=n.cloneNode(!0);a.classList.add("ptm-cloned-chat-button"),t?e.insertBefore(a,t):e.appendChild(a);const i=a.querySelector(".uiButton");return null==i||i.addEventListener("click",g),a};var b=()=>{const e=!(null===(t=window.embedded_svc)||void 0===t||!t.settings.agentAvailableOnButtonClick);var t;document.querySelectorAll(".ptm-chat-status-svg-dot").forEach(t=>{t.classList.toggle("ptm-chat-status-svg-dot--online",e)});document.querySelectorAll(".ptm-cloned-chat-button .uiButton").forEach(t=>{const n=t.classList;n.toggle("helpButtonDisabled",!e),n.toggle("helpButtonEnabled",e)})};var f,w=()=>{(()=>{const e=document.querySelector('[data-tpl="menu"] button svg')||document.querySelector('[data-track-button="support"] svg');if(!e)return;if(e.querySelector(".ptm-chat-status-svg-dot"))return;if(!document.querySelector(".embeddedServiceHelpButton"))return;const t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.classList.add("ptm-chat-status-svg-dot"),t.setAttribute("cx","4px"),t.setAttribute("cy","4px"),t.setAttribute("r","3px"),t.style.strokeWidth="1.5px",e.appendChild(t)})(),window.placeChatButton||(window.placeChatButton=()=>{})};!function(e){e.TOP_LEFT="TOP_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.HELP_BUTTON="HELP_BUTTON"}(f||(f={}));var T=()=>window.location.pathname.match(/\/(?:preconfigured-cars|preowned-cars)(?:\/|$)/i)?f.TOP_LEFT:window.location.pathname.match(/\/(?:configurator|order|checkout)(?:\/|$)/)?f.HELP_BUTTON:f.BOTTOM_RIGHT;const A=e=>t=>{const n=v(t);null==n||n.classList.add("ptm-cloned-chat-button--"+e)};var L=()=>{const e=Array.from(document.querySelectorAll("#chat-button-placeholder, .chat-button-placeholder--static")),t=Array.from(document.querySelectorAll("#chat-btn-placeholder, .chat-button-placeholder--floating"));if(T()===f.BOTTOM_RIGHT&&!t.length){const e=document.createElement("div");e.classList.add("chat-button-placeholder--floating"),document.body.appendChild(e),t.push(e)}e.forEach(A("static")),t.forEach(A("floating"))};var _,C=()=>{const e=document.querySelector('button[title="menu"]'),t=null==e?void 0:e.parentNode,n=null==t?void 0:t.lastChild;if(!t||!n)return;const a=v(t);null==a||a.classList.add("ptm-cloned-chat-button--top-left")};!function(e){e.MONDAY="MONDAY",e.TUESDAY="TUESDAY",e.WEDNESDAY="WEDNESDAY",e.THURSDAY="THURSDAY",e.FRIDAY="FRIDAY",e.SATURDAY="SATURDAY",e.SUNDAY="SUNDAY"}(_||(_={}));const y={1:_.MONDAY,2:_.TUESDAY,3:_.WEDNESDAY,4:_.THURSDAY,5:_.FRIDAY,6:_.SATURDAY,7:_.SUNDAY};var E;!function(e){e.OPEN="OPEN",e.CLOSED="CLOSED"}(E||(E={}));var O=(e,t)=>{if(!new Date(t))throw new Error(`Invalid timezone "${t}", expected "Region/City"`);return new Date(new Date(e).toLocaleString("en-US",{timeZone:t}))};var D=e=>({dateFrom:t,dateThrough:n})=>{const a=new Date(t),i=n?new Date(n):a,o=new Date(i.getTime()+864e5);return a<=e&&e<o};var S=(e,t)=>{var n;if(!e)return!1;const a=O(t,e.timezone),i=a.getDay(),o=a.getDate(),d=a.getMonth(),r=a.getFullYear(),s=c(y,""+i),m=c(e.normalOpeningTimes||{},s),l=null===(n=e.specialOpeningTimes)||void 0===n?void 0:n.find(D(a)),u=void 0!==l?l.time:m;if(!u||"boolean"==typeof u)return!!u;const[p,h]=u.OPEN.split(":"),[g,v]=u.CLOSED.split(":"),b=new Date(r,d,o,parseInt(p,10),parseInt(h,10),0),f=new Date(r,d,o,parseInt(g,10),parseInt(v,10),0);return b<=a&&a<f};var N=async e=>{const t=!!e&&S(e,new Date);document.querySelectorAll(".ptm-cloned-chat-button").forEach(e=>{e.classList.toggle("ptm-cloned-chat-button--closed",!t)})};const U="https://graphql.datocms.com";var I=()=>U;const x=e=>("00"+e).slice(-2),M=e=>{if(!(""+e).match(/\d{4}-\d{1,2}-\d{1,2}/))throw new Error(`Unsupported date format, expecting YYYY-MM-DD, got "${e}"`);return e},R=e=>{if(!e.includes("."))throw new Error(`Unsupported time format: expecting HH.MM( A)?, got "${e}"`);const[t,n]=e.split("."),a=n.toLowerCase().includes("pm")?12:0;return`${x(parseInt(t,10)+a)}:${x(parseInt(n,10))}`},P=e=>{const t=e[0]||{};if(["shared_support_opening_time_open24h","shared_support_special_opening_time_open24h"].includes(t._modelApiKey))return!0;const n="opensAt"in t&&t.opensAt,a="closesAt"in t&&t.closesAt;return!(!n||!a)&&{OPEN:R(n),CLOSED:R(a)}},z=e=>{const{dateFrom:t,dateThrough:n}=e;return{dateFrom:M(t),dateThrough:n?M(n):void 0,time:P([e])}};var J=async e=>{var t;const n="\n    ... on SharedSupportOpeningTimeRecord {\n      _modelApiKey\n      opensAt\n      closesAt\n    }\n    ... on SharedSupportOpeningTimeOpen24hRecord { _modelApiKey }\n  ",a=`{\n    sharedSupportOpeningTimetable(locale: ${e.cmsLocale}) {\n      timezone\n      phoneOpeningTimeMonday {${n}}\n      phoneOpeningTimeTuesday {${n}}\n      phoneOpeningTimeWednesday {${n}}\n      phoneOpeningTimeThursday {${n}}\n      phoneOpeningTimeFriday {${n}}\n      phoneOpeningTimeSaturday {${n}}\n      phoneOpeningTimeSunday {${n}}\n      chatOpeningHoursDiffer\n      chatOpeningTimeMonday {${n}}\n      chatOpeningTimeTuesday {${n}}\n      chatOpeningTimeWednesday {${n}}\n      chatOpeningTimeThursday {${n}}\n      chatOpeningTimeFriday {${n}}\n      chatOpeningTimeSaturday {${n}}\n      chatOpeningTimeSunday {${n}}\n      specialOpeningTimes {\n        ... on SharedSupportSpecialOpeningTimeRecord {\n          _modelApiKey\n          closesAt\n          opensAt\n          dateFrom\n          dateThrough\n        }\n        ... on SharedSupportSpecialOpeningTimeOpen24hRecord {\n          _modelApiKey\n          dateFrom\n          dateThrough\n        }\n      }\n    }\n  }`,i=await fetch(I(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer 5c0443e4f7f86f96e4ff0c9a3898eb"},body:JSON.stringify({query:a})});if(!i.ok)throw new Error("Failed to fetch opening times for chat: "+i.status);const o=await i.json();if(o.errors)throw new Error("Could not fetch opening times for chat: "+JSON.stringify(o.errors));const d=null==o||null===(t=o.data)||void 0===t?void 0:t.sharedSupportOpeningTimetable;if(!d)throw new Error("Failed to fetch opening times for chat: unexpected response: "+JSON.stringify(o));return(({timezone:e,phoneOpeningTimeMonday:t,phoneOpeningTimeTuesday:n,phoneOpeningTimeWednesday:a,phoneOpeningTimeThursday:i,phoneOpeningTimeFriday:o,phoneOpeningTimeSaturday:d,phoneOpeningTimeSunday:r,chatOpeningHoursDiffer:c,chatOpeningTimeMonday:s,chatOpeningTimeTuesday:m,chatOpeningTimeWednesday:l,chatOpeningTimeThursday:u,chatOpeningTimeFriday:p,chatOpeningTimeSaturday:h,chatOpeningTimeSunday:g,specialOpeningTimes:v})=>({timezone:e,normalOpeningTimes:{MONDAY:P(c?s:t),TUESDAY:P(c?m:n),WEDNESDAY:P(c?l:a),THURSDAY:P(c?u:i),FRIDAY:P(c?p:o),SATURDAY:P(c?h:d),SUNDAY:P(c?g:r)},specialOpeningTimes:(v||[]).map(z)}))(d)};var H=async()=>{const e=Object(i.a)(window.location);let t;J(e).then(e=>{t=e});const n=()=>{L(),T()===f.HELP_BUTTON&&w(),T()===f.TOP_LEFT&&C(),N(t),b(),window.requestAnimationFrame(n)};n()};t.default=async()=>{const e=document.createElement("script");e.setAttribute("defer",""),e.setAttribute("src","https://polestar-crm--uat.my.salesforce.com/embeddedservice/5.0/esw.min.js"),e.onerror=()=>{window.dispatchEvent(new CustomEvent("chatScriptError",{detail:{bubbles:!0,composed:!1}}))},e.onload=async()=>{if(!window.embedded_svc)return void console.warn("Cannot instantiate chat, missing window.embedded_svc");const e=Object(i.a)(window.location),t=o(),n=h(e,t);if(!n)return;const a={displayHelpButton:!0,enabledFeatures:["LiveAgent"],entryFeature:"LiveAgent",extraPrechatInfo:[{entityFieldMaps:[{doCreate:!1,doFind:!0,fieldName:"LastName",isExactMatch:!0,label:"Last Name"},{doCreate:!1,doFind:!0,fieldName:"FirstName",isExactMatch:!0,label:"First Name"},{doCreate:!1,doFind:!0,fieldName:"Email",isExactMatch:!0,label:"Email"}],entityName:"Contact"}],language:n.language,defaultMinimizedText:n.defaultMinimizedText,disabledMinimizedText:n.disabledMinimizedText,loadingText:n.loadingText};Object.assign(window.embedded_svc.settings,a),window.embedded_svc.init(n.baseCoreURL,n.communityEndpointURL,"https://service.force.com",n.orgId,n.eswConfigDevName,{baseLiveAgentContentURL:n.baseLiveAgentContentURL,baseLiveAgentURL:n.baseLiveAgentURL,deploymentId:n.deploymentId,buttonId:n.buttonId,eswLiveAgentDevName:n.eswLiveAgentDevName,isOfflineSupportEnabled:!1}),window.embedded_svc.addEventHandler("onHelpButtonClick",()=>{window.dataLayer.push({event:"chat.click"})}),window.embedded_svc.addEventHandler("onChatEstablished",()=>{window.dataLayer.push({event:"chat.established"})}),window.embedded_svc.addEventHandler("onChasitorMessage",()=>{window.dataLayer.push({event:"chat.messagesend"})}),window.embedded_svc.addEventHandler("onAgentJoinedConference",()=>{window.dataLayer.push({event:"chat.agentjoined"})}),window.embedded_svc.addEventHandler("onChatConferenceEnded",()=>{window.dataLayer.push({event:"chat.ended"})}),window.embedded_svc.addEventHandler("onQueueUpdate",e=>{window.dataLayer.push({event:"chat.queueupdate","chat.status":e.queuePosition})}),window.embedded_svc.addEventHandler("onChatEndedByChasitor",()=>{window.dataLayer.push({event:"chat.endedbyvisitor"})}),window.embedded_svc.addEventHandler("onChatEndedByAgent",()=>{window.dataLayer.push({event:"chat.endedbyagent"})}),H()},document.body.appendChild(e)}}}]);